This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: full_code.txt, project_code.txt
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.eslintrc.json
.gitignore
app/api/migrate-transliterations/route.ts
app/api/seed/route.ts
app/api/tts/route.ts
app/auth/callback/route.ts
app/context/LanguageContext.tsx
app/dashboard/alphabet/page.tsx
app/dashboard/layout.tsx
app/dashboard/nikud/page.tsx
app/dashboard/page.tsx
app/dashboard/practice/page.tsx
app/dashboard/progress/page.tsx
app/dashboard/quiz/page.tsx
app/dashboard/settings/page.tsx
app/dashboard/vocabulary/page.tsx
app/globals.css
app/layout.tsx
app/login/page.tsx
app/page.tsx
app/signup/page.tsx
app/upload-lesson/page.tsx
components/AlephBetGrid.tsx
components/AudioPlayer.tsx
components/DashboardNav.tsx
components/LanguageSwitcher.tsx
components/TextToSpeech.tsx
components/VocabCard.tsx
components/VocabularyCard.tsx
HEBREW_PREMIUM_FEATURES.md
HEBREW_PREMIUM_UPGRADE.md
hooks/useAuth.ts
hooks/useLocale.ts
hooks/useStudySession.ts
lib/fsrs.ts
lib/seed-vocab.ts
lib/supabase.ts
messages/en.json
messages/fr.json
messages/he.json
middleware.ts
next.config.js
package.json
postcss.config.js
supabase/migrations/001_initial_schema.sql
tailwind.config.ts
tsconfig.json
types/database.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".eslintrc.json">
{
  "extends": "next/core-web-vitals"
}
</file>

<file path=".gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# local env files
.env*.local
.env

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
</file>

<file path="app/api/seed/route.ts">
import { createClient } from '@supabase/supabase-js';
import { NextResponse } from 'next/server';

export const dynamic = 'force-dynamic';

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
);

// --- THE REAL DATA FROM YOUR FILE ---

const ROOTS = [
  { id: 'ktv', letters: '×›-×ª-×‘', root: '×›×ª×‘', meaning_en: 'writing', meaning_fr: 'Ã©criture' },
  { id: 'lmd', letters: '×œ-×-×“', root: '×œ××“', meaning_en: 'learning', meaning_fr: 'apprentissage' },
  { id: 'dbr', letters: '×“-×‘-×¨', root: '×“×‘×¨', meaning_en: 'speaking', meaning_fr: 'parole' },
  { id: 'hlk', letters: '×”-×œ-×›', root: '×”×œ×›', meaning_en: 'walking', meaning_fr: 'marcher' },
  { id: 'shm', letters: '×©-×-×¢', root: '×©××¢', meaning_en: 'hearing', meaning_fr: 'entendre' },
  { id: 'rah', letters: '×¨-×-×”', root: '×¨××”', meaning_en: 'seeing', meaning_fr: 'voir' },
  { id: 'ahv', letters: '×-×”-×‘', root: '××”×‘', meaning_en: 'loving', meaning_fr: 'aimer' },
  { id: 'ydh', letters: '×™-×“-×¢', root: '×™×“×¢', meaning_en: 'knowing', meaning_fr: 'savoir' },
  { id: 'bra', letters: '×‘-×¨-×', root: '×‘×¨×', meaning_en: 'creating', meaning_fr: 'crÃ©er' },
  { id: 'qds', letters: '×§-×“-×©', root: '×§×“×©', meaning_en: 'holiness', meaning_fr: 'saintetÃ©' }
];

const VOCAB_LIST = [
  // GREETINGS
  { id: 'shalom', hebrew: '×©Ö¸××œ×•Ö¹×', hebrewUnpointed: '×©×œ×•×', translit: 'shalom', meaning_en: 'hello/peace', meaning_fr: 'bonjour/paix', level: 'a1', root_id: 'shm' },
  { id: 'boker_tov', hebrew: '×‘Ö¹Ö¼×§Ö¶×¨ ×˜×•Ö¹×‘', hebrewUnpointed: '×‘×•×§×¨ ×˜×•×‘', translit: 'boker tov', meaning_en: 'good morning', meaning_fr: 'bonjour', level: 'a1' },
  { id: 'toda', hebrew: '×ªÖ¼×•Ö¹×“Ö¸×”', hebrewUnpointed: '×ª×•×“×”', translit: 'toda', meaning_en: 'thank you', meaning_fr: 'merci', level: 'a1' },
  { id: 'ken', hebrew: '×›ÖµÖ¼×Ÿ', hebrewUnpointed: '×›×Ÿ', translit: 'ken', meaning_en: 'yes', meaning_fr: 'oui', level: 'a1' },
  { id: 'lo', hebrew: '×œÖ¹×', hebrewUnpointed: '×œ×', translit: 'lo', meaning_en: 'no', meaning_fr: 'non', level: 'a1' },
  { id: 'slicha', hebrew: '×¡Ö°×œÖ´×™×—Ö¸×”', hebrewUnpointed: '×¡×œ×™×—×”', translit: 'slicha', meaning_en: 'sorry/excuse me', meaning_fr: 'pardon', level: 'a1' },
  { id: 'lehitraot', hebrew: '×œÖ°×”Ö´×ªÖ°×¨Ö¸××•Ö¹×ª', hebrewUnpointed: '×œ×”×ª×¨××•×ª', translit: 'lehitraot', meaning_en: 'goodbye', meaning_fr: 'au revoir', level: 'a1', root_id: 'rah' },
  { id: 'naim_meod', hebrew: '× Ö¸×¢Ö´×™× ×Ö°×Ö¹×“', hebrewUnpointed: '× ×¢×™× ×××•×“', translit: 'naim meod', meaning_en: 'nice to meet you', meaning_fr: 'enchantÃ©', level: 'a1' },

  // PRONOUNS
  { id: 'ani', hebrew: '×Ö²× Ö´×™', hebrewUnpointed: '×× ×™', translit: 'ani', meaning_en: 'I', meaning_fr: 'je', level: 'a1' },
  { id: 'ata', hebrew: '×Ö·×ªÖ¸Ö¼×”', hebrewUnpointed: '××ª×”', translit: 'ata', meaning_en: 'you (m)', meaning_fr: 'tu (m)', level: 'a1' },
  { id: 'at', hebrew: '×Ö·×ªÖ°Ö¼', hebrewUnpointed: '××ª', translit: 'at', meaning_en: 'you (f)', meaning_fr: 'tu (f)', level: 'a1' },
  { id: 'hu', hebrew: '×”×•Ö¼×', hebrewUnpointed: '×”×•×', translit: 'hu', meaning_en: 'he', meaning_fr: 'il', level: 'a1' },
  { id: 'hi', hebrew: '×”Ö´×™×', hebrewUnpointed: '×”×™×', translit: 'hi', meaning_en: 'she', meaning_fr: 'elle', level: 'a1' },
  { id: 'anachnu', hebrew: '×Ö²× Ö·×—Ö°× ×•Ö¼', hebrewUnpointed: '×× ×—× ×•', translit: 'anachnu', meaning_en: 'we', meaning_fr: 'nous', level: 'a1' },
  
  // NUMBERS 1-10
  { id: 'echad', hebrew: '×Ö¶×—Ö¸×“', hebrewUnpointed: '××—×“', translit: 'echad', meaning_en: 'one', meaning_fr: 'un', level: 'a1' },
  { id: 'shtayim', hebrew: '×©Ö°××ªÖ·Ö¼×™Ö´×', hebrewUnpointed: '×©×ª×™×™×', translit: 'shtayim', meaning_en: 'two', meaning_fr: 'deux', level: 'a1' },
  { id: 'shalosh', hebrew: '×©Ö¸××œ×•Ö¹×©×', hebrewUnpointed: '×©×œ×•×©', translit: 'shalosh', meaning_en: 'three', meaning_fr: 'trois', level: 'a1' },
  { id: 'arba', hebrew: '×Ö·×¨Ö°×‘Ö·Ö¼×¢', hebrewUnpointed: '××¨×‘×¢', translit: 'arba', meaning_en: 'four', meaning_fr: 'quatre', level: 'a1' },
  { id: 'chamesh', hebrew: '×—Ö¸×Öµ×©×', hebrewUnpointed: '×—××©', translit: 'chamesh', meaning_en: 'five', meaning_fr: 'cinq', level: 'a1' },

  // BIBLICAL & CORE
  { id: 'elohim', hebrew: '×Ö±×œÖ¹×”Ö´×™×', hebrewUnpointed: '××œ×”×™×', translit: 'Elohim', meaning_en: 'God', meaning_fr: 'Dieu', level: 'a1' },
  { id: 'torah', hebrew: '×ªÖ¼×•Ö¹×¨Ö¸×”', hebrewUnpointed: '×ª×•×¨×”', translit: 'Torah', meaning_en: 'Torah/Instruction', meaning_fr: 'Torah', level: 'a1', root_id: 'lmd' },
  { id: 'ahava', hebrew: '×Ö·×”Ö²×‘Ö¸×”', hebrewUnpointed: '××”×‘×”', translit: 'ahava', meaning_en: 'love', meaning_fr: 'amour', level: 'a1', root_id: 'ahv' },
  { id: 'ruach', hebrew: '×¨×•Ö¼×—Ö·', hebrewUnpointed: '×¨×•×—', translit: 'ruach', meaning_en: 'spirit/wind', meaning_fr: 'esprit', level: 'a2' },
  { id: 'nefesh', hebrew: '× Ö¶×¤Ö¶×©×', hebrewUnpointed: '× ×¤×©', translit: 'nefesh', meaning_en: 'soul/life', meaning_fr: 'Ã¢me', level: 'a2' },
  
  // FAMILY
  { id: 'aba', hebrew: '×Ö·×‘Ö¸Ö¼×', hebrewUnpointed: '××‘×', translit: 'aba', meaning_en: 'dad', meaning_fr: 'papa', level: 'a1', root_id: 'av' },
  { id: 'ima', hebrew: '×Ö´×Ö¸Ö¼×', hebrewUnpointed: '×××', translit: 'ima', meaning_en: 'mom', meaning_fr: 'maman', level: 'a1', root_id: 'em' },
  { id: 'bayit', hebrew: '×‘Ö·Ö¼×™Ö´×ª', hebrewUnpointed: '×‘×™×ª', translit: 'bayit', meaning_en: 'house/home', meaning_fr: 'maison', level: 'a1' }
];

export async function GET() {
  try {
    // 1. Clear old data (Optional: remove this if you want to keep adding)
    // await supabase.from('vocabulary').delete().neq('id', '0');

    // 2. Insert Roots
    const { error: rootError } = await supabase.from('roots').upsert(
      ROOTS.map(r => ({
        id: r.id, // Explicit ID
        letters: r.letters,
        root_word: r.root,
        meaning_en: r.meaning_en,
        meaning_fr: r.meaning_fr
      }))
    );
    if (rootError) console.error("Root Error:", rootError);

    // 3. Insert Vocabulary
    const { error: vocabError } = await supabase.from('vocabulary').upsert(
      VOCAB_LIST.map(v => ({
        id: v.id,
        hebrew: v.hebrew,
        hebrew_unpointed: v.hebrewUnpointed,
        transliteration: v.translit,
        meaning_en: v.meaning_en,
        meaning_fr: v.meaning_fr,
        difficulty_level: v.level,
        root_id: v.root_id || null
      }))
    );

    if (vocabError) throw vocabError;

    return NextResponse.json({ 
      success: true, 
      message: `Database refreshed! Inserted ${VOCAB_LIST.length} words.` 
    });
  } catch (error: any) {
    return NextResponse.json({ success: false, error: error.message }, { status: 500 });
  }
}
</file>

<file path="app/auth/callback/route.ts">
import { createServerClient, type CookieOptions } from '@supabase/ssr'
import { cookies } from 'next/headers'
import { NextResponse } from 'next/server'

export async function GET(request: Request) {
  const requestUrl = new URL(request.url)
  const code = requestUrl.searchParams.get('code')
  const next = requestUrl.searchParams.get('next') ?? '/dashboard'
  const origin = requestUrl.origin

  if (code) {
    const cookieStore = cookies()
    const supabase = createServerClient(
      process.env.NEXT_PUBLIC_SUPABASE_URL!,
      process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
      {
        cookies: {
          get(name: string) {
            return cookieStore.get(name)?.value
          },
          set(name: string, value: string, options: CookieOptions) {
            cookieStore.set({ name, value, ...options })
          },
          remove(name: string, options: CookieOptions) {
            cookieStore.set({ name, value: '', ...options })
          },
        },
      }
    )

    // ×”×—×œ×¤×ª ×”×§×•×“ ×‘-Session
    const { error } = await supabase.auth.exchangeCodeForSession(code)
    
    if (!error) {
      // ×× ×”×›×œ ×”×¦×œ×™×—, ×©×œ×— ×œ×“×£ ×”×™×¢×“ (×‘×“×¨×š ×›×œ×œ ×“×©×‘×•×¨×“)
      return NextResponse.redirect(`${origin}${next}`)
    }
    
    // ×× ×”×™×™×ª×” ×©×’×™××” ×‘×”×—×œ×¤×ª ×”×§×•×“, × ×“×¤×™×¡ ××•×ª×” ×œ×œ×•×’ ×›×“×™ ×©×ª×¨××” ×‘×˜×¨××™× ×œ
    console.error('Auth callback error:', error.message)
  }

  // ×‘××§×¨×” ×©×œ ×©×’×™××” ××• ×©××™×Ÿ ×§×•×“, ×—×–×¨×” ×œ×œ×•×’×™×Ÿ ×¢× ×”×¡×‘×¨
  return NextResponse.redirect(`${origin}/login?error=auth-code-error`)
}
</file>

<file path="app/context/LanguageContext.tsx">
'use client';

import React, { createContext, useContext, useState, useEffect } from 'react';

type Language = 'en' | 'he' | 'fr';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguage] = useState<Language>('en');
  const [translations, setTranslations] = useState<any>({});

  useEffect(() => {
    // Load translations
    const loadTranslations = async () => {
      try {
        const messages = await import(`@/messages/${language}.json`);
        setTranslations(messages.default);
      } catch (error) {
        console.error('Failed to load translations:', error);
      }
    };
    loadTranslations();
  }, [language]);

  const t = (key: string): string => {
    const keys = key.split('.');
    let value: any = translations;
    
    for (const k of keys) {
      value = value?.[k];
    }
    
    return value || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within LanguageProvider');
  }
  return context;
}
</file>

<file path="app/globals.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --font-heebo: 'Heebo', sans-serif;
  --font-frank-ruhl-libre: 'Frank Ruhl Libre', serif;
}

html {
  direction: rtl;
}

body {
  @apply bg-white text-gray-900;
  font-family: var(--font-heebo);
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  .font-hebrew {
    font-family: var(--font-heebo);
  }
}
</file>

<file path="app/signup/page.tsx">
'use client';

import { useState } from 'react';
import { createBrowserClient } from '@supabase/ssr';
import { useRouter } from 'next/navigation';
import Link from 'next/link';

export default function SignupPage() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState<string | null>(null);
  const [success, setSuccess] = useState(false);
  const [loading, setLoading] = useState(false);
  const router = useRouter();

  const supabase = createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  );

  const handleSignup = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setError(null);

    try {
      const { error: signupError } = await supabase.auth.signUp({
        email,
        password,
        options: {
          emailRedirectTo: `${window.location.origin}/auth/callback`,
        },
      });

      if (signupError) {
        setError(signupError.message);
        setLoading(false);
      } else {
        setSuccess(true);
        setLoading(false);
      }
    } catch (err) {
      setError('An error occurred during signup');
      setLoading(false);
    }
  };

  if (success) {
    return (
      <div className="flex h-screen items-center justify-center bg-slate-900" dir="ltr">
        <div className="w-full max-w-md p-8 bg-white rounded-3xl shadow-2xl text-center">
          <div className="text-5xl mb-4">ğŸ“§</div>
          <h1 className="text-2xl font-black text-slate-900 mb-2">Check your email</h1>
          <p className="text-slate-500 mb-6">We've sent a confirmation link to {email}.</p>
          <Link href="/login" className="text-indigo-600 font-bold hover:underline">
            Back to Login
          </Link>
        </div>
      </div>
    );
  }

  return (
    <div className="flex h-screen items-center justify-center bg-slate-900" dir="ltr">
      <div className="w-full max-w-md p-8 bg-white rounded-3xl shadow-2xl">
        <h1 className="text-3xl font-black text-slate-900 mb-2 text-center tracking-tighter">
          JOIN HEBREW MASTER
        </h1>
        <p className="text-center text-slate-500 mb-6 text-sm">Create your student account</p>
        
        <form onSubmit={handleSignup} className="space-y-4">
          <div>
            <label className="block text-sm font-bold text-slate-700 mb-1">Email</label>
            <input 
              type="email" 
              className="w-full p-3 border border-slate-200 rounded-xl outline-none text-slate-900 focus:ring-2 focus:ring-indigo-500"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              required
              placeholder="name@email.com"
            />
          </div>
          <div>
            <label className="block text-sm font-bold text-slate-700 mb-1">Password</label>
            <input 
              type="password" 
              className="w-full p-3 border border-slate-200 rounded-xl outline-none text-slate-900 focus:ring-2 focus:ring-indigo-500"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              required
              placeholder="At least 6 characters"
            />
          </div>

          {error && (
            <div className="p-3 rounded-lg bg-red-50 border border-red-100">
              <p className="text-red-500 text-xs font-bold">{error}</p>
            </div>
          )}

          <button 
            disabled={loading}
            className="w-full bg-indigo-600 text-white p-4 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition-all shadow-lg shadow-indigo-200"
          >
            {loading ? 'Creating account...' : 'Create Account'}
          </button>
        </form>
        
        <p className="mt-6 text-center text-sm text-slate-500">
          Already have an account?{' '}
          <Link href="/login" className="text-indigo-600 font-bold hover:underline">
            Log in
          </Link>
        </p>
      </div>
    </div>
  );
}
</file>

<file path="components/AlephBetGrid.tsx">
interface LetterCard {
  print: string
  cursive: string
  name: string
  englishName: string
}

const letters: LetterCard[] = [
  {
    print: '×',
    cursive: '×',
    name: '××œ×£',
    englishName: 'Aleph'
  },
  {
    print: '×‘',
    cursive: '×‘',
    name: '×‘×™×ª',
    englishName: 'Bet'
  },
  {
    print: '×’',
    cursive: '×’',
    name: '×’×™××œ',
    englishName: 'Gimel'
  },
  {
    print: '×“',
    cursive: '×“',
    name: '×“×œ×ª',
    englishName: 'Dalet'
  }
]

export default function AlephBetGrid() {
  return (
    <div className="grid grid-cols-2 md:grid-cols-4 gap-6 w-full max-w-4xl">
      {letters.map((letter, index) => (
        <div
          key={index}
          className="group relative aspect-square cursor-pointer"
        >
          {/* Glassmorphism Card */}
          <div className="absolute inset-0 bg-white/30 backdrop-blur-md rounded-2xl shadow-lg border border-white/50 transition-all duration-300 hover:shadow-2xl hover:scale-105">
            <div className="relative w-full h-full flex flex-col items-center justify-center p-6">
              {/* Print Version (Default) */}
              <div className="absolute inset-0 flex flex-col items-center justify-center opacity-100 group-hover:opacity-0 transition-opacity duration-300">
                <span className="text-8xl md:text-9xl font-bold text-gray-800 font-hebrew">
                  {letter.print}
                </span>
                <span className="mt-4 text-lg font-semibold text-gray-700">
                  {letter.name}
                </span>
                <span className="text-sm text-gray-500 mt-1">
                  {letter.englishName}
                </span>
              </div>
              
              {/* Cursive Version (On Hover) */}
              <div className="absolute inset-0 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                <span className="text-8xl md:text-9xl font-bold text-indigo-600 font-hebrew">
                  {letter.cursive}
                </span>
                <span className="mt-4 text-lg font-semibold text-indigo-700">
                  {letter.name}
                </span>
                <span className="text-sm text-indigo-500 mt-1">
                  Cursive
                </span>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  )
}
</file>

<file path="components/AudioPlayer.tsx">
'use client'

import { useEffect, useState, useRef } from 'react'

interface AudioPlayerProps {
  text: string
  autoPlay?: boolean
  className?: string
}

export default function AudioPlayer({ text, autoPlay = false, className = '' }: AudioPlayerProps) {
  const [isPlaying, setIsPlaying] = useState(false)
  const [isLoading, setIsLoading] = useState(false)
  const audioRef = useRef<HTMLAudioElement | null>(null)

  const playAudio = async (textToSpeak: string) => {
    if (!textToSpeak) return

    try {
      setIsLoading(true)

      // Stop any currently playing audio
      if (audioRef.current) {
        audioRef.current.pause()
        audioRef.current = null
      }

      // Fetch audio from ElevenLabs TTS API
      const response = await fetch('/api/tts', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ text: textToSpeak }),
      })

      if (!response.ok) {
        throw new Error(`Failed to fetch audio: ${response.status}`)
      }

      // Get the audio blob
      const audioBlob = await response.blob()
      const audioUrl = URL.createObjectURL(audioBlob)

      // Create and play audio
      const audio = new Audio(audioUrl)
      audioRef.current = audio

      audio.onplay = () => {
        setIsPlaying(true)
        setIsLoading(false)
      }

      audio.onended = () => {
        setIsPlaying(false)
        setIsLoading(false)
        // Clean up the object URL
        URL.revokeObjectURL(audioUrl)
        audioRef.current = null
      }

      audio.onerror = (error) => {
        console.error('Audio playback error:', error)
        setIsPlaying(false)
        setIsLoading(false)
        URL.revokeObjectURL(audioUrl)
        audioRef.current = null
      }

      await audio.play()
    } catch (error: any) {
      console.error('Error playing audio:', error)
      setIsLoading(false)
      setIsPlaying(false)
    }
  }

  const handleStop = () => {
    if (audioRef.current) {
      audioRef.current.pause()
      audioRef.current.currentTime = 0
      setIsPlaying(false)
      setIsLoading(false)
    }
  }

  const handleClick = () => {
    if (isPlaying || isLoading) {
      handleStop()
    } else {
      playAudio(text)
    }
  }

  // Auto-play when text changes and autoPlay is true
  useEffect(() => {
    if (autoPlay && text) {
      // Small delay to ensure component is ready
      const timer = setTimeout(() => {
        playAudio(text)
      }, 300)

      return () => {
        clearTimeout(timer)
        handleStop()
      }
    }
  }, [text, autoPlay])

  // Cleanup on unmount
  useEffect(() => {
    return () => {
      handleStop()
      if (audioRef.current) {
        audioRef.current = null
      }
    }
  }, [])

  const buttonClass = `
    p-3 rounded-lg transition-all duration-200 ${className}
    ${
      isLoading
        ? 'bg-indigo-100 text-indigo-600 cursor-wait'
        : isPlaying
        ? 'bg-indigo-100 text-indigo-600 animate-pulse'
        : 'bg-gray-100 text-gray-400 hover:bg-indigo-50 hover:text-indigo-600'
    }
  `

  return (
    <button
      onClick={handleClick}
      disabled={isLoading}
      className={buttonClass}
      aria-label={isLoading ? 'Loading audio...' : isPlaying ? 'Stop audio' : 'Play audio'}
    >
      {isLoading ? (
        // Loading spinner
        <svg
          className="animate-spin h-6 w-6"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            className="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            strokeWidth="4"
          ></circle>
          <path
            className="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
          ></path>
        </svg>
      ) : isPlaying ? (
        // Stop icon
        <svg
          xmlns="http://www.w3.org/2000/svg"
          className="h-6 w-6"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fillRule="evenodd"
            d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 012 0v6a1 1 0 11-2 0V7zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V7a1 1 0 00-1-1z"
            clipRule="evenodd"
          />
        </svg>
      ) : (
        // Speaker icon
        <svg
          xmlns="http://www.w3.org/2000/svg"
          className="h-6 w-6"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fillRule="evenodd"
            d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.5 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.5l3.883-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z"
            clipRule="evenodd"
          />
        </svg>
      )}
    </button>
  )
}
</file>

<file path="components/TextToSpeech.tsx">
'use client'

interface TextToSpeechProps {
  text: string
  className?: string
}

export default function TextToSpeech({ text, className = '' }: TextToSpeechProps) {
  const handleSpeak = () => {
    if ('speechSynthesis' in window) {
      // Cancel any ongoing speech
      speechSynthesis.cancel()
      
      const utterance = new SpeechSynthesisUtterance(text)
      utterance.lang = 'he-IL'
      utterance.rate = 0.9 // Slightly slower for clarity
      
      speechSynthesis.speak(utterance)
    }
  }

  return (
    <button
      onClick={handleSpeak}
      className={`p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all duration-200 ${className}`}
      aria-label="Play audio"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        className="h-5 w-5"
        viewBox="0 0 20 20"
        fill="currentColor"
      >
        <path
          fillRule="evenodd"
          d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.5 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.5l3.883-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z"
          clipRule="evenodd"
        />
      </svg>
    </button>
  )
}
</file>

<file path="components/VocabCard.tsx">
'use client'

import TextToSpeech from './TextToSpeech'

interface VocabCardProps {
  word: {
    id: string
    hebrew: string
    hebrew_unpointed: string
    transliteration?: string | null
    meaning_en?: string | null
    part_of_speech?: string | null
    root?: {
      root_letters: string
    } | null
  }
}

export default function VocabCard({ word }: VocabCardProps) {
  // Format root letters with hyphens (e.g., "×›-×ª-×‘")
  const formatRoot = (rootLetters: string) => {
    return rootLetters.split('').join('-')
  }

  return (
    <div className="bg-white rounded-xl border border-gray-200 p-8 relative hover:shadow-lg transition-all duration-300 group">
      {/* Part of Speech Tag - Top Left (RTL: top right) */}
      {word.part_of_speech && (
        <div className="absolute top-4 right-4">
          <span className="px-3 py-1 bg-gray-100 text-gray-600 text-xs font-semibold uppercase tracking-wider rounded-full">
            {word.part_of_speech}
          </span>
        </div>
      )}

      {/* TextToSpeech Button - Top Left (RTL: top left) */}
      <div className="absolute top-4 left-4">
        <TextToSpeech text={word.hebrew || word.hebrew_unpointed} />
      </div>

      {/* Hebrew Text - HUGE and Centered, Frank Ruhl Libre */}
      <div className="text-center mb-6 mt-12">
        <h3 className="text-4xl font-bold text-gray-900 font-serif leading-tight">
          {word.hebrew || word.hebrew_unpointed}
        </h3>
      </div>

      {/* Transliteration - Centered, Gray */}
      {word.transliteration && (
        <div className="text-center mb-4">
          <p className="text-gray-500 italic text-sm">
            {word.transliteration}
          </p>
        </div>
      )}

      {/* English Translation - Centered, Indigo */}
      <div className="text-center mb-6">
        <p className="text-indigo-600 font-semibold text-lg">
          {word.meaning_en || 'No translation'}
        </p>
      </div>

      {/* Root Badge - Bottom */}
      {word.root && word.root.root_letters && (
        <div className="absolute bottom-4 left-1/2 transform -translate-x-1/2">
          <span className="px-4 py-2 bg-indigo-50 text-indigo-700 text-xs font-medium rounded-full border border-indigo-200">
            Root: {formatRoot(word.root.root_letters)}
          </span>
        </div>
      )}
    </div>
  )
}
</file>

<file path="components/VocabularyCard.tsx">
'use client'

interface VocabularyCardProps {
  word: {
    id: string
    hebrew: string
    hebrew_unpointed: string
    transliteration?: string | null
    meaning_en?: string | null
    audio_url?: string | null
  }
}

export default function VocabularyCard({ word }: VocabularyCardProps) {
  const handleAudio = () => {
    if (word.audio_url) {
      const audio = new Audio(word.audio_url)
      audio.play().catch((err) => console.error('Audio playback failed:', err))
    } else {
      // Fallback: Use Web Speech API if no audio URL
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(word.hebrew)
        utterance.lang = 'he-IL'
        speechSynthesis.speak(utterance)
      }
    }
  }

  return (
    <div className="bg-white rounded-lg shadow-sm border border-gray-100 p-6 relative hover:shadow-md transition-shadow duration-200">
      {/* Speaker Icon Button - Top Right (RTL: left side) */}
      <button
        onClick={handleAudio}
        className="absolute top-4 left-4 p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200"
        aria-label="Play audio"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          className="h-5 w-5"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fillRule="evenodd"
            d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.5 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.5l3.883-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z"
            clipRule="evenodd"
          />
        </svg>
      </button>

      {/* Hebrew Text - Large and Bold */}
      <div className="mb-4 mt-4">
        <h3 className="text-3xl font-bold text-gray-900 font-hebrew text-start">
          {word.hebrew || word.hebrew_unpointed}
        </h3>
      </div>

      {/* Transliteration - Gray, Italic */}
      {word.transliteration && (
        <div className="mb-3">
          <p className="text-gray-500 italic text-sm">
            {word.transliteration}
          </p>
        </div>
      )}

      {/* English Translation - Indigo */}
      <div>
        <p className="text-indigo-600 font-medium">
          {word.meaning_en || 'No translation'}
        </p>
      </div>
    </div>
  )
}
</file>

<file path="HEBREW_PREMIUM_FEATURES.md">
# Hebrew Master Premium - PART 2: Components & Features
## All the Premium Features I Promised

---

# ğŸ“‹ TABLE OF CONTENTS

1. [Auth System](#auth)
2. [Study Session with FSRS](#study-session)
3. [Flashcard Component](#flashcard)
4. [Progress Dashboard](#progress)
5. [Teacher Dashboard](#teacher)
6. [Homework System](#homework)
7. [Achievement System](#achievements)
8. [TTS Audio](#tts)
9. [Stripe Payments](#stripe)
10. [PWA Config](#pwa)

---

# AUTH SYSTEM

```typescript
// lib/supabase/client.ts
import { createBrowserClient } from '@supabase/ssr';

export function createClient() {
  return createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  );
}

// lib/supabase/server.ts
import { createServerClient } from '@supabase/ssr';
import { cookies } from 'next/headers';

export function createServerSupabaseClient() {
  const cookieStore = cookies();
  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        get(name: string) {
          return cookieStore.get(name)?.value;
        },
        set(name: string, value: string, options: any) {
          cookieStore.set({ name, value, ...options });
        },
        remove(name: string, options: any) {
          cookieStore.set({ name, value: '', ...options });
        },
      },
    }
  );
}
```

```typescript
// hooks/useAuth.ts
'use client';
import { useEffect, useState } from 'react';
import { createClient } from '@/lib/supabase/client';
import { User } from '@supabase/supabase-js';

export function useAuth() {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);
  const supabase = createClient();

  useEffect(() => {
    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {
      setUser(session?.user ?? null);
      setLoading(false);
    });

    return () => subscription.unsubscribe();
  }, []);

  const signIn = async (email: string, password: string) => {
    const { data, error } = await supabase.auth.signInWithPassword({ email, password });
    if (error) throw error;
    return data;
  };

  const signUp = async (email: string, password: string, fullName: string) => {
    const { data, error } = await supabase.auth.signUp({
      email,
      password,
      options: { data: { full_name: fullName } }
    });
    if (error) throw error;
    
    // Create profile
    if (data.user) {
      await supabase.from('profiles').insert({
        id: data.user.id,
        email,
        full_name: fullName
      });
      await supabase.from('user_progress').insert({
        user_id: data.user.id
      });
    }
    return data;
  };

  const signOut = async () => {
    await supabase.auth.signOut();
  };

  return { user, loading, signIn, signUp, signOut };
}
```

```tsx
// app/auth/login/page.tsx
'use client';
import { useState } from 'react';
import { useRouter } from 'next/navigation';
import Link from 'next/link';
import { useAuth } from '@/hooks/useAuth';
import { Eye, EyeOff, Mail, Lock, Loader2 } from 'lucide-react';

export default function LoginPage() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [showPassword, setShowPassword] = useState(false);
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);
  const { signIn } = useAuth();
  const router = useRouter();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setError('');
    
    try {
      await signIn(email, password);
      router.push('/dashboard');
    } catch (err: any) {
      setError(err.message || 'Failed to sign in');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-[#0a0a0f] flex items-center justify-center p-4">
      <div className="w-full max-w-md">
        {/* Logo */}
        <div className="text-center mb-8">
          <div className="w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center text-3xl font-bold mx-auto mb-4">
            ×¢
          </div>
          <h1 className="text-2xl font-bold text-white">Welcome Back</h1>
          <p className="text-gray-400 mt-2">Sign in to continue learning Hebrew</p>
        </div>

        {/* Form */}
        <form onSubmit={handleSubmit} className="card p-8 space-y-6">
          {error && (
            <div className="p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 text-sm">
              {error}
            </div>
          )}

          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">Email</label>
            <div className="relative">
              <Mail className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" />
              <input
                type="email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="input pl-12"
                placeholder="you@example.com"
                required
              />
            </div>
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">Password</label>
            <div className="relative">
              <Lock className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" />
              <input
                type={showPassword ? 'text' : 'password'}
                value={password}
                onChange={(e) => setPassword(e.target.value)}
                className="input pl-12 pr-12"
                placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                required
              />
              <button
                type="button"
                onClick={() => setShowPassword(!showPassword)}
                className="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white"
              >
                {showPassword ? <EyeOff className="w-5 h-5" /> : <Eye className="w-5 h-5" />}
              </button>
            </div>
          </div>

          <button
            type="submit"
            disabled={loading}
            className="btn-primary w-full flex items-center justify-center gap-2"
          >
            {loading ? <Loader2 className="w-5 h-5 animate-spin" /> : null}
            {loading ? 'Signing in...' : 'Sign In'}
          </button>

          <p className="text-center text-gray-400">
            Don't have an account?{' '}
            <Link href="/auth/signup" className="text-indigo-400 hover:text-indigo-300">
              Sign up
            </Link>
          </p>
        </form>
      </div>
    </div>
  );
}
```

---

# STUDY SESSION WITH FSRS

```typescript
// hooks/useStudySession.ts
'use client';
import { useState, useEffect, useCallback } from 'react';
import { createClient } from '@/lib/supabase/client';
import { schedule, Rating, State, createCard, previewIntervals } from '@/lib/fsrs';
import { FSRSCard, VocabularyWord } from '@/types';
import { hebrewAlphabet } from '@/lib/data/alphabet';
import { vocabularyData, getAllWords } from '@/lib/data/vocabulary';

interface StudyItem {
  card: FSRSCard;
  content: {
    type: 'letter' | 'nikud' | 'word';
    front: string;
    back: string;
    audio?: string;
    details?: any;
  };
}

export function useStudySession(userId: string) {
  const [cards, setCards] = useState<StudyItem[]>([]);
  const [currentIndex, setCurrentIndex] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [sessionStats, setSessionStats] = useState({
    reviewed: 0,
    correct: 0,
    xpEarned: 0,
    startTime: new Date()
  });
  const [loading, setLoading] = useState(true);
  const supabase = createClient();

  // Load due cards
  const loadCards = useCallback(async () => {
    setLoading(true);
    
    // Get user's FSRS cards that are due
    const { data: fsrsCards } = await supabase
      .from('fsrs_cards')
      .select('*')
      .eq('user_id', userId)
      .lte('due', new Date().toISOString())
      .order('due', { ascending: true })
      .limit(20);

    // Get some new cards if not enough due cards
    const { data: allCards } = await supabase
      .from('fsrs_cards')
      .select('item_id')
      .eq('user_id', userId);
    
    const learnedIds = new Set(allCards?.map(c => c.item_id) || []);
    
    // Build study items
    const studyItems: StudyItem[] = [];
    
    // Add due cards
    fsrsCards?.forEach(card => {
      const content = getContentForCard(card);
      if (content) {
        studyItems.push({ card, content });
      }
    });
    
    // Add new words if needed (up to 10 new per session)
    if (studyItems.length < 10) {
      const allWords = getAllWords();
      const newWords = allWords.filter(w => !learnedIds.has(w.id)).slice(0, 10 - studyItems.length);
      
      for (const word of newWords) {
        const newCard: FSRSCard = {
          id: crypto.randomUUID(),
          user_id: userId,
          item_type: 'word',
          item_id: word.id,
          ...createCard(),
          created_at: new Date().toISOString()
        };
        
        studyItems.push({
          card: newCard,
          content: {
            type: 'word',
            front: word.hebrew_with_nikud,
            back: word.meaning_en,
            details: word
          }
        });
      }
    }
    
    setCards(studyItems);
    setLoading(false);
  }, [userId, supabase]);

  // Get content for a card
  function getContentForCard(card: FSRSCard) {
    if (card.item_type === 'letter') {
      const letter = hebrewAlphabet.find(l => l.id === card.item_id);
      if (letter) {
        return {
          type: 'letter' as const,
          front: letter.letter,
          back: `${letter.name_english} - ${letter.sound_description_en}`,
          details: letter
        };
      }
    } else if (card.item_type === 'word') {
      const allWords = getAllWords();
      const word = allWords.find(w => w.id === card.item_id);
      if (word) {
        return {
          type: 'word' as const,
          front: word.hebrew_with_nikud,
          back: word.meaning_en,
          details: word
        };
      }
    }
    return null;
  }

  // Handle rating
  const handleRating = async (rating: Rating) => {
    const currentItem = cards[currentIndex];
    if (!currentItem) return;

    const { card: updatedCard } = schedule(currentItem.card, rating);
    
    // Save to database
    const isNew = currentItem.card.state === State.New;
    
    if (isNew) {
      await supabase.from('fsrs_cards').insert({
        ...updatedCard,
        user_id: userId
      });
    } else {
      await supabase.from('fsrs_cards').update(updatedCard).eq('id', updatedCard.id);
    }

    // Log review
    await supabase.from('review_logs').insert({
      card_id: updatedCard.id,
      user_id: userId,
      rating,
      state: currentItem.card.state,
      due: currentItem.card.due,
      stability: updatedCard.stability,
      difficulty: updatedCard.difficulty,
      elapsed_days: updatedCard.elapsed_days,
      scheduled_days: updatedCard.scheduled_days,
      reviewed_at: new Date().toISOString()
    });

    // Update stats
    const xp = rating >= Rating.Good ? 10 : 5;
    setSessionStats(prev => ({
      ...prev,
      reviewed: prev.reviewed + 1,
      correct: prev.correct + (rating >= Rating.Good ? 1 : 0),
      xpEarned: prev.xpEarned + xp
    }));

    // Next card
    setIsFlipped(false);
    if (currentIndex < cards.length - 1) {
      setCurrentIndex(prev => prev + 1);
    }
  };

  // Get current intervals preview
  const getIntervals = () => {
    const currentItem = cards[currentIndex];
    if (!currentItem) return null;
    return previewIntervals(currentItem.card);
  };

  useEffect(() => {
    loadCards();
  }, [loadCards]);

  return {
    cards,
    currentCard: cards[currentIndex],
    currentIndex,
    totalCards: cards.length,
    isFlipped,
    setIsFlipped,
    handleRating,
    getIntervals,
    sessionStats,
    loading,
    isComplete: currentIndex >= cards.length
  };
}
```

---

# FLASHCARD COMPONENT

```tsx
// components/Flashcard.tsx
'use client';
import { motion, AnimatePresence } from 'framer-motion';
import { Volume2, Eye, EyeOff } from 'lucide-react';
import { Rating } from '@/lib/fsrs';

interface FlashcardProps {
  front: string;
  back: string;
  isFlipped: boolean;
  onFlip: () => void;
  onRate: (rating: Rating) => void;
  intervals: Record<Rating, string> | null;
  showHint?: boolean;
  hint?: string;
  onPlayAudio?: () => void;
}

export function Flashcard({
  front,
  back,
  isFlipped,
  onFlip,
  onRate,
  intervals,
  showHint,
  hint,
  onPlayAudio
}: FlashcardProps) {
  return (
    <div className="w-full max-w-lg mx-auto">
      {/* Card */}
      <motion.div
        className="relative w-full aspect-[3/2] cursor-pointer perspective-1000"
        onClick={() => !isFlipped && onFlip()}
      >
        <motion.div
          className="absolute inset-0 transition-transform duration-500 transform-style-3d"
          animate={{ rotateY: isFlipped ? 180 : 0 }}
        >
          {/* Front */}
          <div className="absolute inset-0 backface-hidden rounded-3xl bg-gradient-to-br from-indigo-600 to-purple-700 p-8 flex flex-col items-center justify-center shadow-2xl">
            <p className="hebrew text-6xl md:text-7xl font-bold text-white mb-4">
              {front}
            </p>
            {hint && showHint && (
              <p className="text-indigo-200 text-lg">{hint}</p>
            )}
            {onPlayAudio && (
              <button
                onClick={(e) => { e.stopPropagation(); onPlayAudio(); }}
                className="absolute top-6 right-6 p-3 bg-white/20 rounded-full hover:bg-white/30 transition"
              >
                <Volume2 className="w-6 h-6 text-white" />
              </button>
            )}
            <p className="absolute bottom-6 text-indigo-200 text-sm">
              Tap to reveal
            </p>
          </div>

          {/* Back */}
          <div className="absolute inset-0 backface-hidden rounded-3xl bg-gradient-to-br from-slate-800 to-slate-900 p-8 flex flex-col items-center justify-center shadow-2xl rotate-y-180">
            <p className="text-3xl md:text-4xl font-bold text-white text-center mb-2">
              {back}
            </p>
          </div>
        </motion.div>
      </motion.div>

      {/* Rating Buttons */}
      <AnimatePresence>
        {isFlipped && intervals && (
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: 20 }}
            className="grid grid-cols-4 gap-3 mt-8"
          >
            <button
              onClick={() => onRate(Rating.Again)}
              className="rating-btn rating-again"
            >
              <span className="text-2xl">ğŸ˜</span>
              <span className="text-sm font-bold">Again</span>
              <span className="text-xs opacity-70">{intervals[Rating.Again]}</span>
            </button>
            
            <button
              onClick={() => onRate(Rating.Hard)}
              className="rating-btn rating-hard"
            >
              <span className="text-2xl">ğŸ˜</span>
              <span className="text-sm font-bold">Hard</span>
              <span className="text-xs opacity-70">{intervals[Rating.Hard]}</span>
            </button>
            
            <button
              onClick={() => onRate(Rating.Good)}
              className="rating-btn rating-good"
            >
              <span className="text-2xl">ğŸ˜Š</span>
              <span className="text-sm font-bold">Good</span>
              <span className="text-xs opacity-70">{intervals[Rating.Good]}</span>
            </button>
            
            <button
              onClick={() => onRate(Rating.Easy)}
              className="rating-btn rating-easy"
            >
              <span className="text-2xl">ğŸ‰</span>
              <span className="text-sm font-bold">Easy</span>
              <span className="text-xs opacity-70">{intervals[Rating.Easy]}</span>
            </button>
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
}
```

```tsx
// app/dashboard/study/page.tsx
'use client';
import { useAuth } from '@/hooks/useAuth';
import { useStudySession } from '@/hooks/useStudySession';
import { Flashcard } from '@/components/Flashcard';
import { motion } from 'framer-motion';
import { Trophy, Zap, Target, ArrowLeft } from 'lucide-react';
import Link from 'next/link';

export default function StudyPage() {
  const { user } = useAuth();
  const {
    currentCard,
    currentIndex,
    totalCards,
    isFlipped,
    setIsFlipped,
    handleRating,
    getIntervals,
    sessionStats,
    loading,
    isComplete
  } = useStudySession(user?.id || '');

  if (loading) {
    return (
      <div className="min-h-[60vh] flex items-center justify-center">
        <div className="animate-spin w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full" />
      </div>
    );
  }

  if (isComplete || totalCards === 0) {
    return (
      <div className="min-h-[60vh] flex items-center justify-center">
        <motion.div
          initial={{ scale: 0.8, opacity: 0 }}
          animate={{ scale: 1, opacity: 1 }}
          className="text-center"
        >
          <div className="w-24 h-24 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-6">
            <Trophy className="w-12 h-12 text-white" />
          </div>
          <h2 className="text-3xl font-bold text-white mb-4">Session Complete!</h2>
          <div className="grid grid-cols-3 gap-4 mb-8">
            <div className="card p-4">
              <p className="text-2xl font-bold text-green-400">{sessionStats.reviewed}</p>
              <p className="text-sm text-gray-400">Cards Reviewed</p>
            </div>
            <div className="card p-4">
              <p className="text-2xl font-bold text-blue-400">
                {Math.round((sessionStats.correct / sessionStats.reviewed) * 100) || 0}%
              </p>
              <p className="text-sm text-gray-400">Accuracy</p>
            </div>
            <div className="card p-4">
              <p className="text-2xl font-bold text-yellow-400">+{sessionStats.xpEarned}</p>
              <p className="text-sm text-gray-400">XP Earned</p>
            </div>
          </div>
          <Link href="/dashboard" className="btn-primary">
            Back to Dashboard
          </Link>
        </motion.div>
      </div>
    );
  }

  return (
    <div className="max-w-2xl mx-auto">
      {/* Header */}
      <div className="flex items-center justify-between mb-8">
        <Link href="/dashboard" className="btn-ghost flex items-center gap-2">
          <ArrowLeft className="w-5 h-5" />
          Back
        </Link>
        
        <div className="flex items-center gap-4">
          <div className="flex items-center gap-2 px-4 py-2 bg-yellow-500/20 rounded-full">
            <Zap className="w-4 h-4 text-yellow-400" />
            <span className="font-bold text-yellow-400">+{sessionStats.xpEarned}</span>
          </div>
          <div className="flex items-center gap-2 px-4 py-2 bg-indigo-500/20 rounded-full">
            <Target className="w-4 h-4 text-indigo-400" />
            <span className="font-bold text-indigo-400">{currentIndex + 1}/{totalCards}</span>
          </div>
        </div>
      </div>

      {/* Progress Bar */}
      <div className="progress-bar mb-8">
        <div
          className="progress-fill"
          style={{ width: `${((currentIndex + 1) / totalCards) * 100}%` }}
        />
      </div>

      {/* Flashcard */}
      {currentCard && (
        <Flashcard
          front={currentCard.content.front}
          back={currentCard.content.back}
          isFlipped={isFlipped}
          onFlip={() => setIsFlipped(true)}
          onRate={handleRating}
          intervals={getIntervals()}
        />
      )}

      {/* Keyboard shortcuts hint */}
      <p className="text-center text-gray-500 text-sm mt-8">
        Keyboard: Space to flip â€¢ 1-4 to rate
      </p>
    </div>
  );
}
```

---

# PROGRESS DASHBOARD

```tsx
// app/dashboard/progress/page.tsx
'use client';
import { useEffect, useState } from 'react';
import { createClient } from '@/lib/supabase/client';
import { useAuth } from '@/hooks/useAuth';
import { motion } from 'framer-motion';
import {
  LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer,
  BarChart, Bar, PieChart, Pie, Cell
} from 'recharts';
import { TrendingUp, Calendar, BookOpen, Brain, Target, Clock } from 'lucide-react';

export default function ProgressPage() {
  const { user } = useAuth();
  const [stats, setStats] = useState<any>(null);
  const [weeklyData, setWeeklyData] = useState<any[]>([]);
  const [categoryData, setCategoryData] = useState<any[]>([]);
  const supabase = createClient();

  useEffect(() => {
    if (!user) return;

    async function loadProgress() {
      // Get user progress
      const { data: progress } = await supabase
        .from('user_progress')
        .select('*')
        .eq('user_id', user.id)
        .single();

      setStats(progress);

      // Get review logs for the past 7 days
      const sevenDaysAgo = new Date();
      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
      
      const { data: reviews } = await supabase
        .from('review_logs')
        .select('*')
        .eq('user_id', user.id)
        .gte('reviewed_at', sevenDaysAgo.toISOString());

      // Process weekly data
      const dailyStats: Record<string, { reviews: number, correct: number }> = {};
      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      
      for (let i = 0; i < 7; i++) {
        const date = new Date();
        date.setDate(date.getDate() - (6 - i));
        const dayName = days[date.getDay()];
        dailyStats[dayName] = { reviews: 0, correct: 0 };
      }

      reviews?.forEach(review => {
        const date = new Date(review.reviewed_at);
        const dayName = days[date.getDay()];
        if (dailyStats[dayName]) {
          dailyStats[dayName].reviews++;
          if (review.rating >= 3) dailyStats[dayName].correct++;
        }
      });

      setWeeklyData(Object.entries(dailyStats).map(([day, data]) => ({
        day,
        reviews: data.reviews,
        accuracy: data.reviews > 0 ? Math.round((data.correct / data.reviews) * 100) : 0
      })));

      // Get cards by state
      const { data: cards } = await supabase
        .from('fsrs_cards')
        .select('state')
        .eq('user_id', user.id);

      const stateCounts: Record<string, number> = { new: 0, learning: 0, review: 0, relearning: 0 };
      cards?.forEach(card => {
        stateCounts[card.state] = (stateCounts[card.state] || 0) + 1;
      });

      setCategoryData([
        { name: 'New', value: stateCounts.new, color: '#6366f1' },
        { name: 'Learning', value: stateCounts.learning, color: '#f59e0b' },
        { name: 'Review', value: stateCounts.review, color: '#10b981' },
        { name: 'Relearning', value: stateCounts.relearning, color: '#ef4444' },
      ]);
    }

    loadProgress();
  }, [user, supabase]);

  if (!stats) {
    return <div className="animate-pulse">Loading...</div>;
  }

  return (
    <div className="space-y-8">
      <h1 className="text-3xl font-bold text-white">Your Progress</h1>

      {/* Stats Grid */}
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          className="stat-card"
        >
          <Calendar className="w-8 h-8 text-orange-400 mb-2" />
          <div className="stat-value text-orange-400">{stats.current_streak}</div>
          <div className="stat-label">Day Streak</div>
        </motion.div>

        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.1 }}
          className="stat-card"
        >
          <BookOpen className="w-8 h-8 text-green-400 mb-2" />
          <div className="stat-value text-green-400">{stats.words_learned}</div>
          <div className="stat-label">Words Learned</div>
        </motion.div>

        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.2 }}
          className="stat-card"
        >
          <Brain className="w-8 h-8 text-purple-400 mb-2" />
          <div className="stat-value text-purple-400">{stats.letters_mastered}/22</div>
          <div className="stat-label">Letters Mastered</div>
        </motion.div>

        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.3 }}
          className="stat-card"
        >
          <Clock className="w-8 h-8 text-blue-400 mb-2" />
          <div className="stat-value text-blue-400">{Math.round(stats.total_study_time_minutes / 60)}h</div>
          <div className="stat-label">Total Study Time</div>
        </motion.div>
      </div>

      {/* Charts */}
      <div className="grid lg:grid-cols-2 gap-8">
        {/* Weekly Activity */}
        <div className="card p-6">
          <h3 className="text-lg font-bold text-white mb-4 flex items-center gap-2">
            <TrendingUp className="w-5 h-5 text-indigo-400" />
            Weekly Activity
          </h3>
          <ResponsiveContainer width="100%" height={200}>
            <BarChart data={weeklyData}>
              <CartesianGrid strokeDasharray="3 3" stroke="#333" />
              <XAxis dataKey="day" stroke="#666" />
              <YAxis stroke="#666" />
              <Tooltip
                contentStyle={{ backgroundColor: '#1a1a2e', border: '1px solid #333' }}
              />
              <Bar dataKey="reviews" fill="#6366f1" radius={[4, 4, 0, 0]} />
            </BarChart>
          </ResponsiveContainer>
        </div>

        {/* Card States */}
        <div className="card p-6">
          <h3 className="text-lg font-bold text-white mb-4 flex items-center gap-2">
            <Target className="w-5 h-5 text-green-400" />
            Card Distribution
          </h3>
          <div className="flex items-center justify-center">
            <ResponsiveContainer width="100%" height={200}>
              <PieChart>
                <Pie
                  data={categoryData}
                  cx="50%"
                  cy="50%"
                  innerRadius={60}
                  outerRadius={80}
                  paddingAngle={5}
                  dataKey="value"
                >
                  {categoryData.map((entry, index) => (
                    <Cell key={`cell-${index}`} fill={entry.color} />
                  ))}
                </Pie>
                <Tooltip />
              </PieChart>
            </ResponsiveContainer>
          </div>
          <div className="flex justify-center gap-4 mt-4">
            {categoryData.map(item => (
              <div key={item.name} className="flex items-center gap-2">
                <div className="w-3 h-3 rounded-full" style={{ backgroundColor: item.color }} />
                <span className="text-sm text-gray-400">{item.name}: {item.value}</span>
              </div>
            ))}
          </div>
        </div>
      </div>

      {/* Accuracy Chart */}
      <div className="card p-6">
        <h3 className="text-lg font-bold text-white mb-4">Weekly Accuracy</h3>
        <ResponsiveContainer width="100%" height={200}>
          <LineChart data={weeklyData}>
            <CartesianGrid strokeDasharray="3 3" stroke="#333" />
            <XAxis dataKey="day" stroke="#666" />
            <YAxis stroke="#666" domain={[0, 100]} />
            <Tooltip
              contentStyle={{ backgroundColor: '#1a1a2e', border: '1px solid #333' }}
            />
            <Line
              type="monotone"
              dataKey="accuracy"
              stroke="#10b981"
              strokeWidth={2}
              dot={{ fill: '#10b981' }}
            />
          </LineChart>
        </ResponsiveContainer>
      </div>
    </div>
  );
}
```

---

# TEACHER DASHBOARD

```tsx
// app/dashboard/admin/page.tsx (Teacher Dashboard)
'use client';
import { useEffect, useState } from 'react';
import { createClient } from '@/lib/supabase/client';
import { useAuth } from '@/hooks/useAuth';
import { Users, BookOpen, TrendingUp, Plus, Mail } from 'lucide-react';

interface Student {
  id: string;
  full_name: string;
  email: string;
  current_streak: number;
  words_learned: number;
  last_study_date: string;
}

export default function TeacherDashboard() {
  const { user } = useAuth();
  const [students, setStudents] = useState<Student[]>([]);
  const [classCode, setClassCode] = useState('');
  const supabase = createClient();

  useEffect(() => {
    async function loadStudents() {
      // Get teacher's classes
      const { data: classes } = await supabase
        .from('classes')
        .select('id, access_code')
        .eq('teacher_id', user?.id);

      if (classes && classes.length > 0) {
        setClassCode(classes[0].access_code);
        
        // Get enrolled students
        const { data: enrollments } = await supabase
          .from('class_enrollments')
          .select('student_id')
          .eq('class_id', classes[0].id)
          .eq('status', 'active');

        if (enrollments) {
          const studentIds = enrollments.map(e => e.student_id);
          
          const { data: studentProfiles } = await supabase
            .from('profiles')
            .select('id, full_name, email')
            .in('id', studentIds);

          const { data: progress } = await supabase
            .from('user_progress')
            .select('*')
            .in('user_id', studentIds);

          const studentsWithProgress = studentProfiles?.map(profile => {
            const prog = progress?.find(p => p.user_id === profile.id);
            return {
              ...profile,
              current_streak: prog?.current_streak || 0,
              words_learned: prog?.words_learned || 0,
              last_study_date: prog?.last_study_date || 'Never'
            };
          }) || [];

          setStudents(studentsWithProgress);
        }
      }
    }

    if (user) loadStudents();
  }, [user, supabase]);

  return (
    <div className="space-y-8">
      <div className="flex items-center justify-between">
        <h1 className="text-3xl font-bold text-white">Teacher Dashboard</h1>
        <button className="btn-primary flex items-center gap-2">
          <Plus className="w-5 h-5" />
          Create Assignment
        </button>
      </div>

      {/* Class Code */}
      <div className="card p-6 bg-gradient-to-r from-indigo-500/10 to-purple-500/10 border-indigo-500/30">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-400">Class Access Code</p>
            <p className="text-3xl font-bold text-white font-mono">{classCode || 'No class yet'}</p>
          </div>
          <button className="btn-secondary">Share with Students</button>
        </div>
      </div>

      {/* Stats */}
      <div className="grid grid-cols-3 gap-4">
        <div className="stat-card">
          <Users className="w-8 h-8 text-indigo-400 mb-2" />
          <div className="stat-value">{students.length}</div>
          <div className="stat-label">Active Students</div>
        </div>
        <div className="stat-card">
          <BookOpen className="w-8 h-8 text-green-400 mb-2" />
          <div className="stat-value">
            {Math.round(students.reduce((sum, s) => sum + s.words_learned, 0) / students.length) || 0}
          </div>
          <div className="stat-label">Avg Words Learned</div>
        </div>
        <div className="stat-card">
          <TrendingUp className="w-8 h-8 text-orange-400 mb-2" />
          <div className="stat-value">
            {Math.round(students.reduce((sum, s) => sum + s.current_streak, 0) / students.length) || 0}
          </div>
          <div className="stat-label">Avg Streak</div>
        </div>
      </div>

      {/* Students Table */}
      <div className="card overflow-hidden">
        <div className="p-6 border-b border-white/10">
          <h2 className="text-xl font-bold text-white">Students</h2>
        </div>
        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-white/5">
              <tr>
                <th className="px-6 py-3 text-left text-sm font-medium text-gray-400">Student</th>
                <th className="px-6 py-3 text-left text-sm font-medium text-gray-400">Words Learned</th>
                <th className="px-6 py-3 text-left text-sm font-medium text-gray-400">Streak</th>
                <th className="px-6 py-3 text-left text-sm font-medium text-gray-400">Last Active</th>
                <th className="px-6 py-3 text-left text-sm font-medium text-gray-400">Actions</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-white/5">
              {students.map(student => (
                <tr key={student.id} className="hover:bg-white/5">
                  <td className="px-6 py-4">
                    <div>
                      <p className="font-medium text-white">{student.full_name}</p>
                      <p className="text-sm text-gray-500">{student.email}</p>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <span className="text-green-400 font-bold">{student.words_learned}</span>
                  </td>
                  <td className="px-6 py-4">
                    <span className="text-orange-400 font-bold">ğŸ”¥ {student.current_streak}</span>
                  </td>
                  <td className="px-6 py-4 text-gray-400">
                    {student.last_study_date === 'Never' 
                      ? 'Never' 
                      : new Date(student.last_study_date).toLocaleDateString()}
                  </td>
                  <td className="px-6 py-4">
                    <button className="btn-ghost p-2">
                      <Mail className="w-4 h-4" />
                    </button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  );
}
```

---

# HOMEWORK SYSTEM

```typescript
// Database additions for homework
/*
CREATE TABLE public.assignments (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  teacher_id UUID REFERENCES public.profiles(id) NOT NULL,
  class_id UUID REFERENCES public.classes(id),
  title TEXT NOT NULL,
  description TEXT,
  word_ids TEXT[], -- Array of word IDs to practice
  due_date TIMESTAMPTZ NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE public.assignment_submissions (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  assignment_id UUID REFERENCES public.assignments(id) NOT NULL,
  student_id UUID REFERENCES public.profiles(id) NOT NULL,
  score INTEGER,
  max_score INTEGER,
  time_spent_minutes INTEGER,
  completed_at TIMESTAMPTZ DEFAULT NOW(),
  feedback TEXT,
  UNIQUE(assignment_id, student_id)
);
*/
```

```tsx
// components/AssignmentCard.tsx
'use client';
import { Clock, BookOpen, CheckCircle } from 'lucide-react';

interface AssignmentCardProps {
  title: string;
  description: string;
  wordCount: number;
  dueDate: string;
  isCompleted?: boolean;
  score?: number;
  maxScore?: number;
  onStart: () => void;
}

export function AssignmentCard({
  title,
  description,
  wordCount,
  dueDate,
  isCompleted,
  score,
  maxScore,
  onStart
}: AssignmentCardProps) {
  const dueInDays = Math.ceil((new Date(dueDate).getTime() - Date.now()) / (1000 * 60 * 60 * 24));
  const isOverdue = dueInDays < 0;

  return (
    <div className={`card p-6 ${isCompleted ? 'border-green-500/30' : isOverdue ? 'border-red-500/30' : ''}`}>
      <div className="flex items-start justify-between mb-4">
        <div>
          <h3 className="text-lg font-bold text-white">{title}</h3>
          <p className="text-sm text-gray-400 mt-1">{description}</p>
        </div>
        {isCompleted && (
          <div className="p-2 bg-green-500/20 rounded-full">
            <CheckCircle className="w-5 h-5 text-green-400" />
          </div>
        )}
      </div>

      <div className="flex items-center gap-4 mb-4">
        <div className="flex items-center gap-2 text-sm text-gray-400">
          <BookOpen className="w-4 h-4" />
          <span>{wordCount} words</span>
        </div>
        <div className={`flex items-center gap-2 text-sm ${isOverdue ? 'text-red-400' : 'text-gray-400'}`}>
          <Clock className="w-4 h-4" />
          <span>
            {isOverdue 
              ? `${Math.abs(dueInDays)} days overdue`
              : dueInDays === 0 
                ? 'Due today'
                : `Due in ${dueInDays} days`}
          </span>
        </div>
      </div>

      {isCompleted ? (
        <div className="flex items-center justify-between">
          <span className="text-green-400 font-bold">
            Score: {score}/{maxScore} ({Math.round((score! / maxScore!) * 100)}%)
          </span>
          <button className="btn-ghost text-sm">Review</button>
        </div>
      ) : (
        <button onClick={onStart} className="btn-primary w-full">
          Start Assignment
        </button>
      )}
    </div>
  );
}
```

---

# ACHIEVEMENT SYSTEM

```typescript
// lib/achievements.ts
export const achievementDefinitions = [
  // Streak achievements
  { id: 'streak_7', name: '7 Day Streak', icon: 'ğŸ”¥', xp: 100, type: 'streak', value: 7, tier: 'bronze' },
  { id: 'streak_30', name: '30 Day Streak', icon: 'ğŸ”¥', xp: 500, type: 'streak', value: 30, tier: 'silver' },
  { id: 'streak_100', name: '100 Day Streak', icon: 'ğŸ”¥', xp: 2000, type: 'streak', value: 100, tier: 'gold' },
  { id: 'streak_365', name: 'Year Streak', icon: 'ğŸ”¥', xp: 10000, type: 'streak', value: 365, tier: 'platinum' },
  
  // Words achievements
  { id: 'words_10', name: 'First 10 Words', icon: 'ğŸ“š', xp: 50, type: 'words', value: 10, tier: 'bronze' },
  { id: 'words_50', name: '50 Words', icon: 'ğŸ“š', xp: 200, type: 'words', value: 50, tier: 'bronze' },
  { id: 'words_100', name: '100 Words', icon: 'ğŸ“š', xp: 500, type: 'words', value: 100, tier: 'silver' },
  { id: 'words_500', name: '500 Words', icon: 'ğŸ“š', xp: 2000, type: 'words', value: 500, tier: 'gold' },
  
  // Letter achievements
  { id: 'letters_complete', name: 'Alef-Bet Master', icon: 'ğŸ“', xp: 1000, type: 'letters', value: 22, tier: 'gold' },
  
  // Session achievements
  { id: 'perfect_10', name: 'Perfect 10', icon: 'â­', xp: 100, type: 'perfect', value: 10, tier: 'silver' },
  { id: 'perfect_50', name: 'Perfect 50', icon: 'â­', xp: 500, type: 'perfect', value: 50, tier: 'gold' },
  
  // XP achievements
  { id: 'xp_1000', name: '1K XP', icon: 'ğŸ’', xp: 100, type: 'xp', value: 1000, tier: 'bronze' },
  { id: 'xp_10000', name: '10K XP', icon: 'ğŸ’', xp: 500, type: 'xp', value: 10000, tier: 'silver' },
  { id: 'xp_100000', name: '100K XP', icon: 'ğŸ’', xp: 2000, type: 'xp', value: 100000, tier: 'gold' },
];

export async function checkAndAwardAchievements(supabase: any, userId: string, stats: any) {
  const { data: existing } = await supabase
    .from('user_achievements')
    .select('achievement_id')
    .eq('user_id', userId);

  const earnedIds = new Set(existing?.map((a: any) => a.achievement_id) || []);
  const newAchievements: string[] = [];

  for (const achievement of achievementDefinitions) {
    if (earnedIds.has(achievement.id)) continue;

    let earned = false;
    switch (achievement.type) {
      case 'streak':
        earned = stats.current_streak >= achievement.value;
        break;
      case 'words':
        earned = stats.words_learned >= achievement.value;
        break;
      case 'letters':
        earned = stats.letters_mastered >= achievement.value;
        break;
      case 'xp':
        earned = stats.total_xp >= achievement.value;
        break;
    }

    if (earned) {
      await supabase.from('user_achievements').insert({
        user_id: userId,
        achievement_id: achievement.id
      });
      
      // Add XP reward
      await supabase
        .from('user_progress')
        .update({ total_xp: stats.total_xp + achievement.xp })
        .eq('user_id', userId);
      
      newAchievements.push(achievement.id);
    }
  }

  return newAchievements;
}
```

---

# TTS AUDIO

```typescript
// lib/tts.ts
// Option 1: Web Speech API (free, works in browser)
export function speakHebrew(text: string) {
  if (typeof window === 'undefined') return;
  
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'he-IL';
  utterance.rate = 0.8; // Slower for learning
  
  window.speechSynthesis.speak(utterance);
}

// Option 2: ElevenLabs API (premium quality)
export async function speakHebrewPremium(text: string): Promise<string> {
  const response = await fetch('https://api.elevenlabs.io/v1/text-to-speech/YOUR_VOICE_ID', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'xi-api-key': process.env.ELEVENLABS_API_KEY!
    },
    body: JSON.stringify({
      text,
      model_id: 'eleven_multilingual_v2',
      voice_settings: {
        stability: 0.75,
        similarity_boost: 0.75
      }
    })
  });

  const audioBlob = await response.blob();
  return URL.createObjectURL(audioBlob);
}

// Option 3: Google Cloud TTS
export async function speakHebrewGoogle(text: string): Promise<string> {
  const response = await fetch('/api/tts', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ text, language: 'he-IL' })
  });

  const { audioContent } = await response.json();
  return `data:audio/mp3;base64,${audioContent}`;
}
```

```tsx
// components/AudioButton.tsx
'use client';
import { useState } from 'react';
import { Volume2, Loader2 } from 'lucide-react';
import { speakHebrew } from '@/lib/tts';

interface AudioButtonProps {
  text: string;
  className?: string;
}

export function AudioButton({ text, className = '' }: AudioButtonProps) {
  const [playing, setPlaying] = useState(false);

  const handlePlay = () => {
    setPlaying(true);
    speakHebrew(text);
    setTimeout(() => setPlaying(false), 2000);
  };

  return (
    <button
      onClick={handlePlay}
      disabled={playing}
      className={`p-3 rounded-full bg-white/10 hover:bg-white/20 transition ${className}`}
    >
      {playing ? (
        <Loader2 className="w-5 h-5 animate-spin" />
      ) : (
        <Volume2 className="w-5 h-5" />
      )}
    </button>
  );
}
```

---

# STRIPE PAYMENTS

```typescript
// app/api/stripe/create-checkout/route.ts
import { NextResponse } from 'next/server';
import Stripe from 'stripe';
import { createServerSupabaseClient } from '@/lib/supabase/server';

const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {
  apiVersion: '2023-10-16'
});

export async function POST(request: Request) {
  const { priceId, userId } = await request.json();
  const supabase = createServerSupabaseClient();

  // Get or create Stripe customer
  const { data: profile } = await supabase
    .from('profiles')
    .select('stripe_customer_id, email')
    .eq('id', userId)
    .single();

  let customerId = profile?.stripe_customer_id;

  if (!customerId) {
    const customer = await stripe.customers.create({
      email: profile?.email,
      metadata: { userId }
    });
    customerId = customer.id;
    
    await supabase
      .from('profiles')
      .update({ stripe_customer_id: customerId })
      .eq('id', userId);
  }

  // Create checkout session
  const session = await stripe.checkout.sessions.create({
    customer: customerId,
    line_items: [{ price: priceId, quantity: 1 }],
    mode: 'subscription',
    success_url: `${process.env.NEXT_PUBLIC_URL}/dashboard?success=true`,
    cancel_url: `${process.env.NEXT_PUBLIC_URL}/pricing?canceled=true`,
    subscription_data: {
      trial_period_days: 7,
      metadata: { userId }
    }
  });

  return NextResponse.json({ url: session.url });
}
```

```typescript
// app/api/stripe/webhook/route.ts
import { NextResponse } from 'next/server';
import Stripe from 'stripe';
import { createClient } from '@supabase/supabase-js';

const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {
  apiVersion: '2023-10-16'
});

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_KEY!
);

export async function POST(request: Request) {
  const body = await request.text();
  const signature = request.headers.get('stripe-signature')!;

  let event: Stripe.Event;

  try {
    event = stripe.webhooks.constructEvent(
      body,
      signature,
      process.env.STRIPE_WEBHOOK_SECRET!
    );
  } catch (err) {
    return NextResponse.json({ error: 'Webhook signature verification failed' }, { status: 400 });
  }

  switch (event.type) {
    case 'customer.subscription.created':
    case 'customer.subscription.updated': {
      const subscription = event.data.object as Stripe.Subscription;
      const userId = subscription.metadata.userId;
      
      await supabase
        .from('profiles')
        .update({
          subscription_tier: 'premium',
          subscription_status: subscription.status
        })
        .eq('id', userId);
      break;
    }

    case 'customer.subscription.deleted': {
      const subscription = event.data.object as Stripe.Subscription;
      const userId = subscription.metadata.userId;
      
      await supabase
        .from('profiles')
        .update({
          subscription_tier: 'free',
          subscription_status: 'canceled'
        })
        .eq('id', userId);
      break;
    }
  }

  return NextResponse.json({ received: true });
}
```

```tsx
// components/PricingCard.tsx
'use client';
import { useState } from 'react';
import { Check, Loader2 } from 'lucide-react';

interface PricingCardProps {
  name: string;
  price: number;
  period: string;
  features: string[];
  priceId: string;
  userId: string;
  popular?: boolean;
}

export function PricingCard({ name, price, period, features, priceId, userId, popular }: PricingCardProps) {
  const [loading, setLoading] = useState(false);

  const handleSubscribe = async () => {
    setLoading(true);
    try {
      const response = await fetch('/api/stripe/create-checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ priceId, userId })
      });
      
      const { url } = await response.json();
      window.location.href = url;
    } catch (error) {
      console.error('Checkout error:', error);
      setLoading(false);
    }
  };

  return (
    <div className={`card p-8 ${popular ? 'border-indigo-500/50 bg-indigo-500/5' : ''}`}>
      {popular && (
        <span className="inline-block px-3 py-1 bg-indigo-500 text-white text-xs font-bold rounded-full mb-4">
          MOST POPULAR
        </span>
      )}
      <h3 className="text-2xl font-bold text-white">{name}</h3>
      <div className="flex items-baseline gap-1 mt-4 mb-6">
        <span className="text-4xl font-bold text-white">â‚¬{price}</span>
        <span className="text-gray-400">/{period}</span>
      </div>
      <ul className="space-y-3 mb-8">
        {features.map(feature => (
          <li key={feature} className="flex items-center gap-3 text-gray-300">
            <Check className="w-5 h-5 text-green-400" />
            {feature}
          </li>
        ))}
      </ul>
      <button
        onClick={handleSubscribe}
        disabled={loading}
        className={`w-full py-3 rounded-xl font-semibold ${
          popular 
            ? 'btn-primary' 
            : 'bg-white/10 hover:bg-white/20 transition'
        }`}
      >
        {loading ? <Loader2 className="w-5 h-5 animate-spin mx-auto" /> : 'Start Free Trial'}
      </button>
    </div>
  );
}
```

---

# PWA CONFIG

```json
// public/manifest.json
{
  "name": "Hebrew Master",
  "short_name": "Hebrew",
  "description": "Learn Hebrew with spaced repetition",
  "start_url": "/dashboard",
  "display": "standalone",
  "background_color": "#0a0a0f",
  "theme_color": "#6366f1",
  "icons": [
    {
      "src": "/icons/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icons/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

```typescript
// next.config.js (with next-pwa)
const withPWA = require('next-pwa')({
  dest: 'public',
  disable: process.env.NODE_ENV === 'development',
  register: true,
  skipWaiting: true
});

module.exports = withPWA({
  // your next config
});
```

```tsx
// app/layout.tsx - Add to head
<link rel="manifest" href="/manifest.json" />
<meta name="theme-color" content="#6366f1" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="apple-touch-icon" href="/icons/icon-192.png" />
```

---

# CERTIFICATES

```tsx
// components/Certificate.tsx
'use client';
import { useRef } from 'react';

interface CertificateProps {
  studentName: string;
  courseName: string;
  completionDate: string;
  certificateId: string;
}

export function Certificate({ studentName, courseName, completionDate, certificateId }: CertificateProps) {
  const certificateRef = useRef<HTMLDivElement>(null);

  const downloadCertificate = async () => {
    // Use html2canvas to convert to image
    const html2canvas = (await import('html2canvas')).default;
    const canvas = await html2canvas(certificateRef.current!);
    const link = document.createElement('a');
    link.download = `hebrew-master-certificate-${certificateId}.png`;
    link.href = canvas.toDataURL();
    link.click();
  };

  return (
    <div>
      <div
        ref={certificateRef}
        className="w-[800px] h-[600px] bg-gradient-to-br from-indigo-900 to-purple-900 p-12 relative"
      >
        {/* Border */}
        <div className="absolute inset-4 border-4 border-yellow-400/30 rounded-lg" />
        
        {/* Content */}
        <div className="relative z-10 h-full flex flex-col items-center justify-center text-center">
          {/* Logo */}
          <div className="w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center text-4xl font-bold text-white mb-6">
            ×¢
          </div>
          
          <p className="text-yellow-400 text-lg tracking-widest mb-2">CERTIFICATE OF COMPLETION</p>
          
          <h1 className="text-4xl font-bold text-white mb-8">Hebrew Master</h1>
          
          <p className="text-gray-300 text-lg mb-2">This is to certify that</p>
          
          <p className="text-3xl font-bold text-white mb-6" style={{ fontFamily: 'serif' }}>
            {studentName}
          </p>
          
          <p className="text-gray-300 mb-8">
            has successfully completed the course
          </p>
          
          <p className="text-2xl font-bold text-indigo-300 mb-8">
            {courseName}
          </p>
          
          <p className="text-gray-400 text-sm">
            Completed on {new Date(completionDate).toLocaleDateString('en-US', { 
              year: 'numeric', 
              month: 'long', 
              day: 'numeric' 
            })}
          </p>
          
          <p className="text-gray-500 text-xs mt-4">
            Certificate ID: {certificateId}
          </p>
        </div>
      </div>
      
      <button onClick={downloadCertificate} className="btn-primary mt-4">
        Download Certificate
      </button>
    </div>
  );
}
```

---

# ENV VARIABLES NEEDED

```env
# .env.local

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-key

# Stripe
STRIPE_SECRET_KEY=sk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_...

# Stripe Price IDs
STRIPE_PRICE_MONTHLY=price_...
STRIPE_PRICE_ANNUAL=price_...

# TTS (optional)
ELEVENLABS_API_KEY=your-key
GOOGLE_CLOUD_TTS_KEY=your-key

# App
NEXT_PUBLIC_URL=https://your-domain.com
```

---

# SUMMARY - What's In This File

âœ… **Auth System** - Login, Signup, useAuth hook
âœ… **Study Session** - Full FSRS integration with useStudySession hook  
âœ… **Flashcard Component** - Animated, with rating buttons
âœ… **Progress Dashboard** - Charts, stats, visualizations
âœ… **Teacher Dashboard** - Student management, class codes
âœ… **Homework System** - Assignments, submissions
âœ… **Achievement System** - 15 achievements with auto-award
âœ… **TTS Audio** - 3 options (Web Speech, ElevenLabs, Google)
âœ… **Stripe Payments** - Checkout, webhook, subscription management
âœ… **PWA Config** - manifest.json, next-pwa setup
âœ… **Certificates** - Downloadable completion certificates

Combined with PART 1, you now have everything needed for a â‚¬200/month premium platform!
</file>

<file path="HEBREW_PREMIUM_UPGRADE.md">
# Hebrew Master Premium - Complete Upgrade Package
## For Integration with Existing Cursor Project

---

# ğŸ“‹ TABLE OF CONTENTS

1. [Type Definitions](#types)
2. [FSRS Algorithm](#fsrs)
3. [Complete Hebrew Alphabet Data](#alphabet)
4. [Complete Nikud (Vowels) Data](#nikud)
5. [Hebrew Roots (Shorashim)](#roots)
6. [Vocabulary by Category](#vocabulary)
7. [Component Examples](#components)
8. [Database Schema (Supabase)](#database)
9. [Integration Instructions](#integration)

---

# TYPES

```typescript
// types/index.ts

// User & Authentication
export interface User {
  id: string;
  email: string;
  full_name: string;
  avatar_url?: string;
  role: 'student' | 'teacher' | 'admin';
  subscription_tier: 'free' | 'premium' | 'enterprise';
  subscription_status: 'active' | 'canceled' | 'past_due' | 'trialing';
  current_level: string;
  preferred_language: 'en' | 'fr' | 'he';
  created_at: string;
  last_seen_at: string;
}

export interface UserProgress {
  user_id: string;
  total_xp: number;
  current_streak: number;
  longest_streak: number;
  words_learned: number;
  letters_mastered: number;
  lessons_completed: number;
  total_study_time_minutes: number;
  last_study_date: string;
}

// Hebrew Content
export interface HebrewLetter {
  id: string;
  letter: string;
  name_hebrew: string;
  name_english: string;
  name_french: string;
  transliteration: string;
  sound_description_en: string;
  sound_description_fr: string;
  sound_description_he: string;
  gematria_value: number;
  final_form?: string;
  variant?: {
    letter: string;
    name: string;
    sound: string;
  };
  audio_url?: string;
  mnemonics: {
    en: string;
    fr: string;
    he: string;
  };
  order: number;
}

export interface Nikud {
  id: string;
  symbol: string;
  display_with_alef: string;
  name_hebrew: string;
  name_english: string;
  sound_description: string;
  category: 'a' | 'e' | 'i' | 'o' | 'u' | 'reduced';
  audio_url?: string;
  order: number;
}

export interface Root {
  id: string;
  letters: string;
  core_meaning_en: string;
  core_meaning_fr: string;
  core_meaning_he: string;
  examples: string[];
}

export interface VocabularyWord {
  id: string;
  hebrew: string;
  hebrew_with_nikud: string;
  transliteration: string;
  meaning_en: string;
  meaning_fr: string;
  meaning_he: string;
  part_of_speech: 'noun' | 'verb' | 'adjective' | 'adverb' | 'preposition' | 'pronoun' | 'other';
  gender?: 'masculine' | 'feminine' | 'both';
  plural_form?: string;
  root_id?: string;
  category: string;
  difficulty_level: 1 | 2 | 3 | 4 | 5;
  audio_url?: string;
  example_sentence?: {
    hebrew: string;
    transliteration: string;
    translation_en: string;
    translation_fr: string;
  };
}

// FSRS Card
export interface FSRSCard {
  id: string;
  user_id: string;
  item_type: 'letter' | 'nikud' | 'word';
  item_id: string;
  due: string;
  stability: number;
  difficulty: number;
  elapsed_days: number;
  scheduled_days: number;
  reps: number;
  lapses: number;
  state: 'new' | 'learning' | 'review' | 'relearning';
  last_review?: string;
  created_at: string;
}

export interface ReviewLog {
  id: string;
  card_id: string;
  user_id: string;
  rating: 1 | 2 | 3 | 4;
  state: FSRSCard['state'];
  due: string;
  stability: number;
  difficulty: number;
  elapsed_days: number;
  last_elapsed_days: number;
  scheduled_days: number;
  review_time_ms: number;
  reviewed_at: string;
}
```

---

# FSRS Algorithm

```typescript
// lib/fsrs.ts - Complete FSRS Implementation

const FSRS_PARAMS = {
  w: [0.4, 0.6, 2.4, 5.8, 4.93, 0.94, 0.86, 0.01, 1.49, 0.14, 0.94, 2.18, 0.05, 0.34, 1.26, 0.29, 2.61],
  requestRetention: 0.9,
  maximumInterval: 36500,
  easyBonus: 1.3,
  hardFactor: 1.2,
};

export enum Rating {
  Again = 1,
  Hard = 2,
  Good = 3,
  Easy = 4,
}

export enum State {
  New = 'new',
  Learning = 'learning',
  Review = 'review',
  Relearning = 'relearning',
}

export function createCard() {
  return {
    due: new Date().toISOString(),
    stability: 0,
    difficulty: 0,
    elapsed_days: 0,
    scheduled_days: 0,
    reps: 0,
    lapses: 0,
    state: State.New,
    last_review: undefined,
  };
}

function initStability(rating: Rating): number {
  return Math.max(FSRS_PARAMS.w[rating - 1], 0.1);
}

function initDifficulty(rating: Rating): number {
  return Math.min(Math.max(FSRS_PARAMS.w[4] - FSRS_PARAMS.w[5] * (rating - 3), 1), 10);
}

function nextDifficulty(d: number, rating: Rating): number {
  const nextD = d - FSRS_PARAMS.w[6] * (rating - 3);
  return Math.min(Math.max(meanReversion(FSRS_PARAMS.w[4], nextD), 1), 10);
}

function meanReversion(init: number, current: number): number {
  return FSRS_PARAMS.w[7] * init + (1 - FSRS_PARAMS.w[7]) * current;
}

function nextRecallStability(d: number, s: number, r: number, rating: Rating): number {
  const hardPenalty = rating === Rating.Hard ? FSRS_PARAMS.w[15] : 1;
  const easyBonus = rating === Rating.Easy ? FSRS_PARAMS.w[16] : 1;
  return s * (1 + Math.exp(FSRS_PARAMS.w[8]) * (11 - d) * Math.pow(s, -FSRS_PARAMS.w[9]) * (Math.exp((1 - r) * FSRS_PARAMS.w[10]) - 1) * hardPenalty * easyBonus);
}

function nextForgetStability(d: number, s: number, r: number): number {
  return FSRS_PARAMS.w[11] * Math.pow(d, -FSRS_PARAMS.w[12]) * (Math.pow(s + 1, FSRS_PARAMS.w[13]) - 1) * Math.exp((1 - r) * FSRS_PARAMS.w[14]);
}

function retrievability(elapsedDays: number, stability: number): number {
  if (stability <= 0) return 0;
  return Math.pow(1 + elapsedDays / (9 * stability), -1);
}

function nextInterval(stability: number): number {
  const interval = Math.round(stability * 9 * (1 / FSRS_PARAMS.requestRetention - 1));
  return Math.min(Math.max(interval, 1), FSRS_PARAMS.maximumInterval);
}

export function schedule(card: any, rating: Rating, now: Date = new Date()) {
  const elapsedDays = card.last_review
    ? Math.max(0, (now.getTime() - new Date(card.last_review).getTime()) / (1000 * 60 * 60 * 24))
    : 0;

  const updatedCard = { ...card, reps: card.reps + 1, elapsed_days: elapsedDays, last_review: now.toISOString() };

  if (card.state === State.New) {
    updatedCard.difficulty = initDifficulty(rating);
    updatedCard.stability = initStability(rating);

    if (rating === Rating.Again) {
      updatedCard.state = State.Learning;
      updatedCard.scheduled_days = 0;
      updatedCard.due = now.toISOString();
    } else if (rating === Rating.Hard) {
      updatedCard.state = State.Learning;
      updatedCard.due = new Date(now.getTime() + 5 * 60 * 1000).toISOString();
    } else if (rating === Rating.Good) {
      updatedCard.state = State.Learning;
      updatedCard.due = new Date(now.getTime() + 10 * 60 * 1000).toISOString();
    } else {
      updatedCard.state = State.Review;
      const interval = nextInterval(updatedCard.stability);
      updatedCard.scheduled_days = interval;
      updatedCard.due = new Date(now.getTime() + interval * 24 * 60 * 60 * 1000).toISOString();
    }
  } else if (card.state === State.Learning || card.state === State.Relearning) {
    if (rating === Rating.Again) {
      updatedCard.due = now.toISOString();
    } else if (rating === Rating.Hard) {
      updatedCard.due = new Date(now.getTime() + 5 * 60 * 1000).toISOString();
    } else if (rating === Rating.Good) {
      updatedCard.state = State.Review;
      const interval = nextInterval(updatedCard.stability);
      updatedCard.scheduled_days = interval;
      updatedCard.due = new Date(now.getTime() + interval * 24 * 60 * 60 * 1000).toISOString();
    } else {
      updatedCard.state = State.Review;
      updatedCard.stability = updatedCard.stability * FSRS_PARAMS.easyBonus;
      const interval = nextInterval(updatedCard.stability);
      updatedCard.scheduled_days = interval;
      updatedCard.due = new Date(now.getTime() + interval * 24 * 60 * 60 * 1000).toISOString();
    }
  } else {
    const r = retrievability(elapsedDays, card.stability);
    if (rating === Rating.Again) {
      updatedCard.state = State.Relearning;
      updatedCard.lapses = card.lapses + 1;
      updatedCard.stability = nextForgetStability(card.difficulty, card.stability, r);
      updatedCard.difficulty = nextDifficulty(card.difficulty, rating);
      updatedCard.due = now.toISOString();
    } else {
      updatedCard.difficulty = nextDifficulty(card.difficulty, rating);
      updatedCard.stability = nextRecallStability(card.difficulty, card.stability, r, rating);
      const interval = nextInterval(updatedCard.stability);
      updatedCard.scheduled_days = interval;
      updatedCard.due = new Date(now.getTime() + interval * 24 * 60 * 60 * 1000).toISOString();
    }
  }

  return { card: updatedCard };
}

export function formatInterval(days: number): string {
  if (days < 1) {
    const minutes = Math.round(days * 24 * 60);
    if (minutes < 60) return `${minutes}m`;
    return `${Math.round(minutes / 60)}h`;
  }
  if (days === 1) return '1 day';
  if (days < 7) return `${Math.round(days)} days`;
  if (days < 30) return `${Math.round(days / 7)} weeks`;
  if (days < 365) return `${Math.round(days / 30)} months`;
  return `${(days / 365).toFixed(1)} years`;
}

export function previewIntervals(card: any) {
  const now = new Date();
  return {
    [Rating.Again]: '< 1m',
    [Rating.Hard]: formatInterval(schedule({ ...card }, Rating.Hard, now).card.scheduled_days || 0),
    [Rating.Good]: formatInterval(schedule({ ...card }, Rating.Good, now).card.scheduled_days || 0),
    [Rating.Easy]: formatInterval(schedule({ ...card }, Rating.Easy, now).card.scheduled_days || 0),
  };
}
```

---

# Complete Hebrew Alphabet Data

```typescript
// lib/data/alphabet.ts

export const hebrewAlphabet = [
  {
    id: 'alef',
    letter: '×',
    name_hebrew: '×Ö¸×œÖ¶×£',
    name_english: 'Alef',
    name_french: 'Aleph',
    transliteration: 'Ê¾',
    sound_description_en: 'Silent letter or glottal stop (like the pause in "uh-oh")',
    sound_description_fr: 'Lettre muette ou coup de glotte',
    sound_description_he: '××•×ª ×©×§×˜×” ××• ×¢×¦×™×¨×” ×’×¨×•× ×™×ª',
    gematria_value: 1,
    mnemonics: {
      en: 'A for Alef - the silent leader, first letter',
      fr: 'A pour Aleph - le leader silencieux',
      he: '××³ ×œ×Ö¸×œÖ¶×£ - ×”×× ×”×™×’ ×”×©×§×˜'
    },
    order: 1
  },
  {
    id: 'bet',
    letter: '×‘Ö¼',
    name_hebrew: '×‘ÖµÖ¼×™×ª',
    name_english: 'Bet',
    name_french: 'Beth',
    transliteration: 'b',
    sound_description_en: 'B as in "boy" (with dagesh)',
    sound_description_fr: 'B comme dans "bon" (avec dagesh)',
    sound_description_he: '×‘ ×›××• ×‘"×‘×™×ª" (×¢× ×“×’×©)',
    gematria_value: 2,
    variant: { letter: '×‘', name: 'Vet', sound: 'V as in "very"' },
    mnemonics: {
      en: 'Bet looks like a house (bayit) with an opening',
      fr: 'Beth ressemble Ã  une maison (bayit)',
      he: '×‘ÖµÖ¼×™×ª × ×¨××” ×›××• ×‘×™×ª ×¢× ×¤×ª×—'
    },
    order: 2
  },
  {
    id: 'gimel',
    letter: '×’',
    name_hebrew: '×’Ö´Ö¼×™×Ö¶×œ',
    name_english: 'Gimel',
    name_french: 'Guimel',
    transliteration: 'g',
    sound_description_en: 'G as in "go" (always hard)',
    sound_description_fr: 'G comme dans "gare" (toujours dur)',
    sound_description_he: '×’ ×›××• ×‘"×’××œ"',
    gematria_value: 3,
    mnemonics: {
      en: 'Gimel looks like a person walking',
      fr: 'Guimel ressemble Ã  une personne qui marche',
      he: '×’Ö´Ö¼×™×Ö¶×œ × ×¨××” ×›××• ××“× ×”×•×œ×š'
    },
    order: 3
  },
  {
    id: 'dalet',
    letter: '×“',
    name_hebrew: '×“Ö¸Ö¼×œÖ¶×ª',
    name_english: 'Dalet',
    name_french: 'Daleth',
    transliteration: 'd',
    sound_description_en: 'D as in "door"',
    sound_description_fr: 'D comme dans "porte"',
    sound_description_he: '×“ ×›××• ×‘"×“×œ×ª"',
    gematria_value: 4,
    mnemonics: {
      en: 'Dalet means "door" - has a corner like a doorframe',
      fr: 'Daleth signifie "porte"',
      he: '×“Ö¸Ö¼×œÖ¶×ª ×¤×™×¨×•×©×” ×“×œ×ª'
    },
    order: 4
  },
  {
    id: 'hey',
    letter: '×”',
    name_hebrew: '×”Öµ×',
    name_english: 'Hey',
    name_french: 'HÃ©',
    transliteration: 'h',
    sound_description_en: 'H as in "hello" (often silent at word end)',
    sound_description_fr: 'H aspirÃ© comme dans "hello"',
    sound_description_he: '×” ×›××• ×‘"×”×œ×•"',
    gematria_value: 5,
    mnemonics: {
      en: 'Hey looks like a window - "Hey, look!"',
      fr: 'HÃ© ressemble Ã  une fenÃªtre',
      he: '×”Öµ× × ×¨××” ×›××• ×—×œ×•×Ÿ'
    },
    order: 5
  },
  {
    id: 'vav',
    letter: '×•',
    name_hebrew: '×•Ö¸×•',
    name_english: 'Vav',
    name_french: 'Vav',
    transliteration: 'v/o/u',
    sound_description_en: 'V as in "very", or O/U when used as vowel',
    sound_description_fr: 'V comme dans "vite", ou O/U comme voyelle',
    sound_description_he: '×• ×›×¢×™×¦×•×¨, ××• ××•/××• ×›×ª× ×•×¢×”',
    gematria_value: 6,
    mnemonics: {
      en: 'Vav is a hook/nail - connects things',
      fr: 'Vav est un crochet - connecte les choses',
      he: '×•Ö¸×• ×”×•× ××¡××¨ - ××—×‘×¨ ×“×‘×¨×™×'
    },
    order: 6
  },
  {
    id: 'zayin',
    letter: '×–',
    name_hebrew: '×–Ö·×™Ö´×Ÿ',
    name_english: 'Zayin',
    name_french: 'Zayin',
    transliteration: 'z',
    sound_description_en: 'Z as in "zebra"',
    sound_description_fr: 'Z comme dans "zÃ¨bre"',
    sound_description_he: '×– ×›××• ×‘"×–×‘×¨×”"',
    gematria_value: 7,
    mnemonics: {
      en: 'Zayin looks like a sword',
      fr: 'Zayin ressemble Ã  une Ã©pÃ©e',
      he: '×–Ö·×™Ö´×Ÿ × ×¨××” ×›××• ×—×¨×‘'
    },
    order: 7
  },
  {
    id: 'chet',
    letter: '×—',
    name_hebrew: '×—Öµ×™×ª',
    name_english: 'Chet',
    name_french: 'Heth',
    transliteration: 'ch',
    sound_description_en: 'CH as in German "Bach" (guttural)',
    sound_description_fr: 'CH guttural comme dans "Bach"',
    sound_description_he: '×— ×’×¨×•× ×™×ª',
    gematria_value: 8,
    mnemonics: {
      en: 'Chet is a fence - closed on top',
      fr: 'Heth est une clÃ´ture',
      he: '×—Öµ×™×ª ×”×™× ×’×“×¨'
    },
    order: 8
  },
  {
    id: 'tet',
    letter: '×˜',
    name_hebrew: '×˜Öµ×™×ª',
    name_english: 'Tet',
    name_french: 'Teth',
    transliteration: 't',
    sound_description_en: 'T as in "top"',
    sound_description_fr: 'T comme dans "table"',
    sound_description_he: '×˜ ×›××• ×‘"×˜×•×‘"',
    gematria_value: 9,
    mnemonics: {
      en: 'Tet looks like a snake coiled - first letter of "tov" (good)',
      fr: 'Teth ressemble Ã  un serpent enroulÃ©',
      he: '×˜Öµ×™×ª × ×¨××” ×›××• × ×—×© - ××•×ª ×¨××©×•× ×” ×‘"×˜×•×‘"'
    },
    order: 9
  },
  {
    id: 'yod',
    letter: '×™',
    name_hebrew: '×™×•Ö¹×“',
    name_english: 'Yod',
    name_french: 'Yod',
    transliteration: 'y',
    sound_description_en: 'Y as in "yes"',
    sound_description_fr: 'Y comme dans "yoga"',
    sound_description_he: '×™ ×›××• ×‘"×™×“"',
    gematria_value: 10,
    mnemonics: {
      en: 'Yod is the smallest letter - a divine spark',
      fr: 'Yod est la plus petite lettre',
      he: '×™×•Ö¹×“ ×”×™× ×”××•×ª ×”×§×˜× ×” ×‘×™×•×ª×¨'
    },
    order: 10
  },
  {
    id: 'kaf',
    letter: '×›Ö¼',
    name_hebrew: '×›Ö·Ö¼×£',
    name_english: 'Kaf',
    name_french: 'Kaph',
    transliteration: 'k',
    sound_description_en: 'K as in "king" (with dagesh)',
    sound_description_fr: 'K comme dans "kilo" (avec dagesh)',
    sound_description_he: '×› ×›××• ×‘"×›×œ×‘" (×¢× ×“×’×©)',
    gematria_value: 20,
    variant: { letter: '×›', name: 'Khaf', sound: 'CH guttural' },
    final_form: '×š',
    mnemonics: {
      en: 'Kaf means "palm" - shaped like a cupped hand',
      fr: 'Kaph signifie "paume"',
      he: '×›Ö·Ö¼×£ ×¤×™×¨×•×©×” ×›×£ ×™×“'
    },
    order: 11
  },
  {
    id: 'lamed',
    letter: '×œ',
    name_hebrew: '×œÖ¸×Ö¶×“',
    name_english: 'Lamed',
    name_french: 'Lamed',
    transliteration: 'l',
    sound_description_en: 'L as in "love"',
    sound_description_fr: 'L comme dans "lune"',
    sound_description_he: '×œ ×›××• ×‘"×œ×‘"',
    gematria_value: 30,
    mnemonics: {
      en: 'Lamed is tallest letter - reaches to heaven (learning)',
      fr: 'Lamed est la plus haute lettre',
      he: '×œÖ¸×Ö¶×“ ×”×™× ×”××•×ª ×”×’×‘×•×”×” ×‘×™×•×ª×¨'
    },
    order: 12
  },
  {
    id: 'mem',
    letter: '×',
    name_hebrew: '×Öµ×',
    name_english: 'Mem',
    name_french: 'Mem',
    transliteration: 'm',
    sound_description_en: 'M as in "mother"',
    sound_description_fr: 'M comme dans "mÃ¨re"',
    sound_description_he: '× ×›××• ×‘"×××"',
    gematria_value: 40,
    final_form: '×',
    mnemonics: {
      en: 'Mem is for mayim (water)',
      fr: 'Mem est pour mayim (eau)',
      he: '×Öµ× ×”×™× ×œ××™×'
    },
    order: 13
  },
  {
    id: 'nun',
    letter: '× ',
    name_hebrew: '× ×•Ö¼×Ÿ',
    name_english: 'Nun',
    name_french: 'Noun',
    transliteration: 'n',
    sound_description_en: 'N as in "no"',
    sound_description_fr: 'N comme dans "non"',
    sound_description_he: '×  ×›××• ×‘"× ×¨"',
    gematria_value: 50,
    final_form: '×Ÿ',
    mnemonics: {
      en: 'Nun is bent like a humble person bowing',
      fr: 'Noun est courbÃ©e comme une personne humble',
      he: '× ×•Ö¼×Ÿ ×›×¤×•×¤×” ×›××• ××“× ×¢× ×™×•'
    },
    order: 14
  },
  {
    id: 'samech',
    letter: '×¡',
    name_hebrew: '×¡Ö¸×Ö¶×š',
    name_english: 'Samech',
    name_french: 'Samekh',
    transliteration: 's',
    sound_description_en: 'S as in "sun"',
    sound_description_fr: 'S comme dans "soleil"',
    sound_description_he: '×¡ ×›××• ×‘"×¡×•×¡"',
    gematria_value: 60,
    mnemonics: {
      en: 'Samech is closed circle - support all around',
      fr: 'Samekh est un cercle fermÃ©',
      he: '×¡Ö¸×Ö¶×š ×”×™× ×¢×™×’×•×œ ×¡×’×•×¨'
    },
    order: 15
  },
  {
    id: 'ayin',
    letter: '×¢',
    name_hebrew: '×¢Ö·×™Ö´×Ÿ',
    name_english: 'Ayin',
    name_french: 'Ayin',
    transliteration: 'Ê¿',
    sound_description_en: 'Silent in modern Hebrew',
    sound_description_fr: 'Muette en hÃ©breu moderne',
    sound_description_he: '×©×§×˜×” ×‘×¢×‘×¨×™×ª ××•×“×¨× ×™×ª',
    gematria_value: 70,
    mnemonics: {
      en: 'Ayin means "eye"',
      fr: 'Ayin signifie "Å“il"',
      he: '×¢Ö·×™Ö´×Ÿ ×¤×™×¨×•×©×” ×¢×™×Ÿ'
    },
    order: 16
  },
  {
    id: 'pey',
    letter: '×¤Ö¼',
    name_hebrew: '×¤ÖµÖ¼×',
    name_english: 'Pey',
    name_french: 'PÃ©',
    transliteration: 'p',
    sound_description_en: 'P as in "pet" (with dagesh)',
    sound_description_fr: 'P comme dans "pÃ¨re" (avec dagesh)',
    sound_description_he: '×¤ ×›××• ×‘"×¤×¨×—" (×¢× ×“×’×©)',
    gematria_value: 80,
    variant: { letter: '×¤', name: 'Fey', sound: 'F as in "fun"' },
    final_form: '×£',
    mnemonics: {
      en: 'Pey means "mouth"',
      fr: 'PÃ© signifie "bouche"',
      he: '×¤ÖµÖ¼× ×¤×™×¨×•×©×” ×¤×”'
    },
    order: 17
  },
  {
    id: 'tsadi',
    letter: '×¦',
    name_hebrew: '×¦Ö¸×“Ö´×™',
    name_english: 'Tsadi',
    name_french: 'TsadÃ©',
    transliteration: 'ts',
    sound_description_en: 'TS as in "cats"',
    sound_description_fr: 'TS comme dans "tsar"',
    sound_description_he: '×¦ ×›××• ×‘"×¦×“×§"',
    gematria_value: 90,
    final_form: '×¥',
    mnemonics: {
      en: 'Tsadi - righteous (tsadik)',
      fr: 'TsadÃ© - juste (tsadik)',
      he: '×¦Ö¸×“Ö´×™ - ×¦×“×™×§'
    },
    order: 18
  },
  {
    id: 'qof',
    letter: '×§',
    name_hebrew: '×§×•Ö¹×£',
    name_english: 'Qof',
    name_french: 'Qoph',
    transliteration: 'q',
    sound_description_en: 'K sound (deeper in throat)',
    sound_description_fr: 'Son K (plus profond)',
    sound_description_he: '×§ ×›××• ×‘"×§×•×£"',
    gematria_value: 100,
    mnemonics: {
      en: 'Qof has a leg that descends below',
      fr: 'Qoph a une jambe qui descend',
      he: '×§×•Ö¹×£ ×™×© ×œ×” ×¨×’×œ ×©×™×•×¨×“×ª ×œ××˜×”'
    },
    order: 19
  },
  {
    id: 'resh',
    letter: '×¨',
    name_hebrew: '×¨Öµ×™×©×',
    name_english: 'Resh',
    name_french: 'Rech',
    transliteration: 'r',
    sound_description_en: 'Guttural R (like French R)',
    sound_description_fr: 'R guttural (comme le R franÃ§ais)',
    sound_description_he: '×¨ ×’×¨×•× ×™×ª',
    gematria_value: 200,
    mnemonics: {
      en: 'Resh means "head"',
      fr: 'Rech signifie "tÃªte"',
      he: '×¨Öµ×™×©× ×¤×™×¨×•×©×” ×¨××©'
    },
    order: 20
  },
  {
    id: 'shin',
    letter: '×©×',
    name_hebrew: '×©Ö´××™×Ÿ',
    name_english: 'Shin',
    name_french: 'Chin',
    transliteration: 'sh',
    sound_description_en: 'SH as in "shoe" (dot on right)',
    sound_description_fr: 'CH comme dans "chat" (point Ã  droite)',
    sound_description_he: '×©× ×›××• ×‘"×©×œ×•×"',
    gematria_value: 300,
    variant: { letter: '×©×‚', name: 'Sin', sound: 'S as in "sun" (dot on left)' },
    mnemonics: {
      en: 'Shin has 3 flames - like fire (esh)',
      fr: 'Chin a 3 flammes - comme le feu',
      he: '×©Ö´××™×Ÿ ×™×© ×œ×” 3 ×œ×”×‘×•×ª - ×›××• ××©'
    },
    order: 21
  },
  {
    id: 'tav',
    letter: '×ª',
    name_hebrew: '×ªÖ¸Ö¼×•',
    name_english: 'Tav',
    name_french: 'Tav',
    transliteration: 't',
    sound_description_en: 'T as in "top"',
    sound_description_fr: 'T comme dans "table"',
    sound_description_he: '×ª ×›××• ×‘"×ª×•×¨×”"',
    gematria_value: 400,
    mnemonics: {
      en: 'Tav is the last letter - completion',
      fr: 'Tav est la derniÃ¨re lettre - achÃ¨vement',
      he: '×ªÖ¸Ö¼×• ×”×™× ×”××•×ª ×”××—×¨×•× ×” - ×¡×™×•×'
    },
    order: 22
  }
];
```

---

# Complete Nikud (Vowels) Data

```typescript
// lib/data/nikud.ts

export const nikudData = [
  {
    id: 'kamatz',
    symbol: 'Ö¸',
    display_with_alef: '×Ö¸',
    name_hebrew: '×§Ö¸×Ö·×¥',
    name_english: 'Kamatz',
    sound_description: 'A as in "father" (long A)',
    category: 'a',
    order: 1
  },
  {
    id: 'patach',
    symbol: 'Ö·',
    display_with_alef: '×Ö·',
    name_hebrew: '×¤Ö·Ö¼×ªÖ¸×—',
    name_english: 'Patach',
    sound_description: 'A as in "cat" (short A)',
    category: 'a',
    order: 2
  },
  {
    id: 'chataf-patach',
    symbol: 'Ö²',
    display_with_alef: '×Ö²',
    name_hebrew: '×—Ö²×˜Ö·×£ ×¤Ö·Ö¼×ªÖ¸×—',
    name_english: 'Chataf Patach',
    sound_description: 'Very short A (reduced)',
    category: 'reduced',
    order: 3
  },
  {
    id: 'tsere',
    symbol: 'Öµ',
    display_with_alef: '×Öµ',
    name_hebrew: '×¦Öµ×™×¨Öµ×™',
    name_english: 'Tsere',
    sound_description: 'E as in "they" (long E)',
    category: 'e',
    order: 4
  },
  {
    id: 'segol',
    symbol: 'Ö¶',
    display_with_alef: '×Ö¶',
    name_hebrew: '×¡Ö¶×’×•Ö¹×œ',
    name_english: 'Segol',
    sound_description: 'E as in "bed" (short E)',
    category: 'e',
    order: 5
  },
  {
    id: 'chataf-segol',
    symbol: 'Ö±',
    display_with_alef: '×Ö±',
    name_hebrew: '×—Ö²×˜Ö·×£ ×¡Ö¶×’×•Ö¹×œ',
    name_english: 'Chataf Segol',
    sound_description: 'Very short E (reduced)',
    category: 'reduced',
    order: 6
  },
  {
    id: 'chirik',
    symbol: 'Ö´',
    display_with_alef: '×Ö´',
    name_hebrew: '×—Ö´×™×¨Ö´×™×§',
    name_english: 'Chirik',
    sound_description: 'I as in "machine" (EE sound)',
    category: 'i',
    order: 7
  },
  {
    id: 'cholam',
    symbol: 'Ö¹',
    display_with_alef: '×Ö¹',
    name_hebrew: '×—×•Ö¹×œÖ¸×',
    name_english: 'Cholam',
    sound_description: 'O as in "go" (long O)',
    category: 'o',
    order: 8
  },
  {
    id: 'cholam-male',
    symbol: '×•Ö¹',
    display_with_alef: '×•Ö¹',
    name_hebrew: '×—×•Ö¹×œÖ¸× ×Ö¸×œÖµ×',
    name_english: 'Cholam Male',
    sound_description: 'O with Vav (full spelling)',
    category: 'o',
    order: 9
  },
  {
    id: 'chataf-kamatz',
    symbol: 'Ö³',
    display_with_alef: '×Ö³',
    name_hebrew: '×—Ö²×˜Ö·×£ ×§Ö¸×Ö·×¥',
    name_english: 'Chataf Kamatz',
    sound_description: 'Very short O (reduced)',
    category: 'reduced',
    order: 10
  },
  {
    id: 'kubutz',
    symbol: 'Ö»',
    display_with_alef: '×Ö»',
    name_hebrew: '×§Ö»×‘Ö¼×•Ö¼×¥',
    name_english: 'Kubutz',
    sound_description: 'U as in "rule" (OO sound)',
    category: 'u',
    order: 11
  },
  {
    id: 'shuruk',
    symbol: '×•Ö¼',
    display_with_alef: '×•Ö¼',
    name_hebrew: '×©××•Ö¼×¨×•Ö¼×§',
    name_english: 'Shuruk',
    sound_description: 'U with Vav (full spelling OO)',
    category: 'u',
    order: 12
  },
  {
    id: 'shva',
    symbol: 'Ö°',
    display_with_alef: '×Ö°',
    name_hebrew: '×©Ö°××•Ö¸×',
    name_english: 'Shva',
    sound_description: 'Brief "uh" or silent',
    category: 'reduced',
    order: 13
  }
];
```

---

# Hebrew Roots (Shorashim)

```typescript
// lib/data/roots.ts

export const rootsData = [
  {
    id: 'ktv',
    letters: '×›-×ª-×‘',
    core_meaning_en: 'write, writing',
    core_meaning_fr: 'Ã©crire, Ã©criture',
    core_meaning_he: '×›×ª×™×‘×”',
    examples: ['×›Ö¸Ö¼×ªÖ·×‘ (wrote)', '×Ö´×›Ö°×ªÖ¸Ö¼×‘ (letter)', '×›Ö°Ö¼×ªÖ»×‘Ö¸Ö¼×” (marriage contract)', '×›Ö¸Ö¼×ª×•Ö¼×‘ (written)']
  },
  {
    id: 'lmd',
    letters: '×œ-×-×“',
    core_meaning_en: 'learn, teach',
    core_meaning_fr: 'apprendre, enseigner',
    core_meaning_he: '×œ×™××•×“, ×”×•×¨××”',
    examples: ['×œÖ¸×Ö·×“ (learned)', '×œÖ´×ÖµÖ¼×“ (taught)', '×ªÖ·Ö¼×œÖ°×Ö´×™×“ (student)', '×Ö°×œÖ·×ÖµÖ¼×“ (teacher)']
  },
  {
    id: 'dbr',
    letters: '×“-×‘-×¨',
    core_meaning_en: 'speak, word',
    core_meaning_fr: 'parler, mot',
    core_meaning_he: '×“×™×‘×•×¨, ××™×œ×”',
    examples: ['×“Ö´Ö¼×‘ÖµÖ¼×¨ (spoke)', '×“Ö¸Ö¼×‘Ö¸×¨ (thing/word)', '×Ö´×“Ö°×‘Ö¸Ö¼×¨ (desert)', '×“Ö´Ö¼×‘Ö¼×•Ö¼×¨ (speech)']
  },
  {
    id: 'spr',
    letters: '×¡-×¤-×¨',
    core_meaning_en: 'count, tell, book',
    core_meaning_fr: 'compter, raconter, livre',
    core_meaning_he: '×¡×¤×™×¨×”, ×¡×™×¤×•×¨, ×¡×¤×¨',
    examples: ['×¡Ö¸×¤Ö·×¨ (counted)', '×¡Ö´×¤ÖµÖ¼×¨ (told)', '×¡Öµ×¤Ö¶×¨ (book)', '×Ö´×¡Ö°×¤Ö¸Ö¼×¨ (number)']
  },
  {
    id: 'hlk',
    letters: '×”-×œ-×š',
    core_meaning_en: 'walk, go',
    core_meaning_fr: 'marcher, aller',
    core_meaning_he: '×”×œ×™×›×”',
    examples: ['×”Ö¸×œÖ·×š (walked)', '×”Ö²×œÖ´×™×›Ö¸×” (walking)', '×Ö·×”Ö²×œÖ¸×š (journey)']
  },
  {
    id: 'akl',
    letters: '×-×›-×œ',
    core_meaning_en: 'eat, food',
    core_meaning_fr: 'manger, nourriture',
    core_meaning_he: '××›×™×œ×”',
    examples: ['×Ö¸×›Ö·×œ (ate)', '×Ö¹×›Ö¶×œ (food)', '×Ö·×Ö²×›Ö¸×œ (dish)']
  },
  {
    id: 'shmr',
    letters: '×©-×-×¨',
    core_meaning_en: 'guard, keep',
    core_meaning_fr: 'garder, protÃ©ger',
    core_meaning_he: '×©××™×¨×”',
    examples: ['×©Ö¸××Ö·×¨ (guarded)', '×©××•Ö¹×Öµ×¨ (guard)', '×Ö´×©Ö°××Ö¶×¨Ö¶×ª (watch)']
  },
  {
    id: 'ydh',
    letters: '×™-×“-×¢',
    core_meaning_en: 'know',
    core_meaning_fr: 'savoir, connaÃ®tre',
    core_meaning_he: '×™×“×™×¢×”',
    examples: ['×™Ö¸×“Ö·×¢ (knew)', '×™Ö¶×“Ö·×¢ (knowledge)', '×”×•Ö¹×“Ö´×™×¢Ö· (informed)']
  },
  {
    id: 'shma',
    letters: '×©-×-×¢',
    core_meaning_en: 'hear, listen',
    core_meaning_fr: 'entendre, Ã©couter',
    core_meaning_he: '×©××™×¢×”',
    examples: ['×©Ö¸××Ö·×¢ (heard)', '×©Ö°××Ö´×™×¢Ö¸×” (hearing)', '×Ö·×©Ö°××Ö¸×¢×•Ö¼×ª (meaning)']
  },
  {
    id: 'bnh',
    letters: '×‘-× -×”',
    core_meaning_en: 'build',
    core_meaning_fr: 'construire',
    core_meaning_he: '×‘× ×™×™×”',
    examples: ['×‘Ö¸Ö¼× Ö¸×” (built)', '×‘Ö´Ö¼× Ö°×™Ö¸×Ÿ (building)', '×Ö´×‘Ö°× Ö¶×” (structure)']
  }
];
```

---

# Vocabulary by Category

```typescript
// lib/data/vocabulary.ts

export const vocabularyData = {
  greetings: {
    name: 'Greetings & Basics',
    nameHe: '×‘×¨×›×•×ª ×•×™×¡×•×“×•×ª',
    words: [
      { id: 'shalom', hebrew: '×©×œ×•×', hebrew_with_nikud: '×©Ö¸××œ×•Ö¹×', transliteration: 'shalom', meaning_en: 'hello / goodbye / peace', meaning_fr: 'bonjour / au revoir / paix', meaning_he: '×©×œ×•×', part_of_speech: 'noun', gender: 'masculine', category: 'greetings', difficulty_level: 1 },
      { id: 'boker-tov', hebrew: '×‘×•×§×¨ ×˜×•×‘', hebrew_with_nikud: '×‘Ö¹Ö¼×§Ö¶×¨ ×˜×•Ö¹×‘', transliteration: 'boker tov', meaning_en: 'good morning', meaning_fr: 'bonjour (matin)', meaning_he: '×‘×•×§×¨ ×˜×•×‘', part_of_speech: 'other', category: 'greetings', difficulty_level: 1 },
      { id: 'erev-tov', hebrew: '×¢×¨×‘ ×˜×•×‘', hebrew_with_nikud: '×¢Ö¶×¨Ö¶×‘ ×˜×•Ö¹×‘', transliteration: 'erev tov', meaning_en: 'good evening', meaning_fr: 'bonsoir', meaning_he: '×¢×¨×‘ ×˜×•×‘', part_of_speech: 'other', category: 'greetings', difficulty_level: 1 },
      { id: 'layla-tov', hebrew: '×œ×™×œ×” ×˜×•×‘', hebrew_with_nikud: '×œÖ·×™Ö°×œÖ¸×” ×˜×•Ö¹×‘', transliteration: 'layla tov', meaning_en: 'good night', meaning_fr: 'bonne nuit', meaning_he: '×œ×™×œ×” ×˜×•×‘', part_of_speech: 'other', category: 'greetings', difficulty_level: 1 },
      { id: 'toda', hebrew: '×ª×•×“×”', hebrew_with_nikud: '×ªÖ¼×•Ö¹×“Ö¸×”', transliteration: 'toda', meaning_en: 'thank you', meaning_fr: 'merci', meaning_he: '×ª×•×“×”', part_of_speech: 'noun', gender: 'feminine', category: 'greetings', difficulty_level: 1 },
      { id: 'toda-raba', hebrew: '×ª×•×“×” ×¨×‘×”', hebrew_with_nikud: '×ªÖ¼×•Ö¹×“Ö¸×” ×¨Ö·×‘Ö¸Ö¼×”', transliteration: 'toda raba', meaning_en: 'thank you very much', meaning_fr: 'merci beaucoup', meaning_he: '×ª×•×“×” ×¨×‘×”', part_of_speech: 'other', category: 'greetings', difficulty_level: 1 },
      { id: 'bevakasha', hebrew: '×‘×‘×§×©×”', hebrew_with_nikud: '×‘Ö°Ö¼×‘Ö·×§Ö¸Ö¼×©Ö¸××”', transliteration: 'bevakasha', meaning_en: 'please / you\'re welcome', meaning_fr: 's\'il vous plaÃ®t / de rien', meaning_he: '×‘×‘×§×©×”', part_of_speech: 'other', category: 'greetings', difficulty_level: 1 },
      { id: 'slicha', hebrew: '×¡×œ×™×—×”', hebrew_with_nikud: '×¡Ö°×œÖ´×™×—Ö¸×”', transliteration: 'slicha', meaning_en: 'excuse me / sorry', meaning_fr: 'excusez-moi / pardon', meaning_he: '×¡×œ×™×—×”', part_of_speech: 'noun', gender: 'feminine', category: 'greetings', difficulty_level: 1 },
      { id: 'ken', hebrew: '×›×Ÿ', hebrew_with_nikud: '×›ÖµÖ¼×Ÿ', transliteration: 'ken', meaning_en: 'yes', meaning_fr: 'oui', meaning_he: '×›×Ÿ', part_of_speech: 'adverb', category: 'greetings', difficulty_level: 1 },
      { id: 'lo', hebrew: '×œ×', hebrew_with_nikud: '×œÖ¹×', transliteration: 'lo', meaning_en: 'no', meaning_fr: 'non', meaning_he: '×œ×', part_of_speech: 'adverb', category: 'greetings', difficulty_level: 1 },
      { id: 'lehitraot', hebrew: '×œ×”×ª×¨××•×ª', hebrew_with_nikud: '×œÖ°×”Ö´×ªÖ°×¨Ö¸××•Ö¹×ª', transliteration: 'lehitraot', meaning_en: 'goodbye (see you)', meaning_fr: 'au revoir', meaning_he: '×œ×”×ª×¨××•×ª', part_of_speech: 'other', category: 'greetings', difficulty_level: 2 },
      { id: 'ma-nishma', hebrew: '××” × ×©××¢', hebrew_with_nikud: '×Ö·×” × Ö´×©Ö°××Ö¸×¢', transliteration: 'ma nishma', meaning_en: 'what\'s up?', meaning_fr: 'quoi de neuf?', meaning_he: '××” × ×©××¢', part_of_speech: 'other', category: 'greetings', difficulty_level: 2 },
    ]
  },
  pronouns: {
    name: 'Pronouns',
    nameHe: '×›×™× ×•×™×™ ×’×•×£',
    words: [
      { id: 'ani', hebrew: '×× ×™', hebrew_with_nikud: '×Ö²× Ö´×™', transliteration: 'ani', meaning_en: 'I', meaning_fr: 'je', meaning_he: '×× ×™', part_of_speech: 'pronoun', category: 'pronouns', difficulty_level: 1 },
      { id: 'ata', hebrew: '××ª×”', hebrew_with_nikud: '×Ö·×ªÖ¸Ö¼×”', transliteration: 'ata', meaning_en: 'you (m. sg.)', meaning_fr: 'tu (m.)', meaning_he: '××ª×” (×–)', part_of_speech: 'pronoun', gender: 'masculine', category: 'pronouns', difficulty_level: 1 },
      { id: 'at', hebrew: '××ª', hebrew_with_nikud: '×Ö·×ªÖ°Ö¼', transliteration: 'at', meaning_en: 'you (f. sg.)', meaning_fr: 'tu (f.)', meaning_he: '××ª (× )', part_of_speech: 'pronoun', gender: 'feminine', category: 'pronouns', difficulty_level: 1 },
      { id: 'hu', hebrew: '×”×•×', hebrew_with_nikud: '×”×•Ö¼×', transliteration: 'hu', meaning_en: 'he / it (m.)', meaning_fr: 'il', meaning_he: '×”×•×', part_of_speech: 'pronoun', gender: 'masculine', category: 'pronouns', difficulty_level: 1 },
      { id: 'hi', hebrew: '×”×™×', hebrew_with_nikud: '×”Ö´×™×', transliteration: 'hi', meaning_en: 'she / it (f.)', meaning_fr: 'elle', meaning_he: '×”×™×', part_of_speech: 'pronoun', gender: 'feminine', category: 'pronouns', difficulty_level: 1 },
      { id: 'anachnu', hebrew: '×× ×—× ×•', hebrew_with_nikud: '×Ö²× Ö·×—Ö°× ×•Ö¼', transliteration: 'anachnu', meaning_en: 'we', meaning_fr: 'nous', meaning_he: '×× ×—× ×•', part_of_speech: 'pronoun', category: 'pronouns', difficulty_level: 1 },
      { id: 'atem', hebrew: '××ª×', hebrew_with_nikud: '×Ö·×ªÖ¶Ö¼×', transliteration: 'atem', meaning_en: 'you (m. pl.)', meaning_fr: 'vous (m.)', meaning_he: '××ª× (×–)', part_of_speech: 'pronoun', gender: 'masculine', category: 'pronouns', difficulty_level: 2 },
      { id: 'hem', hebrew: '×”×', hebrew_with_nikud: '×”Öµ×', transliteration: 'hem', meaning_en: 'they (m.)', meaning_fr: 'ils', meaning_he: '×”× (×–)', part_of_speech: 'pronoun', gender: 'masculine', category: 'pronouns', difficulty_level: 1 },
      { id: 'hen', hebrew: '×”×Ÿ', hebrew_with_nikud: '×”Öµ×Ÿ', transliteration: 'hen', meaning_en: 'they (f.)', meaning_fr: 'elles', meaning_he: '×”×Ÿ (× )', part_of_speech: 'pronoun', gender: 'feminine', category: 'pronouns', difficulty_level: 2 },
    ]
  },
  numbers: {
    name: 'Numbers',
    nameHe: '××¡×¤×¨×™×',
    words: [
      { id: 'efes', hebrew: '××¤×¡', hebrew_with_nikud: '×Ö¶×¤Ö¶×¡', transliteration: 'efes', meaning_en: 'zero', meaning_fr: 'zÃ©ro', meaning_he: '0', part_of_speech: 'noun', category: 'numbers', difficulty_level: 1 },
      { id: 'echad', hebrew: '××—×“', hebrew_with_nikud: '×Ö¶×—Ö¸×“', transliteration: 'echad', meaning_en: 'one (m.)', meaning_fr: 'un', meaning_he: '1', part_of_speech: 'noun', gender: 'masculine', category: 'numbers', difficulty_level: 1 },
      { id: 'shnayim', hebrew: '×©× ×™×™×', hebrew_with_nikud: '×©Ö°×× Ö·×™Ö´×', transliteration: 'shnayim', meaning_en: 'two (m.)', meaning_fr: 'deux (m.)', meaning_he: '2', part_of_speech: 'noun', gender: 'masculine', category: 'numbers', difficulty_level: 1 },
      { id: 'shlosha', hebrew: '×©×œ×•×©×”', hebrew_with_nikud: '×©Ö°××œÖ¹×©Ö¸××”', transliteration: 'shlosha', meaning_en: 'three (m.)', meaning_fr: 'trois (m.)', meaning_he: '3', part_of_speech: 'noun', gender: 'masculine', category: 'numbers', difficulty_level: 1 },
      { id: 'arba', hebrew: '××¨×‘×¢×”', hebrew_with_nikud: '×Ö·×¨Ö°×‘Ö¸Ö¼×¢Ö¸×”', transliteration: "arba'a", meaning_en: 'four (m.)', meaning_fr: 'quatre (m.)', meaning_he: '4', part_of_speech: 'noun', gender: 'masculine', category: 'numbers', difficulty_level: 1 },
      { id: 'chamisha', hebrew: '×—××™×©×”', hebrew_with_nikud: '×—Ö²×Ö´×©Ö¸Ö¼××”', transliteration: 'chamisha', meaning_en: 'five (m.)', meaning_fr: 'cinq (m.)', meaning_he: '5', part_of_speech: 'noun', gender: 'masculine', category: 'numbers', difficulty_level: 1 },
      { id: 'shisha', hebrew: '×©×™×©×”', hebrew_with_nikud: '×©Ö´××©Ö¸Ö¼××”', transliteration: 'shisha', meaning_en: 'six (m.)', meaning_fr: 'six (m.)', meaning_he: '6', part_of_speech: 'noun', gender: 'masculine', category: 'numbers', difficulty_level: 1 },
      { id: 'shiva', hebrew: '×©×‘×¢×”', hebrew_with_nikud: '×©Ö´××‘Ö°×¢Ö¸×”', transliteration: "shiv'a", meaning_en: 'seven (m.)', meaning_fr: 'sept (m.)', meaning_he: '7', part_of_speech: 'noun', gender: 'masculine', category: 'numbers', difficulty_level: 1 },
      { id: 'shmona', hebrew: '×©××•× ×”', hebrew_with_nikud: '×©Ö°×××•Ö¹× Ö¸×”', transliteration: 'shmona', meaning_en: 'eight (m.)', meaning_fr: 'huit (m.)', meaning_he: '8', part_of_speech: 'noun', gender: 'masculine', category: 'numbers', difficulty_level: 1 },
      { id: 'tisha', hebrew: '×ª×©×¢×”', hebrew_with_nikud: '×ªÖ´Ö¼×©Ö°××¢Ö¸×”', transliteration: "tish'a", meaning_en: 'nine (m.)', meaning_fr: 'neuf (m.)', meaning_he: '9', part_of_speech: 'noun', gender: 'masculine', category: 'numbers', difficulty_level: 1 },
      { id: 'asara', hebrew: '×¢×©×¨×”', hebrew_with_nikud: '×¢Ö²×©Ö¸×‚×¨Ö¸×”', transliteration: 'asara', meaning_en: 'ten (m.)', meaning_fr: 'dix (m.)', meaning_he: '10', part_of_speech: 'noun', gender: 'masculine', category: 'numbers', difficulty_level: 1 },
    ]
  },
  family: {
    name: 'Family',
    nameHe: '××©×¤×—×”',
    words: [
      { id: 'mishpacha', hebrew: '××©×¤×—×”', hebrew_with_nikud: '×Ö´×©Ö°××¤Ö¸Ö¼×—Ö¸×”', transliteration: 'mishpacha', meaning_en: 'family', meaning_fr: 'famille', meaning_he: '××©×¤×—×”', part_of_speech: 'noun', gender: 'feminine', category: 'family', difficulty_level: 1 },
      { id: 'aba', hebrew: '××‘×', hebrew_with_nikud: '×Ö·×‘Ö¸Ö¼×', transliteration: 'aba', meaning_en: 'dad', meaning_fr: 'papa', meaning_he: '××‘×', part_of_speech: 'noun', gender: 'masculine', category: 'family', difficulty_level: 1 },
      { id: 'ima', hebrew: '×××', hebrew_with_nikud: '×Ö´×Ö¸Ö¼×', transliteration: 'ima', meaning_en: 'mom', meaning_fr: 'maman', meaning_he: '×××', part_of_speech: 'noun', gender: 'feminine', category: 'family', difficulty_level: 1 },
      { id: 'ben', hebrew: '×‘×Ÿ', hebrew_with_nikud: '×‘ÖµÖ¼×Ÿ', transliteration: 'ben', meaning_en: 'son', meaning_fr: 'fils', meaning_he: '×‘×Ÿ', part_of_speech: 'noun', gender: 'masculine', plural_form: '×‘Ö¸Ö¼× Ö´×™×', category: 'family', difficulty_level: 1 },
      { id: 'bat', hebrew: '×‘×ª', hebrew_with_nikud: '×‘Ö·Ö¼×ª', transliteration: 'bat', meaning_en: 'daughter', meaning_fr: 'fille', meaning_he: '×‘×ª', part_of_speech: 'noun', gender: 'feminine', plural_form: '×‘Ö¸Ö¼× ×•Ö¹×ª', category: 'family', difficulty_level: 1 },
      { id: 'ach', hebrew: '××—', hebrew_with_nikud: '×Ö¸×—', transliteration: 'ach', meaning_en: 'brother', meaning_fr: 'frÃ¨re', meaning_he: '××—', part_of_speech: 'noun', gender: 'masculine', plural_form: '×Ö·×—Ö´×™×', category: 'family', difficulty_level: 1 },
      { id: 'achot', hebrew: '××—×•×ª', hebrew_with_nikud: '×Ö¸×—×•Ö¹×ª', transliteration: 'achot', meaning_en: 'sister', meaning_fr: 'sÅ“ur', meaning_he: '××—×•×ª', part_of_speech: 'noun', gender: 'feminine', plural_form: '×Ö²×—Ö¸×™×•Ö¹×ª', category: 'family', difficulty_level: 1 },
      { id: 'saba', hebrew: '×¡×‘×', hebrew_with_nikud: '×¡Ö¸×‘Ö¸×', transliteration: 'saba', meaning_en: 'grandfather', meaning_fr: 'grand-pÃ¨re', meaning_he: '×¡×‘×', part_of_speech: 'noun', gender: 'masculine', category: 'family', difficulty_level: 1 },
      { id: 'savta', hebrew: '×¡×‘×ª×', hebrew_with_nikud: '×¡Ö¸×‘Ö°×ªÖ¸×', transliteration: 'savta', meaning_en: 'grandmother', meaning_fr: 'grand-mÃ¨re', meaning_he: '×¡×‘×ª×', part_of_speech: 'noun', gender: 'feminine', category: 'family', difficulty_level: 1 },
    ]
  },
  questions: {
    name: 'Question Words',
    nameHe: '××™×œ×•×ª ×©××œ×”',
    words: [
      { id: 'ma', hebrew: '××”', hebrew_with_nikud: '×Ö¸×”', transliteration: 'ma', meaning_en: 'what?', meaning_fr: 'quoi?', meaning_he: '××”?', part_of_speech: 'other', category: 'questions', difficulty_level: 1 },
      { id: 'mi', hebrew: '××™', hebrew_with_nikud: '×Ö´×™', transliteration: 'mi', meaning_en: 'who?', meaning_fr: 'qui?', meaning_he: '××™?', part_of_speech: 'other', category: 'questions', difficulty_level: 1 },
      { id: 'eifo', hebrew: '××™×¤×”', hebrew_with_nikud: '×Öµ×™×¤Ö¹×”', transliteration: 'eifo', meaning_en: 'where?', meaning_fr: 'oÃ¹?', meaning_he: '××™×¤×”?', part_of_speech: 'other', category: 'questions', difficulty_level: 1 },
      { id: 'matay', hebrew: '××ª×™', hebrew_with_nikud: '×Ö¸×ªÖ·×™', transliteration: 'matay', meaning_en: 'when?', meaning_fr: 'quand?', meaning_he: '××ª×™?', part_of_speech: 'other', category: 'questions', difficulty_level: 1 },
      { id: 'lama', hebrew: '×œ××”', hebrew_with_nikud: '×œÖ¸×Ö¸×”', transliteration: 'lama', meaning_en: 'why?', meaning_fr: 'pourquoi?', meaning_he: '×œ××”?', part_of_speech: 'other', category: 'questions', difficulty_level: 1 },
      { id: 'eikh', hebrew: '××™×š', hebrew_with_nikud: '×Öµ×™×šÖ°', transliteration: 'eikh', meaning_en: 'how?', meaning_fr: 'comment?', meaning_he: '××™×š?', part_of_speech: 'other', category: 'questions', difficulty_level: 1 },
      { id: 'kama', hebrew: '×›××”', hebrew_with_nikud: '×›Ö·Ö¼×Ö¸Ö¼×”', transliteration: 'kama', meaning_en: 'how much? / how many?', meaning_fr: 'combien?', meaning_he: '×›××”?', part_of_speech: 'other', category: 'questions', difficulty_level: 1 },
    ]
  },
  adjectives: {
    name: 'Adjectives',
    nameHe: '×©××•×ª ×ª×•××¨',
    words: [
      { id: 'tov', hebrew: '×˜×•×‘', hebrew_with_nikud: '×˜×•Ö¹×‘', transliteration: 'tov', meaning_en: 'good', meaning_fr: 'bon', meaning_he: '×˜×•×‘', part_of_speech: 'adjective', gender: 'masculine', category: 'adjectives', difficulty_level: 1 },
      { id: 'ra', hebrew: '×¨×¢', hebrew_with_nikud: '×¨Ö·×¢', transliteration: 'ra', meaning_en: 'bad', meaning_fr: 'mauvais', meaning_he: '×¨×¢', part_of_speech: 'adjective', gender: 'masculine', category: 'adjectives', difficulty_level: 1 },
      { id: 'gadol', hebrew: '×’×“×•×œ', hebrew_with_nikud: '×’Ö¸Ö¼×“×•Ö¹×œ', transliteration: 'gadol', meaning_en: 'big / great', meaning_fr: 'grand', meaning_he: '×’×“×•×œ', part_of_speech: 'adjective', gender: 'masculine', category: 'adjectives', difficulty_level: 1 },
      { id: 'katan', hebrew: '×§×˜×Ÿ', hebrew_with_nikud: '×§Ö¸×˜Ö¸×Ÿ', transliteration: 'katan', meaning_en: 'small', meaning_fr: 'petit', meaning_he: '×§×˜×Ÿ', part_of_speech: 'adjective', gender: 'masculine', category: 'adjectives', difficulty_level: 1 },
      { id: 'yafe', hebrew: '×™×¤×”', hebrew_with_nikud: '×™Ö¸×¤Ö¶×”', transliteration: 'yafe', meaning_en: 'beautiful (m.)', meaning_fr: 'beau', meaning_he: '×™×¤×”', part_of_speech: 'adjective', gender: 'masculine', category: 'adjectives', difficulty_level: 1 },
      { id: 'chadash', hebrew: '×—×“×©', hebrew_with_nikud: '×—Ö¸×“Ö¸×©×', transliteration: 'chadash', meaning_en: 'new', meaning_fr: 'nouveau', meaning_he: '×—×“×©', part_of_speech: 'adjective', gender: 'masculine', category: 'adjectives', difficulty_level: 1 },
      { id: 'yashan', hebrew: '×™×©×Ÿ', hebrew_with_nikud: '×™Ö¸×©Ö¸××Ÿ', transliteration: 'yashan', meaning_en: 'old', meaning_fr: 'vieux', meaning_he: '×™×©×Ÿ', part_of_speech: 'adjective', gender: 'masculine', category: 'adjectives', difficulty_level: 2 },
      { id: 'cham', hebrew: '×—×', hebrew_with_nikud: '×—Ö·×', transliteration: 'cham', meaning_en: 'hot', meaning_fr: 'chaud', meaning_he: '×—×', part_of_speech: 'adjective', gender: 'masculine', category: 'adjectives', difficulty_level: 1 },
      { id: 'kar', hebrew: '×§×¨', hebrew_with_nikud: '×§Ö·×¨', transliteration: 'kar', meaning_en: 'cold', meaning_fr: 'froid', meaning_he: '×§×¨', part_of_speech: 'adjective', gender: 'masculine', category: 'adjectives', difficulty_level: 1 },
    ]
  },
  verbs_basic: {
    name: 'Basic Verbs',
    nameHe: '×¤×¢×œ×™× ×‘×¡×™×¡×™×™×',
    words: [
      { id: 'holekh', hebrew: '×”×•×œ×š', hebrew_with_nikud: '×”×•Ö¹×œÖµ×šÖ°', transliteration: 'holekh', meaning_en: 'walk / go (m.)', meaning_fr: 'marcher / aller (m.)', meaning_he: '×”×•×œ×š', part_of_speech: 'verb', gender: 'masculine', root_id: 'hlk', category: 'verbs_basic', difficulty_level: 1 },
      { id: 'okhel', hebrew: '××•×›×œ', hebrew_with_nikud: '××•Ö¹×›Öµ×œ', transliteration: 'okhel', meaning_en: 'eat (m.)', meaning_fr: 'manger (m.)', meaning_he: '××•×›×œ', part_of_speech: 'verb', gender: 'masculine', root_id: 'akl', category: 'verbs_basic', difficulty_level: 1 },
      { id: 'lomed', hebrew: '×œ×•××“', hebrew_with_nikud: '×œ×•Ö¹×Öµ×“', transliteration: 'lomed', meaning_en: 'learn / study (m.)', meaning_fr: 'apprendre / Ã©tudier (m.)', meaning_he: '×œ×•××“', part_of_speech: 'verb', gender: 'masculine', root_id: 'lmd', category: 'verbs_basic', difficulty_level: 1 },
      { id: 'medaber', hebrew: '××“×‘×¨', hebrew_with_nikud: '×Ö°×“Ö·×‘ÖµÖ¼×¨', transliteration: 'medaber', meaning_en: 'speak (m.)', meaning_fr: 'parler (m.)', meaning_he: '××“×‘×¨', part_of_speech: 'verb', gender: 'masculine', root_id: 'dbr', category: 'verbs_basic', difficulty_level: 2 },
      { id: 'kotev', hebrew: '×›×•×ª×‘', hebrew_with_nikud: '×›Ö¼×•Ö¹×ªÖµ×‘', transliteration: 'kotev', meaning_en: 'write (m.)', meaning_fr: 'Ã©crire (m.)', meaning_he: '×›×•×ª×‘', part_of_speech: 'verb', gender: 'masculine', root_id: 'ktv', category: 'verbs_basic', difficulty_level: 1 },
      { id: 'kore', hebrew: '×§×•×¨×', hebrew_with_nikud: '×§×•Ö¹×¨Öµ×', transliteration: 'kore', meaning_en: 'read (m.)', meaning_fr: 'lire (m.)', meaning_he: '×§×•×¨×', part_of_speech: 'verb', gender: 'masculine', category: 'verbs_basic', difficulty_level: 1 },
      { id: 'shome', hebrew: '×©×•××¢', hebrew_with_nikud: '×©××•Ö¹×Öµ×¢Ö·', transliteration: 'shome\'a', meaning_en: 'hear (m.)', meaning_fr: 'entendre (m.)', meaning_he: '×©×•××¢', part_of_speech: 'verb', gender: 'masculine', root_id: 'shma', category: 'verbs_basic', difficulty_level: 2 },
    ]
  },
  common_nouns: {
    name: 'Common Nouns',
    nameHe: '×©××•×ª ×¢×¦× × ×¤×•×¦×™×',
    words: [
      { id: 'bayit', hebrew: '×‘×™×ª', hebrew_with_nikud: '×‘Ö·Ö¼×™Ö´×ª', transliteration: 'bayit', meaning_en: 'house / home', meaning_fr: 'maison', meaning_he: '×‘×™×ª', part_of_speech: 'noun', gender: 'masculine', plural_form: '×‘Ö¸Ö¼×ªÖ´Ö¼×™×', category: 'common_nouns', difficulty_level: 1 },
      { id: 'sefer', hebrew: '×¡×¤×¨', hebrew_with_nikud: '×¡Öµ×¤Ö¶×¨', transliteration: 'sefer', meaning_en: 'book', meaning_fr: 'livre', meaning_he: '×¡×¤×¨', part_of_speech: 'noun', gender: 'masculine', plural_form: '×¡Ö°×¤Ö¸×¨Ö´×™×', root_id: 'spr', category: 'common_nouns', difficulty_level: 1 },
      { id: 'mayim', hebrew: '××™×', hebrew_with_nikud: '×Ö·×™Ö´×', transliteration: 'mayim', meaning_en: 'water', meaning_fr: 'eau', meaning_he: '××™×', part_of_speech: 'noun', gender: 'masculine', category: 'common_nouns', difficulty_level: 1 },
      { id: 'lechem', hebrew: '×œ×—×', hebrew_with_nikud: '×œÖ¶×—Ö¶×', transliteration: 'lechem', meaning_en: 'bread', meaning_fr: 'pain', meaning_he: '×œ×—×', part_of_speech: 'noun', gender: 'masculine', category: 'common_nouns', difficulty_level: 1 },
      { id: 'yom', hebrew: '×™×•×', hebrew_with_nikud: '×™×•Ö¹×', transliteration: 'yom', meaning_en: 'day', meaning_fr: 'jour', meaning_he: '×™×•×', part_of_speech: 'noun', gender: 'masculine', plural_form: '×™Ö¸×Ö´×™×', category: 'common_nouns', difficulty_level: 1 },
      { id: 'layla', hebrew: '×œ×™×œ×”', hebrew_with_nikud: '×œÖ·×™Ö°×œÖ¸×”', transliteration: 'layla', meaning_en: 'night', meaning_fr: 'nuit', meaning_he: '×œ×™×œ×”', part_of_speech: 'noun', gender: 'masculine', plural_form: '×œÖµ×™×œ×•Ö¹×ª', category: 'common_nouns', difficulty_level: 1 },
      { id: 'shemesh', hebrew: '×©××©', hebrew_with_nikud: '×©Ö¶××Ö¶×©×', transliteration: 'shemesh', meaning_en: 'sun', meaning_fr: 'soleil', meaning_he: '×©××©', part_of_speech: 'noun', gender: 'feminine', category: 'common_nouns', difficulty_level: 1 },
      { id: 'eretz', hebrew: '××¨×¥', hebrew_with_nikud: '×Ö¶×¨Ö¶×¥', transliteration: 'eretz', meaning_en: 'land / country', meaning_fr: 'terre / pays', meaning_he: '××¨×¥', part_of_speech: 'noun', gender: 'feminine', plural_form: '×Ö²×¨Ö¸×¦×•Ö¹×ª', category: 'common_nouns', difficulty_level: 1 },
      { id: 'ish', hebrew: '××™×©', hebrew_with_nikud: '×Ö´×™×©×', transliteration: 'ish', meaning_en: 'man', meaning_fr: 'homme', meaning_he: '××™×©', part_of_speech: 'noun', gender: 'masculine', plural_form: '×Ö²× Ö¸×©Ö´××™×', category: 'common_nouns', difficulty_level: 1 },
      { id: 'isha', hebrew: '××™×©×”', hebrew_with_nikud: '×Ö´×©Ö¸Ö¼××”', transliteration: 'isha', meaning_en: 'woman', meaning_fr: 'femme', meaning_he: '××™×©×”', part_of_speech: 'noun', gender: 'feminine', plural_form: '× Ö¸×©Ö´××™×', category: 'common_nouns', difficulty_level: 1 },
      { id: 'yeled', hebrew: '×™×œ×“', hebrew_with_nikud: '×™Ö¶×œÖ¶×“', transliteration: 'yeled', meaning_en: 'boy / child', meaning_fr: 'garÃ§on / enfant', meaning_he: '×™×œ×“', part_of_speech: 'noun', gender: 'masculine', plural_form: '×™Ö°×œÖ¸×“Ö´×™×', category: 'common_nouns', difficulty_level: 1 },
      { id: 'yalda', hebrew: '×™×œ×“×”', hebrew_with_nikud: '×™Ö·×œÖ°×“Ö¸Ö¼×”', transliteration: 'yalda', meaning_en: 'girl', meaning_fr: 'fille', meaning_he: '×™×œ×“×”', part_of_speech: 'noun', gender: 'feminine', plural_form: '×™Ö°×œÖ¸×“×•Ö¹×ª', category: 'common_nouns', difficulty_level: 1 },
    ]
  }
};

// Helper functions
export function getAllWords() {
  return Object.values(vocabularyData).flatMap(cat => cat.words);
}

export function getWordsByCategory(category: string) {
  return vocabularyData[category]?.words || [];
}

export function getTotalWordCount() {
  return Object.values(vocabularyData).reduce((sum, cat) => sum + cat.words.length, 0);
}
```

---

# Database Schema (Supabase)

```sql
-- Supabase Database Schema for Hebrew Master

-- Users table (extends Supabase auth.users)
CREATE TABLE public.profiles (
  id UUID REFERENCES auth.users(id) PRIMARY KEY,
  email TEXT UNIQUE NOT NULL,
  full_name TEXT,
  avatar_url TEXT,
  role TEXT DEFAULT 'student' CHECK (role IN ('student', 'teacher', 'admin')),
  subscription_tier TEXT DEFAULT 'free' CHECK (subscription_tier IN ('free', 'premium', 'enterprise')),
  subscription_status TEXT DEFAULT 'active' CHECK (subscription_status IN ('active', 'canceled', 'past_due', 'trialing')),
  current_level TEXT DEFAULT 'beginner',
  preferred_language TEXT DEFAULT 'en' CHECK (preferred_language IN ('en', 'fr', 'he')),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  last_seen_at TIMESTAMPTZ DEFAULT NOW()
);

-- User Progress
CREATE TABLE public.user_progress (
  user_id UUID REFERENCES public.profiles(id) PRIMARY KEY,
  total_xp INTEGER DEFAULT 0,
  current_streak INTEGER DEFAULT 0,
  longest_streak INTEGER DEFAULT 0,
  words_learned INTEGER DEFAULT 0,
  letters_mastered INTEGER DEFAULT 0,
  lessons_completed INTEGER DEFAULT 0,
  total_study_time_minutes INTEGER DEFAULT 0,
  last_study_date DATE
);

-- FSRS Cards
CREATE TABLE public.fsrs_cards (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES public.profiles(id) NOT NULL,
  item_type TEXT NOT NULL CHECK (item_type IN ('letter', 'nikud', 'word')),
  item_id TEXT NOT NULL,
  due TIMESTAMPTZ DEFAULT NOW(),
  stability FLOAT DEFAULT 0,
  difficulty FLOAT DEFAULT 0,
  elapsed_days FLOAT DEFAULT 0,
  scheduled_days INTEGER DEFAULT 0,
  reps INTEGER DEFAULT 0,
  lapses INTEGER DEFAULT 0,
  state TEXT DEFAULT 'new' CHECK (state IN ('new', 'learning', 'review', 'relearning')),
  last_review TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, item_type, item_id)
);

-- Review Logs
CREATE TABLE public.review_logs (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  card_id UUID REFERENCES public.fsrs_cards(id),
  user_id UUID REFERENCES public.profiles(id) NOT NULL,
  rating INTEGER CHECK (rating BETWEEN 1 AND 4),
  state TEXT NOT NULL,
  due TIMESTAMPTZ,
  stability FLOAT,
  difficulty FLOAT,
  elapsed_days FLOAT,
  last_elapsed_days FLOAT,
  scheduled_days INTEGER,
  review_time_ms INTEGER,
  reviewed_at TIMESTAMPTZ DEFAULT NOW()
);

-- Study Sessions
CREATE TABLE public.study_sessions (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES public.profiles(id) NOT NULL,
  started_at TIMESTAMPTZ DEFAULT NOW(),
  ended_at TIMESTAMPTZ,
  cards_reviewed INTEGER DEFAULT 0,
  new_cards INTEGER DEFAULT 0,
  correct_count INTEGER DEFAULT 0,
  xp_earned INTEGER DEFAULT 0
);

-- Achievements
CREATE TABLE public.achievements (
  id TEXT PRIMARY KEY,
  name_en TEXT NOT NULL,
  name_fr TEXT,
  name_he TEXT,
  description_en TEXT,
  description_fr TEXT,
  description_he TEXT,
  icon TEXT,
  xp_reward INTEGER DEFAULT 0,
  requirement_type TEXT,
  requirement_value INTEGER,
  tier TEXT CHECK (tier IN ('bronze', 'silver', 'gold', 'platinum'))
);

-- User Achievements
CREATE TABLE public.user_achievements (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES public.profiles(id) NOT NULL,
  achievement_id TEXT REFERENCES public.achievements(id) NOT NULL,
  earned_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, achievement_id)
);

-- Row Level Security
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.user_progress ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.fsrs_cards ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.review_logs ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.study_sessions ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.user_achievements ENABLE ROW LEVEL SECURITY;

-- Policies
CREATE POLICY "Users can read own profile" ON public.profiles FOR SELECT USING (auth.uid() = id);
CREATE POLICY "Users can update own profile" ON public.profiles FOR UPDATE USING (auth.uid() = id);
CREATE POLICY "Users can read own progress" ON public.user_progress FOR SELECT USING (auth.uid() = user_id);
CREATE POLICY "Users can update own progress" ON public.user_progress FOR UPDATE USING (auth.uid() = user_id);
CREATE POLICY "Users can manage own cards" ON public.fsrs_cards FOR ALL USING (auth.uid() = user_id);
CREATE POLICY "Users can manage own review logs" ON public.review_logs FOR ALL USING (auth.uid() = user_id);
CREATE POLICY "Users can manage own study sessions" ON public.study_sessions FOR ALL USING (auth.uid() = user_id);
CREATE POLICY "Users can read own achievements" ON public.user_achievements FOR SELECT USING (auth.uid() = user_id);

-- Indexes
CREATE INDEX idx_fsrs_cards_user_due ON public.fsrs_cards(user_id, due);
CREATE INDEX idx_fsrs_cards_user_state ON public.fsrs_cards(user_id, state);
CREATE INDEX idx_review_logs_user ON public.review_logs(user_id, reviewed_at);
CREATE INDEX idx_study_sessions_user ON public.study_sessions(user_id, started_at);
```

---

# Integration Instructions

## Step 1: Copy the Data Files

Create these files in your Cursor project:

```
lib/
  data/
    alphabet.ts    (copy Hebrew Alphabet section)
    nikud.ts       (copy Nikud section)
    roots.ts       (copy Roots section)
    vocabulary.ts  (copy Vocabulary section)
  fsrs.ts          (copy FSRS Algorithm section)
types/
  index.ts         (copy Types section)
```

## Step 2: Set Up Supabase

1. Create a new Supabase project
2. Run the SQL schema above in SQL Editor
3. Add your Supabase URL and ANON KEY to `.env.local`:

```env
NEXT_PUBLIC_SUPABASE_URL=your-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-key
```

## Step 3: Install Dependencies

```bash
npm install @supabase/supabase-js @supabase/ssr framer-motion lucide-react recharts zustand
```

## Step 4: Import Data in Your Components

```typescript
import { hebrewAlphabet } from '@/lib/data/alphabet';
import { nikudData } from '@/lib/data/nikud';
import { vocabularyData, getAllWords } from '@/lib/data/vocabulary';
import { schedule, Rating, createCard, previewIntervals } from '@/lib/fsrs';
```

## Step 5: Use the FSRS System

```typescript
// Create a new card when user starts learning a word
const newCard = createCard();

// When user reviews, update the card
const { card: updatedCard } = schedule(existingCard, Rating.Good);

// Show next intervals
const intervals = previewIntervals(card);
// { 1: '< 1m', 2: '5m', 3: '1 day', 4: '4 days' }
```

---

# Summary

This package includes:

âœ… **22 Hebrew letters** with full details (mnemonics, gematria, variants, sound descriptions in EN/FR/HE)

âœ… **13 Nikud vowels** with categories and examples

âœ… **10 Hebrew roots** (shorashim) with derived words

âœ… **90+ vocabulary words** across 8 categories (greetings, pronouns, numbers, family, questions, adjectives, verbs, common nouns)

âœ… **Complete FSRS algorithm** for spaced repetition

âœ… **Full TypeScript types** for all data structures

âœ… **Supabase schema** with RLS policies

âœ… **Trilingual support** (English, French, Hebrew)

---

Created for Hebrew Master Premium - â‚¬200/month platform
</file>

<file path="hooks/useAuth.ts">
import { useState, useEffect } from 'react';
import { createClient } from '@supabase/supabase-js';

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
);

// ×©×™× ×œ×‘: ×‘×œ×™ ×”××™×œ×” default!
export function useAuth() {
  const [user, setUser] = useState<any>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const getUser = async () => {
      const { data: { user } } = await supabase.auth.getUser();
      setUser(user);
      setLoading(false);
    };
    getUser();

    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
      setUser(session?.user ?? null);
    });

    return () => subscription.unsubscribe();
  }, []);

  return { user, loading };
}
</file>

<file path="hooks/useLocale.ts">
'use client';

import { useState, useEffect } from 'react';
import en from '@/messages/en.json';
import he from '@/messages/he.json';
import fr from '@/messages/fr.json';

const translations = { en, he, fr };

export function useLocale() {
  const [locale, setLocale] = useState<'en' | 'he' | 'fr'>('en');

  useEffect(() => {
    const savedLocale = localStorage.getItem('locale') as 'en' | 'he' | 'fr';
    if (savedLocale) {
      setLocale(savedLocale);
      // ×©×™× ×•×™ ×›×™×•×•×Ÿ ×”×˜×§×¡×˜
      document.documentElement.dir = savedLocale === 'he' ? 'rtl' : 'ltr';
      document.documentElement.lang = savedLocale;
    }
  }, []);

  const t = (key: string) => {
    const keys = key.split('.');
    let value: any = translations[locale];
    
    for (const k of keys) {
      value = value?.[k];
    }
    
    return value || key;
  };

  return { locale, t };
}
</file>

<file path="hooks/useStudySession.ts">
import { useState, useEffect } from 'react';
import { createClient } from '@supabase/supabase-js';

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
);

export type Flashcard = {
  id: string;
  word_he: string;      // ×”×•×¡×¤× ×• ××ª ×–×”
  translit: string;     // ×”×•×¡×¤× ×• ××ª ×–×”
  meaning_en: string;
  difficulty: number;
  content_id: string;   // ×›×“×™ ×œ×§×©×¨ ×œ××™×œ×” ×”××§×•×¨×™×ª
};

export function useStudySession() {
  const [cards, setCards] = useState<Flashcard[]>([]);
  const [loading, setLoading] = useState(true);
  const [stats, setStats] = useState({ totalWords: 0, mastered: 0, streak: 0 });

  useEffect(() => {
    fetchSessionData();
  }, []);

  async function fetchSessionData() {
    try {
      // 1. ×§×•×“× ×›×œ × ×‘×™× × ×ª×•× ×™× ×›×œ×œ×™×™× ×œ×“×©×‘×•×¨×“
      const { count } = await supabase.from('vocabulary').select('*', { count: 'exact', head: true });
      setStats(prev => ({ ...prev, totalWords: count || 0, streak: 1 }));

      // 2. ×¢×›×©×™×• × ×‘×™× ××™×œ×™× ×œ×ª×¨×’×•×œ
      // ×× ×—× ×• ××•×©×›×™× ××™×œ×™× ××˜×‘×œ×ª vocabulary
      const { data: vocabData } = await supabase
        .from('vocabulary')
        .select('*')
        .limit(10); // ×œ×•×§×—×™× 10 ××™×œ×™× ×œ×ª×¨×’×•×œ

      if (vocabData) {
        // ×”××¨×ª ×”××™×œ×™× ×œ×¤×•×¨××˜ ×©×œ ×›×¨×˜×™×¡×™×•×ª
        const formattedCards = vocabData.map(word => ({
          id: word.id, // ××©×ª××©×™× ×‘-ID ×©×œ ×”××™×œ×”
          content_id: word.id,
          word_he: word.word_he,    // ×”× ×” ×”×¢×‘×¨×™×ª!
          translit: word.translit,  // ×”× ×” ×”×”×’×™×™×”!
          meaning_en: word.meaning_en,
          difficulty: 0.3
        }));
        
        setCards(formattedCards);
      }
      
    } catch (e) {
      console.error("Error fetching study session:", e);
    } finally {
      setLoading(false);
    }
  }

  return { cards, stats, loading };
}
</file>

<file path="lib/fsrs.ts">
/**
 * FSRS (Free Spaced Repetition Scheduler) Algorithm v4 - Simplified Implementation
 * 
 * This is a simplified version of FSRS for the Hebrew Master LMS.
 * It calculates next review intervals based on stability and difficulty.
 */

export type Rating = 'again' | 'hard' | 'good' | 'easy'

export interface FSRSResult {
  newStability: number
  newDifficulty: number
  nextInterval: number // in days
  nextReviewDate: Date
}

export class FSRS {
  private static readonly BASE_FACTOR = 1.3
  private static readonly INTERVAL_SCALAR = 9 // For A1 level learners

  /**
   * Calculate next review parameters based on user rating
   * 
   * Formula:
   * - New Stability = Current Stability * (1 + Factor * Difficulty)
   * - Next Interval = Current Stability * Scalar
   * 
   * @param currentStability Current stability value (S in FSRS)
   * @param currentDifficulty Current difficulty value (D in FSRS, 0-1)
   * @param rating User's rating: 'again', 'hard', 'good', or 'easy'
   * @returns FSRSResult with new stability, difficulty, interval, and next review date
   */
  static calculateNextReview(
    currentStability: number,
    currentDifficulty: number,
    rating: Rating
  ): FSRSResult {
    let factor: number
    let newDifficulty: number = currentDifficulty

    // Determine factor and difficulty adjustment based on rating
    switch (rating) {
      case 'again':
        factor = 0.1 // Very low retention, reset stability
        newDifficulty = Math.min(1.0, currentDifficulty + 0.15) // Increase difficulty
        break
      case 'hard':
        factor = 0.5 // Low retention
        newDifficulty = Math.min(1.0, currentDifficulty + 0.05) // Slightly increase difficulty
        break
      case 'good':
        factor = 1.0 // Normal retention
        // Keep difficulty mostly stable
        break
      case 'easy':
        factor = 1.5 // High retention
        newDifficulty = Math.max(0.1, currentDifficulty - 0.05) // Slightly decrease difficulty
        break
    }

    // Calculate new stability: S_new = S_old * (1 + Factor * D)
    const newStability = Math.max(
      0.1, // Minimum stability
      currentStability * (1 + factor * this.BASE_FACTOR * currentDifficulty)
    )

    // Calculate next interval in days
    // For A1 level, use simpler intervals based on rating
    let nextInterval: number
    switch (rating) {
      case 'again':
        nextInterval = 0.042 // ~1 hour (in days)
        break
      case 'hard':
        nextInterval = 2 // 2 days
        break
      case 'good':
        nextInterval = 4 // 4 days
        break
      case 'easy':
        nextInterval = 7 // 7 days
        break
      default:
        nextInterval = 1
    }

    // Calculate next review date
    const nextReviewDate = new Date()
    nextReviewDate.setDate(nextReviewDate.getDate() + nextInterval)

    return {
      newStability,
      newDifficulty,
      nextInterval,
      nextReviewDate,
    }
  }

  /**
   * Get initial stability for a new card
   */
  static getInitialStability(): number {
    return 0.4 // Low initial stability for A1 learners
  }

  /**
   * Get initial difficulty for a new card
   */
  static getInitialDifficulty(): number {
    return 0.3 // Moderate initial difficulty
  }

  /**
   * Format interval for display
   */
  static formatInterval(intervalInDays: number): string {
    if (intervalInDays < 1) {
      const hours = Math.round(intervalInDays * 24)
      return hours === 1 ? '1 hour' : `${hours} hours`
    }
    if (intervalInDays === 1) {
      return '1 day'
    }
    return `${Math.round(intervalInDays)} days`
  }
}

// Export convenience function
export function calculateNextReview(
  currentStability: number,
  currentDifficulty: number,
  rating: Rating
): FSRSResult {
  return FSRS.calculateNextReview(currentStability, currentDifficulty, rating)
}
</file>

<file path="lib/seed-vocab.ts">
/**
 * Hebrew Vocabulary Seeding Script
 * 
 * This script inserts Hebrew vocabulary words from a JSON object
 * into the Supabase vocabulary table, handling duplicates gracefully.
 * 
 * Usage:
 * 1. Import your vocabulary JSON into the VOCAB_DATA constant below
 * 2. Run: npx tsx lib/seed-vocab.ts
 * 
 * Prerequisites:
 * - Set SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY in environment variables
 */

import { createClient } from '@supabase/supabase-js'
import type { Database } from '@/types/database'

// ============================================================================
// VOCABULARY DATA
// Paste your JSON array of Hebrew words here
// Expected format: Array of { hebrew, hebrew_unpointed, transliteration, ... }
// ============================================================================
const VOCAB_DATA: Array<{
  hebrew: string
  hebrew_unpointed: string
  transliteration?: string
  meaning_en: string
  meaning_fr?: string
  part_of_speech?: string
  gender?: string
  root_letters?: string
  audio_url?: string
  difficulty_level?: number
}> = [
  // Example entry (replace with your actual data):
  // {
  //   hebrew: '×›Ö¸Ö¼×ªÖ·×‘',
  //   hebrew_unpointed: '×›×ª×‘',
  //   transliteration: 'katav',
  //   meaning_en: 'to write',
  //   meaning_fr: 'Ã©crire',
  //   part_of_speech: 'verb',
  //   root_letters: '×›×ª×‘'
  // }
]

// ============================================================================
// CONFIGURATION
// ============================================================================
const supabaseUrl = process.env.SUPABASE_URL || process.env.NEXT_PUBLIC_SUPABASE_URL
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY

if (!supabaseUrl || !supabaseServiceKey) {
  throw new Error(
    'Missing environment variables. Please set:\n' +
    '- SUPABASE_URL or NEXT_PUBLIC_SUPABASE_URL\n' +
    '- SUPABASE_SERVICE_ROLE_KEY'
  )
}

// Create Supabase admin client (bypasses RLS)
const supabase = createClient<Database>(supabaseUrl, supabaseServiceKey, {
  auth: {
    autoRefreshToken: false,
    persistSession: false
  }
})

// ============================================================================
// SEEDING FUNCTIONS
// ============================================================================

/**
 * Ensures a root exists in the database, returns its ID
 */
async function ensureRoot(rootLetters: string | undefined): Promise<string | null> {
  if (!rootLetters || rootLetters.trim() === '') {
    return null
  }

  const trimmedRoot = rootLetters.trim()

  // Check if root exists
  const { data: existingRoot, error: fetchError } = await supabase
    .from('roots')
    .select('id')
    .eq('root_letters', trimmedRoot)
    .single()

  if (existingRoot) {
    return existingRoot.id
  }

  // Create new root if it doesn't exist
  const { data: newRoot, error: insertError } = await supabase
    .from('roots')
    .insert({
      root_letters: trimmedRoot,
      core_meaning_en: null,
      core_meaning_fr: null
    })
    .select('id')
    .single()

  if (insertError) {
    console.error(`Failed to create root "${trimmedRoot}":`, insertError.message)
    return null
  }

  return newRoot.id
}

/**
 * Inserts vocabulary word, checking for duplicates
 */
async function insertVocabularyWord(word: typeof VOCAB_DATA[0]): Promise<boolean> {
  try {
    // Resolve root_id if root_letters is provided
    let rootId: string | null = null
    if (word.root_letters) {
      rootId = await ensureRoot(word.root_letters)
    }

    // Check for duplicate (using unique index: hebrew_unpointed + meaning_en + part_of_speech)
    const { data: existing } = await supabase
      .from('vocabulary')
      .select('id, hebrew')
      .eq('hebrew_unpointed', word.hebrew_unpointed)
      .eq('meaning_en', word.meaning_en)
      .eq('part_of_speech', word.part_of_speech || null)
      .maybeSingle()

    if (existing) {
      console.log(`âš ï¸  Skipping duplicate: ${word.hebrew} (${word.meaning_en})`)
      return false
    }

    // Insert new vocabulary word
    const { data, error } = await supabase
      .from('vocabulary')
      .insert({
        hebrew: word.hebrew,
        hebrew_unpointed: word.hebrew_unpointed,
        transliteration: word.transliteration || null,
        meaning_en: word.meaning_en,
        meaning_fr: word.meaning_fr || null,
        part_of_speech: word.part_of_speech || null,
        gender: word.gender || null,
        root_id: rootId,
        audio_url: word.audio_url || null,
        difficulty_level: word.difficulty_level || 1
      })
      .select('id')
      .single()

    if (error) {
      console.error(`âŒ Failed to insert "${word.hebrew}":`, error.message)
      return false
    }

    console.log(`âœ… Inserted: ${word.hebrew} (${word.meaning_en})`)
    return true

  } catch (error) {
    console.error(`âŒ Error processing "${word.hebrew}":`, error)
    return false
  }
}

/**
 * Main seeding function
 */
async function seedVocabulary() {
  if (VOCAB_DATA.length === 0) {
    console.warn('âš ï¸  VOCAB_DATA is empty. Please add vocabulary data to the JSON array.')
    return
  }

  console.log(`\nğŸŒ± Starting vocabulary seeding...`)
  console.log(`ğŸ“Š Total words to process: ${VOCAB_DATA.length}\n`)

  let successCount = 0
  let skipCount = 0
  let errorCount = 0

  // Process words in batches to avoid overwhelming the database
  const BATCH_SIZE = 50
  for (let i = 0; i < VOCAB_DATA.length; i += BATCH_SIZE) {
    const batch = VOCAB_DATA.slice(i, i + BATCH_SIZE)
    const batchPromises = batch.map(word => insertVocabularyWord(word))

    const results = await Promise.all(batchPromises)

    results.forEach(result => {
      if (result === true) {
        successCount++
      } else {
        // Could be duplicate (skip) or error
        skipCount++
      }
    })

    console.log(`ğŸ“¦ Processed batch ${Math.floor(i / BATCH_SIZE) + 1}/${Math.ceil(VOCAB_DATA.length / BATCH_SIZE)}\n`)
  }

  // Final summary
  console.log('\n' + '='.repeat(50))
  console.log('ğŸ“ˆ Seeding Summary:')
  console.log(`âœ… Successfully inserted: ${successCount}`)
  console.log(`âš ï¸  Skipped (duplicates): ${skipCount - errorCount}`)
  console.log(`âŒ Errors: ${errorCount}`)
  console.log(`ğŸ“Š Total processed: ${VOCAB_DATA.length}`)
  console.log('='.repeat(50) + '\n')
}

// ============================================================================
// EXECUTION
// ============================================================================
if (require.main === module) {
  seedVocabulary()
    .then(() => {
      console.log('âœ¨ Seeding complete!')
      process.exit(0)
    })
    .catch((error) => {
      console.error('ğŸ’¥ Seeding failed:', error)
      process.exit(1)
    })
}

export { seedVocabulary, insertVocabularyWord, ensureRoot }
</file>

<file path="lib/supabase.ts">
import { createClient } from '@supabase/supabase-js'
import type { Database } from '@/types/database'

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!

if (!supabaseUrl || !supabaseAnonKey) {
  throw new Error('Missing Supabase environment variables')
}

export const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey)

// Server-side client for Server Actions
export const createServerClient = () => {
  const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY!
  
  if (!supabaseServiceKey) {
    throw new Error('Missing SUPABASE_SERVICE_ROLE_KEY environment variable')
  }

  return createClient<Database>(supabaseUrl, supabaseServiceKey, {
    auth: {
      autoRefreshToken: false,
      persistSession: false
    }
  })
}
</file>

<file path="messages/en.json">
{
    "nav": {
      "dashboard": "My Path",
      "alphabet": "Alphabet",
      "nikud": "Nikud",
      "vocabulary": "Vocabulary",
      "flashcards": "Flashcards",
      "quiz": "Quiz Mode",
      "settings": "Settings",
      "logout": "Log Out"
    },
    "vocabulary": {
      "title": "Word Bank",
      "addWord": "Add Word",
      "hebrewWord": "Hebrew Word",
      "translation": "Translation",
      "noWords": "No words yet",
      "addFirst": "Add your first word to start learning!",
      "loading": "LOADING WORD BANK...",
      "hebrewPlaceholder": "Hebrew Word (×¢×‘×¨×™×ª)",
      "translationPlaceholder": "Translation (house)",
      "new": "New",
      "listen": "Listen",
      "addError": "Failed to add word: "
    },
    "flashcards": {
      "clickToFlip": "Click to flip",
      "loading": "Loading practice...",
      "congrats": "Well done!",
      "completedSession": "You completed the practice session!",
      "backToDashboard": "Back to Dashboard",
      "again": "Again",
      "hard": "Hard",
      "good": "Good",
      "easy": "Easy"
    },
    "dashboard": {
      "loading": "Loading Dashboard...",
      "greeting": "Shalom",
      "subtitle": "Your Hebrew learning journey is evolving.",
      "welcome": "Welcome",
      "student": "Student",
      "stats": {
        "totalXP": "Total XP",
        "streak": "Streak",
        "words": "Words",
        "mastered": "Mastered",
        "wordsLearned": "Words Learned",
        "currentStreak": "Day Streak",
        "cardsReviewed": "Cards Reviewed"
      },
      "modules": {
        "alphabet": "Alphabet",
        "alphabetStats": "22 letters",
        "nikud": "Nikud",
        "nikudStats": "10 vowels",
        "vocabulary": "Vocabulary",
        "items": "items",
        "flashcards": "Flashcards",
        "due": "due",
        "done": "Done!",
        "quiz": "Quiz Mode",
        "earnXP": "Earn XP"
      },
      "weeklyActivity": "Weekly Activity",
      "srsProgress": "SRS Progress"
    },
    "alphabet": {
      "loading": "Loading alphabet...",
      "backToDashboard": "Back to Dashboard",
      "title": "The Hebrew Alphabet",
      "subtitle": "22 letters, each with its own story",
      "show": "Show",
      "cursive": "Cursive",
      "print": "Print",
      "playSound": "Play Sound",
      "pronounced": "Pronounced",
      "sound": "Sound",
      "tip": "Tip",
      "numericalValue": "Numerical Value",
      "variantForm": "Variant Form",
      "withoutDagesh": "Without dagesh (dot)",
      "clickAnyLetter": "Click any letter above to learn more about it"
    },
    "nikud": {
      "loading": "Loading vowel points...",
      "backToDashboard": "Back to Dashboard",
      "title": "Nikud - Vowel Points",
      "subtitle": "Master the 10 essential vowel markings",
      "vowelPoints": "10 Vowel Points",
      "soundCategories": "Sound Categories",
      "aSounds": "A sounds",
      "eSounds": "E sounds",
      "iSounds": "I sounds",
      "oSounds": "O sounds",
      "uSounds": "U sounds",
      "reduced": "Reduced",
      "playSound": "Play Sound",
      "vowelPointNumber": "Vowel Point",
      "sound": "Sound",
      "symbol": "Symbol",
      "thisMark": "This is the",
      "writtenPosition": "Written",
      "with": "with",
      "under": "under",
      "theLetter": "the letter",
      "category": "Category",
      "soundFamily": "sound family",
      "learningTip": "Learning Tip",
      "tipText": "Hebrew vowels are not letters - they're dots and lines added to consonants. Modern Hebrew texts often skip them (unpointed text), but they're essential for learning. Master these 10 points and you'll be able to read anything!"
    },
    "landing": {
      "login": "Log In",
      "startFree": "Start Learning Free",
      "badge": "The Smart Way to Learn Hebrew",
      "heroTitle1": "Speak Hebrew with Confidence",
      "heroTitle2": "in 30 Days",
      "heroSubtitle": "An advanced system that adapts to your pace. Daily practice, word games, and smart progress tracking.",
      "startNow": "Start Now for Free",
      "howItWorks": "How Does It Work?",
      "feature1Title": "Personalized Learning",
      "feature1Desc": "Our algorithm identifies your strengths and weaknesses and builds a personal plan.",
      "feature2Title": "Real-Time Speech Practice",
      "feature2Desc": "Advanced speech recognition technology to help you improve pronunciation and confidence.",
      "feature3Title": "Progress Tracking",
      "feature3Desc": "Smart dashboard showing exactly how much you've improved and when to review material."
    }
  }
</file>

<file path="messages/fr.json">
{
    "nav": {
      "dashboard": "Mon Parcours",
      "alphabet": "Alphabet",
      "nikud": "Nikud",
      "vocabulary": "Vocabulaire",
      "flashcards": "Cartes",
      "quiz": "Mode Quiz",
      "settings": "ParamÃ¨tres",
      "logout": "DÃ©connexion"
    },
    "vocabulary": {
      "title": "Banque de mots",
      "addWord": "Ajouter un mot",
      "hebrewWord": "Mot en hÃ©breu",
      "translation": "Traduction",
      "noWords": "Pas encore de mots",
      "addFirst": "Ajoutez votre premier mot pour commencer Ã  apprendre!",
      "loading": "CHARGEMENT DE LA BANQUE DE MOTS...",
      "hebrewPlaceholder": "Mot en hÃ©breu (×¢×‘×¨×™×ª)",
      "translationPlaceholder": "Traduction (maison)",
      "new": "Nouveau",
      "listen": "Ã‰couter",
      "addError": "Ã‰chec de l'ajout du mot: "
    },
    "flashcards": {
      "clickToFlip": "Cliquez pour retourner",
      "loading": "Chargement de la pratique...",
      "congrats": "Bravo!",
      "completedSession": "Vous avez terminÃ© la session de pratique!",
      "backToDashboard": "Retour au tableau de bord",
      "again": "Encore",
      "hard": "Difficile",
      "good": "Bien",
      "easy": "Facile"
    },
    "dashboard": {
      "loading": "Chargement du tableau de bord...",
      "greeting": "Shalom",
      "subtitle": "Votre parcours d'apprentissage de l'hÃ©breu Ã©volue.",
      "welcome": "Bienvenue",
      "student": "Ã‰tudiant",
      "stats": {
        "totalXP": "XP Total",
        "streak": "SÃ©rie",
        "words": "Mots",
        "mastered": "MaÃ®trisÃ©s",
        "wordsLearned": "Mots Appris",
        "currentStreak": "SÃ©rie de Jours",
        "cardsReviewed": "Cartes RÃ©visÃ©es"
      },
      "modules": {
        "alphabet": "Alphabet",
        "alphabetStats": "22 lettres",
        "nikud": "Nikud",
        "nikudStats": "10 voyelles",
        "vocabulary": "Vocabulaire",
        "items": "Ã©lÃ©ments",
        "flashcards": "Cartes",
        "due": "Ã  revoir",
        "done": "TerminÃ©!",
        "quiz": "Mode Quiz",
        "earnXP": "Gagner XP"
      },
      "weeklyActivity": "ActivitÃ© Hebdomadaire",
      "srsProgress": "ProgrÃ¨s SRS"
    },
    "alphabet": {
      "loading": "Chargement de l'alphabet...",
      "backToDashboard": "Retour au tableau de bord",
      "title": "L'Alphabet HÃ©breu",
      "subtitle": "22 lettres, chacune avec sa propre histoire",
      "show": "Afficher",
      "cursive": "Cursive",
      "print": "ImprimÃ©",
      "playSound": "Jouer le son",
      "pronounced": "PrononcÃ©",
      "sound": "Son",
      "tip": "Conseil",
      "numericalValue": "Valeur NumÃ©rique",
      "variantForm": "Forme Variante",
      "withoutDagesh": "Sans dagesh (point)",
      "clickAnyLetter": "Cliquez sur n'importe quelle lettre ci-dessus pour en savoir plus"
    },
    "nikud": {
      "loading": "Chargement des points de voyelles...",
      "backToDashboard": "Retour au tableau de bord",
      "title": "Nikud - Points Vocaliques",
      "subtitle": "MaÃ®trisez les 10 marques vocaliques essentielles",
      "vowelPoints": "10 Points Vocaliques",
      "soundCategories": "CatÃ©gories de Sons",
      "aSounds": "Sons A",
      "eSounds": "Sons E",
      "iSounds": "Sons I",
      "oSounds": "Sons O",
      "uSounds": "Sons U",
      "reduced": "RÃ©duit",
      "playSound": "Jouer le son",
      "vowelPointNumber": "Point Vocalique",
      "sound": "Son",
      "symbol": "Symbole",
      "thisMark": "Ceci est la marque",
      "writtenPosition": "Ã‰crit",
      "with": "avec",
      "under": "sous",
      "theLetter": "la lettre",
      "category": "CatÃ©gorie",
      "soundFamily": "famille de sons",
      "learningTip": "Conseil d'Apprentissage",
      "tipText": "Les voyelles hÃ©braÃ¯ques ne sont pas des lettres - ce sont des points et des lignes ajoutÃ©s aux consonnes. Les textes hÃ©breux modernes les omettent souvent (texte non pointÃ©), mais ils sont essentiels pour l'apprentissage. MaÃ®trisez ces 10 points et vous pourrez tout lire!"
    },
    "landing": {
      "login": "Connexion",
      "startFree": "Commencer Gratuitement",
      "badge": "La ManiÃ¨re Intelligente d'Apprendre l'HÃ©breu",
      "heroTitle1": "Parler HÃ©breu avec Confiance",
      "heroTitle2": "en 30 Jours",
      "heroSubtitle": "Un systÃ¨me avancÃ© qui s'adapte Ã  votre rythme. Pratique quotidienne, jeux de mots et suivi intelligent des progrÃ¨s.",
      "startNow": "Commencer Maintenant Gratuitement",
      "howItWorks": "Comment Ã‡a Marche?",
      "feature1Title": "Apprentissage PersonnalisÃ©",
      "feature1Desc": "Notre algorithme identifie vos forces et faiblesses et construit un plan personnel.",
      "feature2Title": "Pratique de la Parole en Temps RÃ©el",
      "feature2Desc": "Technologie avancÃ©e de reconnaissance vocale pour amÃ©liorer votre prononciation et confiance.",
      "feature3Title": "Suivi des ProgrÃ¨s",
      "feature3Desc": "Tableau de bord intelligent montrant exactement vos progrÃ¨s et quand rÃ©viser le matÃ©riel."
    }
  }
</file>

<file path="messages/he.json">
{
    "nav": {
      "dashboard": "×”××¡×œ×•×œ ×©×œ×™",
      "alphabet": "××œ×£-×‘×™×ª",
      "nikud": "× ×™×§×•×“",
      "vocabulary": "××•×¦×¨ ××™×œ×™×",
      "flashcards": "×›×¨×˜×™×¡×™×•×ª",
      "quiz": "××¦×‘ ×—×™×“×•×Ÿ",
      "settings": "×”×’×“×¨×•×ª",
      "logout": "×”×ª× ×ª×§"
    },
    "vocabulary": {
      "title": "×‘× ×§ ××™×œ×™×",
      "addWord": "×”×•×¡×£ ××™×œ×”",
      "hebrewWord": "××™×œ×” ×‘×¢×‘×¨×™×ª",
      "translation": "×ª×¨×’×•×",
      "noWords": "××™×Ÿ ×¢×“×™×™×Ÿ ××™×œ×™×",
      "addFirst": "×”×•×¡×£ ××ª ×”××™×œ×” ×”×¨××©×•× ×” ×©×œ×š ×›×“×™ ×œ×”×ª×—×™×œ ×œ×œ××•×“!",
      "loading": "×˜×•×¢×Ÿ ×‘× ×§ ××™×œ×™×...",
      "hebrewPlaceholder": "××™×œ×” ×‘×¢×‘×¨×™×ª (×¢×‘×¨×™×ª)",
      "translationPlaceholder": "×ª×¨×’×•× (×‘×™×ª)",
      "new": "×—×“×©",
      "listen": "×”×§×©×‘",
      "addError": "×©×’×™××” ×‘×”×•×¡×¤×ª ××™×œ×”: "
    },
    "flashcards": {
      "clickToFlip": "×œ×—×¥ ×œ×”×¤×™×›×”",
      "loading": "×˜×•×¢×Ÿ ×ª×¨×’×•×œ...",
      "congrats": "×›×œ ×”×›×‘×•×“!",
      "completedSession": "×”×©×œ××ª ××ª ××¤×’×© ×”×ª×¨×’×•×œ!",
      "backToDashboard": "×—×–×¨×” ×œ×“×©×‘×•×¨×“",
      "again": "×©×•×‘",
      "hard": "×§×©×”",
      "good": "×˜×•×‘",
      "easy": "×§×œ"
    },
    "dashboard": {
      "loading": "×˜×•×¢×Ÿ ×“×©×‘×•×¨×“...",
      "greeting": "×©×œ×•×",
      "subtitle": "××¡×¢ ×”×œ×™××•×“ ×©×œ×š ×‘×¢×‘×¨×™×ª ××ª×¤×ª×—.",
      "welcome": "×‘×¨×•×š ×”×‘×",
      "student": "×ª×œ××™×“",
      "stats": {
        "totalXP": "× ×§×•×“×•×ª × ×™×¡×™×•×Ÿ",
        "streak": "×¨×¦×£",
        "words": "××™×œ×™×",
        "mastered": "× ×©×œ×˜×•",
        "wordsLearned": "××™×œ×™× ×©× ×œ××“×•",
        "currentStreak": "×¨×¦×£ ×™××™×",
        "cardsReviewed": "×›×¨×˜×™×¡×™× × ×¡×§×¨×•"
      },
      "modules": {
        "alphabet": "××œ×£-×‘×™×ª",
        "alphabetStats": "22 ××•×ª×™×•×ª",
        "nikud": "× ×™×§×•×“",
        "nikudStats": "10 ×ª× ×•×¢×•×ª",
        "vocabulary": "××•×¦×¨ ××™×œ×™×",
        "items": "×¤×¨×™×˜×™×",
        "flashcards": "×›×¨×˜×™×¡×™×•×ª",
        "due": "×××ª×™× ×™×",
        "done": "×¡×™×™××ª!",
        "quiz": "××¦×‘ ×—×™×“×•×Ÿ",
        "earnXP": "×¦×‘×•×¨ × ×§×•×“×•×ª"
      },
      "weeklyActivity": "×¤×¢×™×œ×•×ª ×©×‘×•×¢×™×ª",
      "srsProgress": "×”×ª×§×“××•×ª SRS"
    },
    "alphabet": {
      "loading": "×˜×•×¢×Ÿ ××œ×¤×‘×™×ª...",
      "backToDashboard": "×—×–×¨×” ×œ×“×©×‘×•×¨×“",
      "title": "×”××œ×¤×‘×™×ª ×”×¢×‘×¨×™",
      "subtitle": "22 ××•×ª×™×•×ª, ×›×œ ××—×ª ×¢× ×”×¡×™×¤×•×¨ ×©×œ×”",
      "show": "×”×¦×’",
      "cursive": "×›×ª×‘ ×¨×”×•×˜",
      "print": "×›×ª×‘ ×“×¤×•×¡",
      "playSound": "×”×©××¢ ×¦×œ×™×œ",
      "pronounced": "××‘×•×˜×",
      "sound": "×¦×œ×™×œ",
      "tip": "×˜×™×¤",
      "numericalValue": "×¢×¨×š ××¡×¤×¨×™",
      "variantForm": "×¦×•×¨×” ×—×œ×•×¤×™×ª",
      "withoutDagesh": "×œ×œ× ×“×’×© (× ×§×•×“×”)",
      "clickAnyLetter": "×œ×—×¥ ×¢×œ ××•×ª ×›×œ×©×”×™ ×œ××¢×œ×” ×›×“×™ ×œ×œ××•×“ ×¢×œ×™×” ×™×•×ª×¨"
    },
    "nikud": {
      "loading": "×˜×•×¢×Ÿ × ×™×§×•×“...",
      "backToDashboard": "×—×–×¨×” ×œ×“×©×‘×•×¨×“",
      "title": "× ×™×§×•×“ - ×¡×™×× ×™ ×ª× ×•×¢×•×ª",
      "subtitle": "×©×œ×•×˜ ×‘-10 ×¡×™×× ×™ ×”× ×™×§×•×“ ×”×—×™×•× ×™×™×",
      "vowelPoints": "10 ×¡×™×× ×™ × ×™×§×•×“",
      "soundCategories": "×§×˜×’×•×¨×™×•×ª ×¦×œ×™×œ×™×",
      "aSounds": "×¦×œ×™×œ×™ A",
      "eSounds": "×¦×œ×™×œ×™ E",
      "iSounds": "×¦×œ×™×œ×™ I",
      "oSounds": "×¦×œ×™×œ×™ O",
      "uSounds": "×¦×œ×™×œ×™ U",
      "reduced": "××•×¤×—×ª",
      "playSound": "×”×©××¢ ×¦×œ×™×œ",
      "vowelPointNumber": "×¡×™××Ÿ × ×™×§×•×“",
      "sound": "×¦×œ×™×œ",
      "symbol": "×¡×™××Ÿ",
      "thisMark": "×–×” ×”×¡×™××Ÿ",
      "writtenPosition": "× ×›×ª×‘",
      "with": "×¢×",
      "under": "××ª×—×ª ×œ",
      "theLetter": "×”××•×ª",
      "category": "×§×˜×’×•×¨×™×”",
      "soundFamily": "××©×¤×—×ª ×¦×œ×™×œ×™×",
      "learningTip": "×˜×™×¤ ×œ×œ××™×“×”",
      "tipText": "×ª× ×•×¢×•×ª ×¢×‘×¨×™×•×ª ××™× ×Ÿ ××•×ª×™×•×ª - ×”×Ÿ × ×§×•×“×•×ª ×•×§×•×•×™× ×©× ×•×¡×¤×™× ×œ×¢×™×¦×•×¨×™×. ×˜×§×¡×˜×™× ×¢×‘×¨×™×™× ××•×“×¨× ×™×™× ××“×œ×’×™× ×¢×œ×™×”× ×œ×¨×•×‘ (×˜×§×¡×˜ ×œ× ×× ×•×§×“), ××š ×”× ×—×™×•× ×™×™× ×œ×œ××™×“×”. ×©×œ×•×˜ ×‘-10 ×”× ×§×•×“×•×ª ×”××œ×” ×•×ª×•×›×œ ×œ×§×¨×•× ×”×›×œ!"
    },
    "landing": {
      "login": "×”×ª×—×‘×¨×•×ª",
      "startFree": "×”×ª×—×œ ×œ×œ××•×“ ×—×™× ×",
      "badge": "×”×“×¨×š ×”×—×›××” ×œ×œ××•×“ ×¢×‘×¨×™×ª",
      "heroTitle1": "×œ×“×‘×¨ ×¢×‘×¨×™×ª ×‘×‘×™×˜×—×•×Ÿ",
      "heroTitle2": "×ª×•×š 30 ×™×•×",
      "heroSubtitle": "×”××¢×¨×›×ª ×”××ª×§×“××ª ×©××ª××™××” ××ª ×¢×¦××” ×œ×§×¦×‘ ×©×œ×š. ×ª×¨×’×•×œ ×™×•××™×•××™, ××©×—×§×™ ××™×œ×™× ×•××¢×§×‘ ×”×ª×§×“××•×ª ×—×›×.",
      "startNow": "××ª×—×™×œ×™× ×¢×›×©×™×• ×‘×—×™× ×",
      "howItWorks": "××™×š ×–×” ×¢×•×‘×“?",
      "feature1Title": "×œ××™×“×” ××•×ª×××ª ××™×©×™×ª",
      "feature1Desc": "×”××œ×’×•×¨×™×ª× ×©×œ× ×• ××–×”×” ××ª × ×§×•×“×•×ª ×”×—×•×–×§ ×•×”×—×•×œ×©×” ×©×œ×š ×•×‘×•× ×” ×ª×•×›× ×™×ª ××™×©×™×ª.",
      "feature2Title": "×ª×¨×’×•×œ ×“×™×‘×•×¨ ×‘×–××Ÿ ×××ª",
      "feature2Desc": "×˜×›× ×•×œ×•×’×™×™×ª ×–×™×”×•×™ ×“×™×‘×•×¨ ××ª×§×“××ª ×©×ª×¢×–×•×¨ ×œ×š ×œ×©×¤×¨ ××ª ×”××‘×˜× ×•×”×‘×™×˜×—×•×Ÿ.",
      "feature3Title": "××¢×§×‘ ×”×ª×§×“××•×ª",
      "feature3Desc": "×“×©×‘×•×¨×“ ×—×›× ×©××¨××” ×œ×š ×‘×“×™×•×§ ×›××” ×”×©×ª×¤×¨×ª ×•××ª×™ ×›×“××™ ×œ×—×–×•×¨ ×¢×œ ×—×•××¨."
    }
  }
</file>

<file path="postcss.config.js">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="supabase/migrations/001_initial_schema.sql">
-- Hebrew Master: Initial Schema Migration
-- Semitic Morphology Engine
-- Created: 2024

-- Enable UUID extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- ============================================================================
-- 1. PROFILES TABLE
-- Extends auth.users with premium features and gamification
-- ============================================================================
CREATE TABLE public.profiles (
    id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
    is_premium BOOLEAN DEFAULT false NOT NULL,
    current_streak INTEGER DEFAULT 0 NOT NULL,
    total_xp INTEGER DEFAULT 0 NOT NULL,
    created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
    updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

-- Enable RLS on profiles
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;

-- Profiles RLS policies
CREATE POLICY "Users can view their own profile"
    ON public.profiles FOR SELECT
    USING (auth.uid() = id);

CREATE POLICY "Users can update their own profile"
    ON public.profiles FOR UPDATE
    USING (auth.uid() = id);

-- Function to automatically create profile on user signup
CREATE OR REPLACE FUNCTION public.handle_new_user()
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO public.profiles (id, is_premium, current_streak, total_xp)
    VALUES (
        NEW.id,
        false,
        0,
        0
    );
    RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Trigger to create profile on user creation
CREATE TRIGGER on_auth_user_created
    AFTER INSERT ON auth.users
    FOR EACH ROW EXECUTE FUNCTION public.handle_new_user();

-- ============================================================================
-- 2. ROOTS TABLE
-- Core abstract unit of Semitic morphology
-- ============================================================================
CREATE TABLE public.roots (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    root_letters VARCHAR(10) NOT NULL,
    core_meaning_en VARCHAR(255),
    core_meaning_fr VARCHAR(255),
    created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
    updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
    CONSTRAINT unique_root_letters UNIQUE (root_letters)
);

-- Index for faster root lookups
CREATE INDEX idx_roots_letters ON public.roots(root_letters);

-- Enable RLS on roots (public read, admin write)
ALTER TABLE public.roots ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Roots are viewable by everyone"
    ON public.roots FOR SELECT
    USING (true);

-- ============================================================================
-- 3. VOCABULARY TABLE
-- The lexicon: Hebrew words with morphological data
-- ============================================================================
CREATE TABLE public.vocabulary (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    hebrew VARCHAR(255) NOT NULL,
    hebrew_unpointed VARCHAR(255) NOT NULL,
    transliteration VARCHAR(255),
    meaning_en VARCHAR(500),
    meaning_fr VARCHAR(500),
    part_of_speech VARCHAR(50),
    gender VARCHAR(20),
    root_id UUID REFERENCES public.roots(id) ON DELETE SET NULL,
    audio_url TEXT,
    difficulty_level INTEGER DEFAULT 1 NOT NULL,
    created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
    updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
    CONSTRAINT valid_difficulty_level CHECK (difficulty_level >= 1 AND difficulty_level <= 10)
);

-- Indexes for vocabulary queries
CREATE INDEX idx_vocabulary_root_id ON public.vocabulary(root_id);
CREATE INDEX idx_vocabulary_hebrew_unpointed ON public.vocabulary(hebrew_unpointed);
CREATE INDEX idx_vocabulary_difficulty ON public.vocabulary(difficulty_level);
CREATE INDEX idx_vocabulary_part_of_speech ON public.vocabulary(part_of_speech);

-- Unique constraint: prevent duplicate vocabulary entries
CREATE UNIQUE INDEX idx_vocabulary_unique_entry ON public.vocabulary(
    hebrew_unpointed,
    meaning_en,
    part_of_speech
);

-- Enable RLS on vocabulary
ALTER TABLE public.vocabulary ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Vocabulary is viewable by everyone"
    ON public.vocabulary FOR SELECT
    USING (true);

-- ============================================================================
-- 4. USER_PROGRESS TABLE
-- FSRS Algorithm State: Stores stability and difficulty for spaced repetition
-- ============================================================================
CREATE TABLE public.user_progress (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
    vocab_id UUID REFERENCES public.vocabulary(id) ON DELETE CASCADE NOT NULL,
    stability FLOAT DEFAULT 0 NOT NULL,
    difficulty FLOAT DEFAULT 0 NOT NULL,
    next_review_date TIMESTAMPTZ DEFAULT NOW() NOT NULL,
    last_review_date TIMESTAMPTZ,
    review_count INTEGER DEFAULT 0 NOT NULL,
    created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
    updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
    CONSTRAINT valid_stability CHECK (stability >= 0),
    CONSTRAINT valid_difficulty CHECK (difficulty >= 0 AND difficulty <= 1),
    CONSTRAINT unique_user_vocab UNIQUE (user_id, vocab_id)
);

-- Indexes for efficient querying
CREATE INDEX idx_user_progress_user_id ON public.user_progress(user_id);
CREATE INDEX idx_user_progress_vocab_id ON public.user_progress(vocab_id);
CREATE INDEX idx_user_progress_next_review ON public.user_progress(user_id, next_review_date);
CREATE INDEX idx_user_progress_due_reviews ON public.user_progress(next_review_date)
    WHERE next_review_date <= NOW();

-- Enable RLS on user_progress
ALTER TABLE public.user_progress ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own progress"
    ON public.user_progress FOR SELECT
    USING (auth.uid() = user_id);

CREATE POLICY "Users can insert their own progress"
    ON public.user_progress FOR INSERT
    WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own progress"
    ON public.user_progress FOR UPDATE
    USING (auth.uid() = user_id);

-- ============================================================================
-- 5. UPDATED_AT TRIGGER FUNCTION
-- Automatically update updated_at timestamp
-- ============================================================================
CREATE OR REPLACE FUNCTION public.update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Apply updated_at triggers
CREATE TRIGGER update_profiles_updated_at
    BEFORE UPDATE ON public.profiles
    FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();

CREATE TRIGGER update_roots_updated_at
    BEFORE UPDATE ON public.roots
    FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();

CREATE TRIGGER update_vocabulary_updated_at
    BEFORE UPDATE ON public.vocabulary
    FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();

CREATE TRIGGER update_user_progress_updated_at
    BEFORE UPDATE ON public.user_progress
    FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();

-- ============================================================================
-- 6. COMMENTS FOR DOCUMENTATION
-- ============================================================================
COMMENT ON TABLE public.profiles IS 'User profiles extending auth.users with premium status and gamification metrics';
COMMENT ON TABLE public.roots IS 'Semitic roots: abstract morphological units (e.g., ×›×ª×‘ = writing)';
COMMENT ON TABLE public.vocabulary IS 'Hebrew vocabulary lexicon with morphological annotations';
COMMENT ON TABLE public.user_progress IS 'FSRS algorithm state for spaced repetition scheduling';
COMMENT ON COLUMN public.user_progress.stability IS 'S (Stability) in FSRS: interval until next review';
COMMENT ON COLUMN public.user_progress.difficulty IS 'D (Difficulty) in FSRS: how hard the card is (0-1)';
COMMENT ON COLUMN public.user_progress.next_review_date IS 'Next scheduled review based on FSRS calculation';
</file>

<file path="tailwind.config.ts">
import type { Config } from "tailwindcss";

const config: Config = {
  content: [
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      colors: {
        background: "var(--background)",
        foreground: "var(--foreground)",
      },
    },
  },
  plugins: [],
};
export default config;
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
</file>

<file path="types/database.ts">
export type Json =
  | string
  | number
  | boolean
  | null
  | { [key: string]: Json | undefined }
  | Json[]

export interface Database {
  public: {
    Tables: {
      roots: {
        Row: {
          id: string
          root_letters: string
          meaning_core: string | null
          gizra_type: string | null
          created_at?: string
        }
        Insert: {
          id?: string
          root_letters: string
          meaning_core?: string | null
          gizra_type?: string | null
          created_at?: string
        }
        Update: {
          id?: string
          root_letters?: string
          meaning_core?: string | null
          gizra_type?: string | null
          created_at?: string
        }
      }
      binyanim: {
        Row: {
          id: string
          name_hebrew: string
          name_english: string
          grammatical_function: string | null
          created_at?: string
        }
        Insert: {
          id?: string
          name_hebrew: string
          name_english: string
          grammatical_function?: string | null
          created_at?: string
        }
        Update: {
          id?: string
          name_hebrew?: string
          name_english?: string
          grammatical_function?: string | null
          created_at?: string
        }
      }
      verbs: {
        Row: {
          id: string
          root_id: string
          binyan_id: string
          infinitive_nikud: string | null
          translation_eng: string | null
          difficulty_level: number
          created_at?: string
        }
        Insert: {
          id?: string
          root_id: string
          binyan_id: string
          infinitive_nikud?: string | null
          translation_eng?: string | null
          difficulty_level?: number
          created_at?: string
        }
        Update: {
          id?: string
          root_id?: string
          binyan_id?: string
          infinitive_nikud?: string | null
          translation_eng?: string | null
          difficulty_level?: number
          created_at?: string
        }
      }
      reviews: {
        Row: {
          id: string
          user_id: string
          card_id: string
          stability: number
          difficulty: number
          last_review: string
          next_review: string
          created_at?: string
        }
        Insert: {
          id?: string
          user_id: string
          card_id: string
          stability?: number
          difficulty?: number
          last_review?: string
          next_review?: string
          created_at?: string
        }
        Update: {
          id?: string
          user_id?: string
          card_id?: string
          stability?: number
          difficulty?: number
          last_review?: string
          next_review?: string
          created_at?: string
        }
      }
    }
    Views: {
      [_ in never]: never
    }
    Functions: {
      [_ in never]: never
    }
    Enums: {
      [_ in never]: never
    }
  }
}
</file>

<file path="app/api/migrate-transliterations/route.ts">
import { NextResponse } from 'next/server';
import { createClient } from '@supabase/supabase-js';
import OpenAI from 'openai';

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

const TRANSLITERATION_MAP: Record<string, string> = {
  '×‘Ö·Ö¼×™Ö´×ª': 'bayit',
  '×œÖ¸×‘Ö¸×Ÿ': 'lavan',
  '×™Ö¸×¨Ö¹×§': 'yarok',
  '×‘Ö·Ö¼×ª': 'bat',
  '×¦Ö¸×”Ö¹×‘': 'tsahov',
  '×¡×‘×‘×”': 'sababa',
  '×œÖ¸×œÖ¶×›Ö¶×ª': 'laleket',
  '×©Ö¸××—Ö¹×¨': 'shachor',
  '×—Ö¸×ª×•Ö¼×œ': 'chatul',
  '××•Ö¹×›Ö¶×œ': 'ochel',
  '×œÖ¶×—Ö¶×': 'lechem',
  '×¡Ö·×‘Ö¸Ö¼×': 'saba',
  '×œÖ·×™Ö°×œÖ¸×” ×˜×•Ö¹×‘': 'layla tov',
  '×œÖ°×“Ö·×‘ÖµÖ¼×¨': 'ledaber',
  '×‘ÖµÖ¼×Ÿ': 'ben',
  '×™Ö¸×¨Öµ×—Ö·': 'yareach',
  '×§Ö¸×¤Ö¶×”': 'kafe',
  '×Ö¸×“Ö¹×': 'adom'
};

async function getAITransliteration(word: string): Promise<string> {
  try {
    const response = await openai.chat.completions.create({
      model: "gpt-4o-mini",
      messages: [
        {
          role: "system",
          content: "You are a Hebrew linguistics expert. Transliterate the given Hebrew word into modern Israeli phonetic English. Use 'ch' for Chet/Khaf, 'v' for Vet, etc. Provide ONLY the transliterated word in lowercase, no punctuation."
        },
        { role: "user", content: word }
      ],
      temperature: 0,
    });
    return response.choices[0].message.content?.trim().toLowerCase() || "";
  } catch (error) {
    console.error("AI Transliteration failed:", error);
    return "";
  }
}

export async function POST(req: Request) {
  const supabase = createClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.SUPABASE_SERVICE_ROLE_KEY!
  );

  try {
    const { data: words, error } = await supabase
      .from('srs_cards')
      .select('id, front')
      .is('transliteration', null); // ××¢×“×›×Ÿ ×¨×§ ××™×œ×™× ×©×—×¡×¨ ×œ×”×Ÿ ×ª×¢×ª×™×§

    if (error) throw error;
    if (!words?.length) return NextResponse.json({ message: 'No new words to update' });

    let updatedCount = 0;

    for (const word of words) {
      if (!word.front) continue;

      // 1. × ×¡×™×•×Ÿ ××”××¤×” ×”×™×“× ×™×ª
      let finalTrans = TRANSLITERATION_MAP[word.front];

      // 2. ×’×™×‘×•×™ AI ×× ×”××™×œ×” ×œ× ×‘××¤×”
      if (!finalTrans) {
        finalTrans = await getAITransliteration(word.front);
      }

      if (finalTrans) {
        const { error: updateError } = await supabase
          .from('srs_cards')
          .update({ transliteration: finalTrans })
          .eq('id', word.id);

        if (!updateError) updatedCount++;
      }
    }

    return NextResponse.json({ 
      success: true, 
      updated: updatedCount,
      message: `Successfully processed ${updatedCount} words.` 
    });

  } catch (error: any) {
    return NextResponse.json({ error: error.message }, { status: 500 });
  }
}
</file>

<file path="app/api/tts/route.ts">
import { NextResponse } from 'next/server';

export async function POST(req: Request) {
  try {
    const { text } = await req.json();

    if (!text) {
      return NextResponse.json({ error: "Missing text" }, { status: 400 });
    }

    // Use Google Translate TTS for Hebrew
    const url = `https://translate.google.com/translate_tts?ie=UTF-8&tl=he&client=tw-ob&q=${encodeURIComponent(text)}`;
    
    const response = await fetch(url);
    
    if (!response.ok) {
      return NextResponse.json({ error: "TTS failed" }, { status: 500 });
    }

    const audioBuffer = await response.arrayBuffer();

    return new NextResponse(audioBuffer, {
      headers: {
        'Content-Type': 'audio/mpeg',
        'Content-Length': audioBuffer.byteLength.toString(),
      },
    });

  } catch (error: any) {
    return NextResponse.json({ error: error.message }, { status: 500 });
  }
}
</file>

<file path="app/login/page.tsx">
'use client'

import { useState } from 'react'
import { createBrowserClient } from '@supabase/ssr'
import { useRouter } from 'next/navigation'
import Link from 'next/link'

export default function LoginPage() {
  const router = useRouter()
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState<string | null>(null)
  const [isSignUp, setIsSignUp] = useState(false) // Toggle between login/signup

  const supabase = createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  )

  const handleAuth = async (e: React.FormEvent) => {
    e.preventDefault()
    setLoading(true)
    setError(null)

    try {
      if (isSignUp) {
        // ×”×¨×©××”
        const { error } = await supabase.auth.signUp({
          email,
          password,
        })
        if (error) throw error
        setError('Check your email for the confirmation link!')
      } else {
        // ×”×ª×—×‘×¨×•×ª
        const { error } = await supabase.auth.signInWithPassword({
          email,
          password,
        })
        if (error) throw error
        router.push('/dashboard')
        router.refresh()
      }
    } catch (err: any) {
      setError(err.message)
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center bg-slate-50 px-4">
      <div className="max-w-md w-full bg-white rounded-3xl shadow-xl p-8 space-y-6">
        <div className="text-center">
          <h1 className="text-3xl font-black text-slate-900">
            {isSignUp ? 'Create Account' : 'Welcome Back'}
          </h1>
          <p className="text-slate-500 mt-2">
            {isSignUp ? 'Start your Hebrew journey' : 'Continue where you left off'}
          </p>
        </div>

        {error && (
          <div className="p-3 bg-red-50 text-red-600 text-sm rounded-lg text-center font-medium">
            {error}
          </div>
        )}

        <form onSubmit={handleAuth} className="space-y-4">
          <div>
            <label className="block text-sm font-medium text-slate-700 mb-1">Email</label>
            <input
              type="email"
              required
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-full px-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all"
              placeholder="hello@example.com"
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-slate-700 mb-1">Password</label>
            <input
              type="password"
              required
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full px-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
            />
          </div>

          <button
            type="submit"
            disabled={loading}
            className="w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg hover:shadow-indigo-500/30 disabled:opacity-50"
          >
            {loading ? 'Processing...' : (isSignUp ? 'Sign Up' : 'Log In')}
          </button>
        </form>

        <div className="text-center">
          <button
            onClick={() => setIsSignUp(!isSignUp)}
            className="text-indigo-600 text-sm font-medium hover:underline"
          >
            {isSignUp ? 'Already have an account? Log in' : "Don't have an account? Sign up"}
          </button>
        </div>
        
        <div className="text-center pt-4 border-t border-slate-100">
             <Link href="/" className="text-slate-400 text-sm hover:text-slate-600">
                Back to Home
             </Link>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="components/DashboardNav.tsx">
'use client';

import Link from 'next/link';
import { usePathname, useRouter } from 'next/navigation';
import { createBrowserClient } from '@supabase/ssr';
import { 
  HomeIcon, 
  BookOpenIcon, 
  Cog6ToothIcon,
  ArrowLeftOnRectangleIcon 
} from '@heroicons/react/24/outline';
import { useLanguage } from '@/app/context/LanguageContext';
import LanguageSwitcher from '@/components/LanguageSwitcher';

export default function DashboardNav() {
  const pathname = usePathname();
  const router = useRouter();
  const { t } = useLanguage();
  
  const supabase = createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  );

  const handleLogout = async () => {
    await supabase.auth.signOut();
    router.push('/login');
    router.refresh();
  };

  return (
    <aside className="w-64 bg-white border-r border-slate-100 flex flex-col h-full shadow-sm">
      <div className="p-6 flex-1">
        <h2 className="text-2xl font-black text-slate-900 mb-8 tracking-tighter">
          HEBREW MASTER
        </h2>
        
        <nav className="space-y-2">
          <NavLink 
            href="/dashboard" 
            label={t('nav.dashboard')}
            icon={HomeIcon} 
            isActive={pathname === '/dashboard'} 
          />
          <NavLink 
            href="/dashboard/vocabulary" 
            label={t('nav.vocabulary')}
            icon={BookOpenIcon} 
            isActive={pathname === '/dashboard/vocabulary'} 
          />
          <NavLink 
            href="/dashboard/settings" 
            label={t('nav.settings')}
            icon={Cog6ToothIcon} 
            isActive={pathname === '/dashboard/settings'} 
          />
        </nav>
      </div>

      {/* Language Switcher */}
      <div className="px-6 py-4">
        <LanguageSwitcher />
      </div>

      {/* Logout Button at the bottom */}
      <div className="p-4 border-t border-slate-50">
        <button
          onClick={handleLogout}
          className="flex items-center gap-3 w-full px-4 py-3 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all font-bold"
        >
          <ArrowLeftOnRectangleIcon className="w-5 h-5" />
          <span>{t('nav.logout')}</span>
        </button>
      </div>
    </aside>
  );
}

function NavLink({ href, label, icon: Icon, isActive }: { 
  href: string, 
  label: string, 
  icon: any, 
  isActive: boolean 
}) {
  return (
    <Link
      href={href}
      className={`flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${
        isActive 
          ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-100' 
          : 'text-slate-400 hover:text-slate-600 hover:bg-slate-50'
      }`}
    >
      <Icon className="w-5 h-5" />
      <span>{label}</span>
    </Link>
  );
}
</file>

<file path="components/LanguageSwitcher.tsx">
'use client';

import { useLanguage } from '@/app/context/LanguageContext';

export default function LanguageSwitcher() {
  const { language, setLanguage } = useLanguage();

  const languages = [
    { code: 'en' as const, flag: 'ğŸ‡ºğŸ‡¸', label: 'EN' },
    { code: 'he' as const, flag: 'ğŸ‡®ğŸ‡±', label: 'IL' },
    { code: 'fr' as const, flag: 'ğŸ‡«ğŸ‡·', label: 'FR' }
  ];

  const handleChange = (newLocale: 'en' | 'he' | 'fr') => {
    setLanguage(newLocale);
    localStorage.setItem('locale', newLocale);
  };

  return (
    <div className="flex gap-2 justify-center items-center bg-white/5 p-2 rounded-2xl border border-white/10">
      {languages.map((lang) => (
        <button
          key={lang.code}
          onClick={() => handleChange(lang.code)}
          className={`
            flex flex-col items-center justify-center
            w-16 h-16 rounded-xl
            transition-all duration-200
            ${language === lang.code 
              ? 'bg-indigo-600 scale-110 shadow-lg shadow-indigo-500/50' 
              : 'bg-white/10 hover:bg-white/20 hover:scale-105'
            }
          `}
        >
          <span className="text-2xl mb-1">{lang.flag}</span>
          <span className={`text-[10px] font-bold tracking-wider ${
            language === lang.code ? 'text-white' : 'text-slate-400'
          }`}>
            {lang.label}
          </span>
        </button>
      ))}
    </div>
  );
}
</file>

<file path="app/dashboard/alphabet/page.tsx">
'use client';

import { useState, useEffect } from 'react';
import { createClient } from '@supabase/supabase-js';
import Link from 'next/link';

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
);

interface HebrewLetter {
  id: string;
  print: string;
  cursive: string;
  name_en: string;
  translit: string;
  sound_en: string;
  tip_en: string;
  value: number;
  has_variant: boolean;
  variant_print?: string;
  variant_name_en?: string;
}

export default function AlphabetPage() {
  const [letters, setLetters] = useState<HebrewLetter[]>([]);
  const [selectedLetter, setSelectedLetter] = useState<HebrewLetter | null>(null);
  const [showCursive, setShowCursive] = useState(false);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadLetters();
  }, []);

  const loadLetters = async () => {
    const { data, error } = await supabase
      .from('hebrew_letters')
      .select('*')
      .order('position');

    if (data) {
      setLetters(data);
    }
    setLoading(false);
  };

  const playAudio = async (text: string) => {
    try {
      const response = await fetch('/api/tts', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text }),
      });

      if (response.ok) {
        const blob = await response.blob();
        const url = URL.createObjectURL(blob);
        const audio = new Audio(url);
        await audio.play();
      }
    } catch (error) {
      console.error('Audio error:', error);
    }
  };

  if (loading) {
    return <div className="flex h-screen items-center justify-center">
      <div className="text-xl font-bold">Loading alphabet...</div>
    </div>;
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-6">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="mb-8 flex items-center justify-between">
          <div>
            <Link href="/dashboard" className="text-blue-600 hover:text-blue-800 mb-4 inline-block">
              â† Back to Dashboard
            </Link>
            <h1 className="text-4xl font-bold text-gray-900 mb-2">The Hebrew Alphabet</h1>
            <p className="text-lg text-gray-600">22 letters, each with its own story</p>
          </div>
          
          <button
            onClick={() => setShowCursive(!showCursive)}
            className="px-6 py-3 bg-white rounded-xl shadow-md hover:shadow-lg transition-all border-2 border-gray-200"
          >
            Show: {showCursive ? 'âœï¸ Cursive' : 'ğŸ”¤ Print'}
          </button>
        </div>

        {/* Alphabet Grid */}
        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-8">
          {letters.map((letter) => (
            <button
              key={letter.id}
              onClick={() => setSelectedLetter(letter)}
              className={`
                bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300
                hover:scale-105 cursor-pointer text-center group
                ${selectedLetter?.id === letter.id ? 'ring-4 ring-blue-500 scale-105' : ''}
              `}
            >
              <div className="text-6xl font-bold text-gray-800 mb-2" dir="rtl">
                {showCursive ? letter.cursive : letter.print}
              </div>
              <div className="text-sm font-bold text-gray-700">{letter.name_en}</div>
              <div className="text-xs text-gray-500">/{letter.translit}/</div>
            </button>
          ))}
        </div>

        {/* Letter Detail Card */}
        {selectedLetter && (
          <div className="bg-white rounded-3xl shadow-2xl p-8 border-2 border-blue-200 animate-in fade-in zoom-in duration-300">
            <div className="grid md:grid-cols-2 gap-8">
              {/* Left: Letter Display */}
              <div className="flex flex-col items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-12">
                <div className="text-9xl font-bold text-blue-600 mb-4" dir="rtl">
                  {showCursive ? selectedLetter.cursive : selectedLetter.print}
                </div>
                <button
                  onClick={() => playAudio(selectedLetter.print)}
                  className="mt-4 px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all shadow-lg flex items-center gap-2"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                    <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                  </svg>
                  Play Sound
                </button>
              </div>

              {/* Right: Information */}
              <div className="space-y-6">
                <div>
                  <h2 className="text-4xl font-bold text-gray-900 mb-2">{selectedLetter.name_en}</h2>
                  <p className="text-xl text-gray-600">Pronounced: /{selectedLetter.translit}/</p>
                </div>

                <div className="bg-blue-50 rounded-xl p-4">
                  <h3 className="font-bold text-gray-800 mb-2">ğŸ”Š Sound</h3>
                  <p className="text-gray-700">{selectedLetter.sound_en}</p>
                </div>

                <div className="bg-purple-50 rounded-xl p-4">
                  <h3 className="font-bold text-gray-800 mb-2">ğŸ’¡ Tip</h3>
                  <p className="text-gray-700">{selectedLetter.tip_en}</p>
                </div>

                <div className="bg-green-50 rounded-xl p-4">
                  <h3 className="font-bold text-gray-800 mb-2">ğŸ”¢ Numerical Value</h3>
                  <p className="text-3xl font-bold text-green-600">{selectedLetter.value}</p>
                </div>

                {selectedLetter.has_variant && (
                  <div className="bg-orange-50 rounded-xl p-4">
                    <h3 className="font-bold text-gray-800 mb-2">ğŸ”„ Variant Form</h3>
                    <div className="flex items-center gap-4">
                      <span className="text-5xl font-bold" dir="rtl">{selectedLetter.variant_print}</span>
                      <div>
                        <p className="font-bold">{selectedLetter.variant_name_en}</p>
                        <p className="text-sm text-gray-600">Without dagesh (dot)</p>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        )}

        {!selectedLetter && (
          <div className="text-center text-gray-500 italic text-lg mt-12">
            Click any letter above to learn more about it
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="app/dashboard/progress/page.tsx">
'use client';
import { useState, useEffect } from 'react';
import { createClient } from '@supabase/supabase-js';

const supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!);

export default function ProgressPage() {
  const [items, setItems] = useState<any[]>([]);
  const userId = '00000000-0000-0000-0000-000000000000';

  useEffect(() => {
    async function getMemory() {
      const { data } = await supabase
        .from('srs_cards')
        .select('difficulty, due_date, vocabulary(word_he, meaning_en)')
        .eq('user_id', userId);
      if (data) setItems(data);
    }
    getMemory();
  }, []);

  return (
    <div className="p-8 bg-slate-50 min-h-screen">
      <h1 className="text-3xl font-black mb-6">Memory Status</h1>
      <div className="grid gap-4">
        {items.map((item, i) => (
          <div key={i} className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex justify-between items-center">
            <div>
              <p className="text-2xl font-bold" dir="rtl">{item.vocabulary.word_he}</p>
              <p className="text-slate-500">{item.vocabulary.meaning_en}</p>
            </div>
            <div className="text-right">
              <p className="text-xs font-bold uppercase text-slate-400">Difficulty Score</p>
              <p className={`text-xl font-black ${item.difficulty > 5 ? 'text-red-500' : 'text-green-500'}`}>
                {Math.round(item.difficulty * 10)}%
              </p>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}
</file>

<file path="app/dashboard/settings/page.tsx">
'use client';

export default function SettingsPage() {
  return (
    <div className="p-8">
      <h1 className="text-3xl font-bold text-white mb-6">Settings</h1>
      <div className="bg-slate-900/50 border border-white/10 rounded-2xl p-8 text-center">
        <p className="text-slate-400 text-lg">User preferences coming soon...</p>
      </div>
    </div>
  );
}
</file>

<file path="next.config.js">
/** @type {import('next').NextConfig} */
const nextConfig = {
  eslint: {
    ignoreDuringBuilds: true,
  },
  typescript: {
    ignoreBuildErrors: true,
  },
};

module.exports = nextConfig;
</file>

<file path="app/dashboard/nikud/page.tsx">
'use client';

import { useState, useEffect } from 'react';
import { createClient } from '@supabase/supabase-js';
import Link from 'next/link';
import { useLanguage } from '@/app/context/LanguageContext';
import LanguageSwitcher from '@/components/LanguageSwitcher';

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
);

interface Nikud {
  id: string;
  symbol: string;
  display: string;
  name_en: string;
  sound_en: string;
  category: string;
  teaching_order: number;
}

export default function NikudPage() {
  const { t } = useLanguage();
  const [nikudList, setNikudList] = useState<Nikud[]>([]);
  const [selectedNikud, setSelectedNikud] = useState<Nikud | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadNikud();
  }, []);

  const loadNikud = async () => {
    const { data, error } = await supabase
      .from('nikud')
      .select('*')
      .order('teaching_order');

    if (data) {
      setNikudList(data);
      if (data.length > 0) {
        setSelectedNikud(data[0]);
      }
    }
    setLoading(false);
  };

  const getCategoryColor = (category: string) => {
    const colors: Record<string, string> = {
      'a': 'from-red-400 to-red-600',
      'e': 'from-orange-400 to-orange-600',
      'i': 'from-yellow-400 to-yellow-600',
      'o': 'from-green-400 to-green-600',
      'u': 'from-blue-400 to-blue-600',
      'reduced': 'from-purple-400 to-purple-600'
    };
    return colors[category] || 'from-gray-400 to-gray-600';
  };

  const playAudio = async (text: string) => {
    try {
      const response = await fetch('/api/tts', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text }),
      });

      if (response.ok) {
        const blob = await response.blob();
        const url = URL.createObjectURL(blob);
        const audio = new Audio(url);
        await audio.play();
      }
    } catch (error) {
      console.error('Audio error:', error);
    }
  };

  if (loading) {
    return (
      <div className="flex h-screen items-center justify-center">
        <LanguageSwitcher />
        <div className="text-xl font-bold">{t('nikud.loading')}</div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 p-6">
      <LanguageSwitcher />
      
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="mb-8">
          <Link href="/dashboard" className="text-blue-600 hover:text-blue-800 mb-4 inline-block">
            â† {t('nikud.backToDashboard')}
          </Link>
          <h1 className="text-4xl font-bold text-gray-900 mb-2">{t('nikud.title')}</h1>
          <p className="text-lg text-gray-600">{t('nikud.subtitle')}</p>
        </div>

        <div className="grid lg:grid-cols-2 gap-8">
          {/* Left: Nikud Grid */}
          <div>
            <h2 className="text-2xl font-bold text-gray-800 mb-6">{t('nikud.vowelPoints')}</h2>
            <div className="grid grid-cols-2 gap-4">
              {nikudList.map((nikud) => (
                <button
                  key={nikud.id}
                  onClick={() => setSelectedNikud(nikud)}
                  className={`
                    bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300
                    hover:scale-105 cursor-pointer group relative overflow-hidden
                    ${selectedNikud?.id === nikud.id ? 'ring-4 ring-purple-500 scale-105' : ''}
                  `}
                >
                  {/* Gradient Background */}
                  <div className={`absolute inset-0 bg-gradient-to-br ${getCategoryColor(nikud.category)} opacity-10 group-hover:opacity-20 transition-opacity`}></div>
                  
                  {/* Content */}
                  <div className="relative">
                    <div className="text-7xl font-bold text-gray-800 mb-2" dir="rtl">
                      {nikud.display}
                    </div>
                    <div className="text-sm font-bold text-gray-700">{nikud.name_en}</div>
                    <div className="text-xs text-gray-500 mt-1">{nikud.sound_en}</div>
                  </div>
                </button>
              ))}
            </div>

            {/* Category Legend */}
            <div className="mt-8 bg-white rounded-2xl p-6 shadow-lg">
              <h3 className="font-bold text-gray-800 mb-4">{t('nikud.soundCategories')}</h3>
              <div className="grid grid-cols-2 gap-2 text-sm">
                <div className="flex items-center gap-2">
                  <div className="w-4 h-4 rounded-full bg-gradient-to-br from-red-400 to-red-600"></div>
                  <span>{t('nikud.aSounds')}</span>
                </div>
                <div className="flex items-center gap-2">
                  <div className="w-4 h-4 rounded-full bg-gradient-to-br from-orange-400 to-orange-600"></div>
                  <span>{t('nikud.eSounds')}</span>
                </div>
                <div className="flex items-center gap-2">
                  <div className="w-4 h-4 rounded-full bg-gradient-to-br from-yellow-400 to-yellow-600"></div>
                  <span>{t('nikud.iSounds')}</span>
                </div>
                <div className="flex items-center gap-2">
                  <div className="w-4 h-4 rounded-full bg-gradient-to-br from-green-400 to-green-600"></div>
                  <span>{t('nikud.oSounds')}</span>
                </div>
                <div className="flex items-center gap-2">
                  <div className="w-4 h-4 rounded-full bg-gradient-to-br from-blue-400 to-blue-600"></div>
                  <span>{t('nikud.uSounds')}</span>
                </div>
                <div className="flex items-center gap-2">
                  <div className="w-4 h-4 rounded-full bg-gradient-to-br from-purple-400 to-purple-600"></div>
                  <span>{t('nikud.reduced')}</span>
                </div>
              </div>
            </div>
          </div>

          {/* Right: Detail Card */}
          {selectedNikud && (
            <div className="lg:sticky lg:top-6 h-fit">
              <div className="bg-white rounded-3xl shadow-2xl p-8 border-2 border-purple-200 animate-in fade-in zoom-in duration-300">
                {/* Display */}
                <div className={`bg-gradient-to-br ${getCategoryColor(selectedNikud.category)} rounded-2xl p-12 mb-6 flex flex-col items-center justify-center`}>
                  <div className="text-9xl font-bold text-white mb-4" dir="rtl">
                    {selectedNikud.display}
                  </div>
                  <button
                    onClick={() => playAudio(selectedNikud.display)}
                    className="px-6 py-3 bg-white text-gray-800 rounded-xl hover:bg-gray-100 transition-all shadow-lg flex items-center gap-2 font-bold"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                      <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                      <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                    </svg>
                    {t('nikud.playSound')}
                  </button>
                </div>

                {/* Information */}
                <div className="space-y-6">
                  <div>
                    <h2 className="text-4xl font-bold text-gray-900 mb-2">{selectedNikud.name_en}</h2>
                    <p className="text-sm text-gray-500 uppercase tracking-wide">
                      {t('nikud.vowelPointNumber')} #{selectedNikud.teaching_order}
                    </p>
                  </div>

                  <div className="bg-purple-50 rounded-xl p-4">
                    <h3 className="font-bold text-gray-800 mb-2 flex items-center gap-2">
                      <span>ğŸ”Š</span> {t('nikud.sound')}
                    </h3>
                    <p className="text-lg text-gray-700">{selectedNikud.sound_en}</p>
                  </div>

                  <div className="bg-blue-50 rounded-xl p-4">
                    <h3 className="font-bold text-gray-800 mb-2 flex items-center gap-2">
                      <span>ğŸ“</span> {t('nikud.symbol')}
                    </h3>
                    <p className="text-gray-700">
                      {t('nikud.thisMark')} <span className="font-mono text-2xl">{selectedNikud.symbol}</span>
                    </p>
                    <p className="text-sm text-gray-600 mt-2">
                      {t('nikud.writtenPosition')} {selectedNikud.category === 'o' || selectedNikud.category === 'u' ? t('nikud.with') : t('nikud.under')} {t('nikud.theLetter')}
                    </p>
                  </div>

                  <div className="bg-green-50 rounded-xl p-4">
                    <h3 className="font-bold text-gray-800 mb-2 flex items-center gap-2">
                      <span>ğŸ¯</span> {t('nikud.category')}
                    </h3>
                    <p className="text-gray-700 capitalize">{selectedNikud.category} {t('nikud.soundFamily')}</p>
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>

        {/* Practice Tip */}
        <div className="mt-8 bg-white rounded-2xl shadow-lg p-8 border-2 border-purple-200">
          <div className="flex items-start gap-4">
            <div className="text-5xl">ğŸ’¡</div>
            <div>
              <h3 className="text-2xl font-bold text-gray-900 mb-2">{t('nikud.learningTip')}</h3>
              <p className="text-gray-700 leading-relaxed">
                {t('nikud.tipText')}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/dashboard/practice/page.tsx">
'use client';

import { createClient } from '@supabase/supabase-js';
import { useEffect, useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
);

export default function PracticePage() {
  const [words, setWords] = useState<any[]>([]);
  const [currentIndex, setCurrentIndex] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [loading, setLoading] = useState(true);
  const [sessionComplete, setSessionComplete] = useState(false);
  const [audioStatus, setAudioStatus] = useState<'idle' | 'loading' | 'playing'>('idle');

  // ×©×™××•×© ×‘-ID ×”×§×‘×•×¢ ×›×“×™ ×œ×”×‘×˜×™×— ×¡× ×›×¨×•×Ÿ ×¢× ×”-SQL Editor
  const fixedUserId = '00000000-0000-0000-0000-000000000000';

  useEffect(() => {
    loadSession();
  }, []);

  async function loadSession() {
    setLoading(true);
    // ×©×œ×™×¤×ª ××™×œ×™× ×œ×ª×¨×’×•×œ
    const { data } = await supabase
      .from('vocabulary')
      .select('id, word_he, translit, meaning_en')
      .limit(50);

    if (data && data.length > 0) {
      const shuffled = data.sort(() => 0.5 - Math.random()).slice(0, 10);
      setWords(shuffled);
    }
    setLoading(false);
  }

  const handleRating = async (rating: string) => {
    const currentWord = words[currentIndex];
    const ratingMap: Record<string, number> = {
      'again': 1,
      'hard': 2,
      'good': 3,
      'easy': 4
    };

    try {
      // ×§×¨×™××” ×œ×¤×•× ×§×¦×™×” ×”×—×›××” ×‘-Supabase
      await supabase.rpc('update_srs_item', {
        user_id_input: fixedUserId,
        content_id_input: currentWord.id,
        content_type_input: 'vocabulary',
        rating_input: ratingMap[rating]
      });
    } catch (error) {
      console.error('Error saving SRS:', error);
    }

    if (currentIndex < words.length - 1) {
      setIsFlipped(false);
      setCurrentIndex(prev => prev + 1);
    } else {
      setSessionComplete(true);
    }
  };

  const playAudio = (text: string) => {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'he-IL';
    window.speechSynthesis.speak(utterance);
  };

  if (loading) return <div className="flex h-screen items-center justify-center bg-white font-bold text-slate-400">×˜×•×¢×Ÿ ×ª×¨×’×•×œ...</div>;

  if (sessionComplete) return (
    <div className="flex flex-col items-center justify-center h-screen bg-white text-center p-6">
      <div className="text-8xl mb-6">ğŸ‰</div>
      <h1 className="text-4xl font-black text-slate-900 mb-2">×›×œ ×”×›×‘×•×“!</h1>
      <p className="text-slate-500 mb-8">×”×©×œ××ª ××ª ×”×ª×¨×’×•×œ ×•×”× ×ª×•× ×™× × ×©××¨×• ×‘×–×™×›×¨×•×Ÿ ×”××¢×¨×›×ª.</p>
      <button 
        onClick={() => window.location.href = '/dashboard'} 
        className="px-10 py-4 bg-indigo-600 text-white rounded-2xl font-bold shadow-lg hover:bg-indigo-700 transition-all"
      >
        ×—×–×¨×” ×œ×“×©×‘×•×¨×“
      </button>
    </div>
  );

  const currentWord = words[currentIndex];

  return (
    <div className="min-h-screen bg-slate-50 flex flex-col items-center justify-center p-6" dir="ltr">
      <div className="w-full max-w-md mb-8 h-2 bg-slate-200 rounded-full overflow-hidden">
        <div 
          className="h-full bg-indigo-500 transition-all duration-500"
          style={{ width: `${((currentIndex + 1) / words.length) * 100}%` }}
        ></div>
      </div>

      <div className="w-full max-w-md aspect-[4/5] relative perspective-1000">
        <AnimatePresence mode="wait">
          {!isFlipped ? (
            <motion.div
              key="front"
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0, y: -20 }}
              className="absolute inset-0 bg-white border border-slate-100 shadow-xl rounded-[40px] p-8 flex flex-col items-center justify-center cursor-pointer"
              onClick={() => setIsFlipped(true)}
            >
              <span className="text-slate-300 text-xs font-bold uppercase tracking-widest mb-12">Click to flip</span>
              <h1 className="text-7xl font-black mb-3 text-slate-900" dir="rtl">{currentWord.word_he}</h1>
              
              {/* ×”×ª×¢×ª×™×§ ×‘×¦×“ ×”×§×“××™ */}
              {currentWord.translit && (
                <p className="text-xl text-indigo-400 font-semibold mb-8 italic">
                  ({currentWord.translit})
                </p>
              )}
              
              <button 
                onClick={(e) => { e.stopPropagation(); playAudio(currentWord.word_he); }}
                className="p-4 rounded-full bg-indigo-50 text-indigo-500 hover:bg-indigo-100"
              >
                ğŸ”Š
              </button>
            </motion.div>
          ) : (
            <motion.div
              key="back"
              initial={{ opacity: 0, scale: 0.9 }}
              animate={{ opacity: 1, scale: 1 }}
              className="absolute inset-0 bg-white border border-indigo-100 shadow-xl rounded-[40px] p-8 flex flex-col items-center justify-between"
            >
              <div className="text-center mt-10">
                <h2 className="text-5xl font-black mb-2 text-slate-900" dir="rtl">{currentWord.word_he}</h2>
                <p className="text-xl text-indigo-500 font-bold mb-6 italic">{currentWord.translit}</p>
                <div className="bg-slate-50 px-8 py-6 rounded-3xl border border-slate-100">
                  <p className="text-3xl font-bold text-slate-800">{currentWord.meaning_en}</p>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-3 w-full">
                <button onClick={() => handleRating('again')} className="py-4 rounded-2xl bg-slate-100 text-slate-600 font-bold hover:bg-slate-200">Again</button>
                <button onClick={() => handleRating('hard')} className="py-4 rounded-2xl bg-orange-50 text-orange-600 font-bold hover:bg-orange-100">Hard</button>
                <button onClick={() => handleRating('good')} className="py-4 rounded-2xl bg-emerald-50 text-emerald-600 font-bold hover:bg-emerald-100">Good</button>
                <button onClick={() => handleRating('easy')} className="py-4 rounded-2xl bg-blue-50 text-blue-600 font-bold hover:bg-blue-100">Easy</button>
              </div>
            </motion.div>
          )}
        </AnimatePresence>
      </div>
    </div>
  );
}
</file>

<file path="app/dashboard/quiz/page.tsx">
'use client';

import { createBrowserClient } from '@supabase/ssr';
import { useEffect, useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import confetti from 'canvas-confetti';
import toast from 'react-hot-toast';

export default function QuizPage() {
  const [supabase] = useState(() => 
    createBrowserClient(
      process.env.NEXT_PUBLIC_SUPABASE_URL!,
      process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
    )
  );

  const [questions, setQuestions] = useState<any[]>([]);
  const [currentQ, setCurrentQ] = useState<any>(null);
  const [options, setOptions] = useState<any[]>([]);
  const [score, setScore] = useState(0);
  const [displayScore, setDisplayScore] = useState(0);
  const [loading, setLoading] = useState(true);
  const [gameState, setGameState] = useState<'playing' | 'correct' | 'wrong' | 'finished'>('playing');
  const [mistakes, setMistakes] = useState<any[]>([]);

  useEffect(() => { startNewGame(); }, []);

  // ×× ×™××¦×™×™×ª ××¡×¤×¨×™× ×¨×¦×™× ×‘×¡×•×£
  useEffect(() => {
    if (gameState === 'finished' && score > 0) {
      let start = 0;
      const duration = 1500;
      const increment = score / (duration / 20);
      const timer = setInterval(() => {
        start += increment;
        if (start >= score) {
          setDisplayScore(score);
          clearInterval(timer);
        } else {
          setDisplayScore(Math.floor(start));
        }
      }, 20);
      return () => clearInterval(timer);
    }
  }, [gameState, score]);

  // ×¤×•× ×§×¦×™×™×ª ×”×¡××•× ×“ ×•×”×§×¨××ª ×”××™×œ×™× (×”×™×™×ª×” ×—×¡×¨×”!)
  const playFeedback = async (type: 'success' | 'error' | 'word') => {
    try {
      if (type === 'word') {
        const response = await fetch('/api/tts', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text: currentQ.word_he }),
        });
        const blob = await response.blob();
        new Audio(URL.createObjectURL(blob)).play();
      } else {
        const url = type === 'success' 
          ? 'https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3' 
          : 'https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3';
        new Audio(url).play();
      }
    } catch (e) {}
  };

  async function startNewGame() {
    setLoading(true);
    setScore(0);
    setDisplayScore(0);
    setMistakes([]);
    setGameState('playing');
    const { data } = await supabase.from('vocabulary').select('*').limit(50);
    if (data && data.length > 0) {
      const shuffled = data.sort(() => 0.5 - Math.random());
      setQuestions(shuffled);
      generateQuestion(shuffled[0], shuffled);
    }
    setLoading(false);
  }

  function generateQuestion(target: any, allWords: any[]) {
    const distractors = allWords.filter(w => w.id !== target.id).sort(() => 0.5 - Math.random()).slice(0, 3);
    const mixedOptions = [...distractors, target].sort(() => 0.5 - Math.random());
    setCurrentQ(target);
    setOptions(mixedOptions);
    setGameState('playing');
  }

  const handleAnswer = async (selectedId: string) => {
    if (gameState !== 'playing') return;
    const isCorrect = selectedId === currentQ.id;

    if (isCorrect) {
      setGameState('correct');
      setScore(prev => prev + 10);
      playFeedback('success'); // ×¡××•× ×“ ×”×¦×œ×—×”
      
      const { data: { user } } = await supabase.auth.getUser();
      if (user) {
        await supabase.from('srs_cards').upsert({
          user_id: user.id,
          front: currentQ.word_he,
          back: currentQ.meaning_en,
          stability: 0.1,
          next_review: new Date().toISOString(),
          reps: 1
        }, { onConflict: 'user_id, front' });
      }
    } else {
      setGameState('wrong');
      setMistakes(prev => [...prev, currentQ]);
      playFeedback('error'); // ×¡××•× ×“ ×˜×¢×•×ª
    }

    setTimeout(() => {
      const nextIndex = questions.indexOf(currentQ) + 1;
      if (nextIndex < 10 && nextIndex < questions.length) {
        generateQuestion(questions[nextIndex], questions);
      } else {
        setGameState('finished');
        const finalScore = score + (isCorrect ? 10 : 0);
        if (finalScore >= 70) confetti();
        saveProgress(finalScore);
      }
    }, isCorrect ? 800 : 1500);
  };

  async function saveProgress(finalScore: number) {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) return;
    const { error } = await supabase.rpc('update_user_xp', {
      user_id_input: user.id,
      xp_to_add: finalScore
    });
    if (!error) toast.success(`Success! +${finalScore} XP added`, { icon: 'âš¡' });
  }

  if (loading) return <div className="h-screen flex items-center justify-center font-bold text-slate-400">Loading Quiz...</div>;

  // ×“×£ ×ª×•×¦××•×ª (×”×™×” ×—×¡×¨!)
  if (gameState === 'finished') return (
    <div className="max-w-2xl mx-auto p-8 flex flex-col items-center min-h-screen bg-slate-50 pt-16" dir="ltr">
      <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} className="text-8xl mb-4">ğŸ†</motion.div>
      <h1 className="text-4xl font-black text-slate-900 mb-2 text-center">Quiz Results</h1>
      <div className="w-full bg-white rounded-[40px] shadow-2xl border border-slate-100 p-10 text-center mb-8">
        <p className="text-slate-400 font-bold uppercase tracking-widest text-sm mb-2 text-center">XP Earned</p>
        <div className="text-7xl font-black text-indigo-600 mb-6 text-center">{displayScore}</div>
        <div className="w-full h-3 bg-slate-100 rounded-full overflow-hidden mb-4">
          <motion.div initial={{ width: 0 }} animate={{ width: `${(score / 100) * 100}%` }} className="h-full bg-indigo-500" />
        </div>
      </div>
      {mistakes.length > 0 && (
        <div className="w-full bg-white rounded-3xl shadow-lg overflow-hidden border border-slate-100 mb-8 text-left">
          <div className="bg-slate-900 p-4 text-white font-bold text-center">Words to Review</div>
          <table className="w-full border-collapse">
            <tbody>
              {mistakes.map((word, i) => (
                <tr key={i} className="border-b border-slate-50 hover:bg-slate-50">
                  <td className="p-4 text-2xl font-bold text-right text-slate-800" dir="rtl">{word.word_he}</td>
                  <td className="p-4 text-slate-600 font-medium">{word.meaning_en}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      )}
      <button onClick={startNewGame} className="w-full py-5 bg-indigo-600 text-white rounded-2xl font-bold shadow-lg hover:bg-indigo-700 transition-all">Start New Quiz</button>
    </div>
  );

  return (
    <div className="max-w-4xl mx-auto p-6 flex flex-col items-center justify-center min-h-[90vh]" dir="ltr">
      <div className="w-full max-w-2xl">
        <div className="flex justify-between items-center mb-8 font-bold">
          <span className="bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-100 text-slate-900">
            {questions.indexOf(currentQ) + 1} / 10
          </span>
          <span className="bg-indigo-600 px-6 py-2 rounded-xl text-white shadow-lg">{score} XP</span>
        </div>
        <AnimatePresence mode="wait">
          <motion.div 
            key={currentQ.id}
            initial={{ y: 10, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            className={`w-full bg-white rounded-[40px] shadow-xl p-12 text-center mb-10 border-4 transition-all duration-300 ${
              gameState === 'correct' ? 'border-green-500 bg-green-50/30' : 
              gameState === 'wrong' ? 'border-red-500 bg-red-50/30' : 'border-slate-50'
            }`}
          >
            <h1 className="text-8xl font-black text-slate-900 mb-6 leading-tight text-center" dir="rtl">{currentQ.word_he}</h1>
            {/* ×›×¤×ª×•×¨ ×”-Listen (×”×™×” ×—×¡×¨!) */}
            <button onClick={() => playFeedback('word')} className="text-indigo-600 font-bold flex items-center space-x-2 mx-auto px-6 py-3 rounded-full hover:bg-indigo-50 transition-colors">
              <span>ğŸ”Š</span><span>Listen</span>
            </button>
          </motion.div>
        </AnimatePresence>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {options.map((opt) => (
            <button
              key={opt.id}
              onClick={() => handleAnswer(opt.id)}
              disabled={gameState !== 'playing'}
              className={`p-6 rounded-3xl text-xl font-bold transition-all border-2 text-left px-8 shadow-sm
                ${gameState === 'playing' ? 'bg-white border-slate-100 hover:border-indigo-300 text-slate-700' : ''}
                ${opt.id === currentQ.id && (gameState === 'correct' || gameState === 'wrong') ? 'bg-green-500 text-white border-green-600' : ''}
                ${gameState === 'wrong' && opt.id !== currentQ.id ? 'bg-red-50 border-red-200 text-red-400 opacity-50' : ''}
              `}
            >
              {opt.meaning_en}
            </button>
          ))}
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/layout.tsx">
'use client';

import { Heebo, Frank_Ruhl_Libre } from 'next/font/google';
import './globals.css';
import { LanguageProvider } from './context/LanguageContext';

const heebo = Heebo({
  subsets: ['latin', 'hebrew'],
  variable: '--font-heebo',
  display: 'swap',
});

const frankRuhlLibre = Frank_Ruhl_Libre({
  subsets: ['latin', 'hebrew'],
  variable: '--font-frank-ruhl-libre',
  weight: ['400', '500', '700', '900'],
  display: 'swap',
});

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="he" dir="ltr">
      <body className={`${heebo.variable} ${frankRuhlLibre.variable} font-sans antialiased`}>
        <LanguageProvider>
          {children}
        </LanguageProvider>
      </body>
    </html>
  );
}
</file>

<file path="app/upload-lesson/page.tsx">
"use client"
import { useState } from 'react'
import { createClient } from '@supabase/supabase-js'

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
)

export default function UploadLesson() {
  const [uploading, setUploading] = useState(false)
  const [message, setMessage] = useState('')

  const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0]
    if (!file) return

    setUploading(true)
    setMessage('â³ ××¢×œ×”...')

    try {
      const fileName = `${Date.now()}-${file.name}`
      
      const { error } = await supabase.storage
        .from('lessons')
        .upload(fileName, file)

      if (error) throw error

      setMessage('âœ… ×”×§×•×‘×¥ ×”×•×¢×œ×”!')
      setTimeout(() => alert('×‘×“×•×§ ×‘-Table Editor'), 2000)

    } catch (error: any) {
      setMessage(`âŒ ${error.message}`)
    } finally {
      setUploading(false)
    }
  }

  return (
    <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '20px', direction: 'rtl', backgroundColor: '#f5f5f5' }}>
      <div style={{ backgroundColor: 'white', padding: '40px', borderRadius: '12px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)', maxWidth: '500px', width: '100%' }}>
        <h1 style={{ fontSize: '32px', marginBottom: '30px', textAlign: 'center' }}>×”×¢×œ××ª ×©×™×¢×•×¨</h1>
        
        <label style={{ display: 'block', border: '2px dashed #ccc', borderRadius: '10px', padding: '40px', cursor: uploading ? 'not-allowed' : 'pointer', textAlign: 'center' }}>
          <input type="file" accept="audio/*,video/*" onChange={handleUpload} disabled={uploading} style={{ display: 'none' }} />
          <div style={{ fontSize: '60px' }}>ğŸ“¤</div>
          <div style={{ fontSize: '20px', marginTop: '10px' }}>{uploading ? 'â³ ××¢×œ×”...' : '×œ×—×¥ ×œ×‘×—×™×¨×ª ×§×•×‘×¥'}</div>
        </label>

        {message && <div style={{ marginTop: '20px', padding: '15px', borderRadius: '8px', backgroundColor: message.includes('âœ…') ? '#d4edda' : '#f8d7da', color: message.includes('âœ…') ? '#155724' : '#721c24' }}>{message}</div>}
      </div>
    </div>
  )
}
</file>

<file path="package.json">
{
  "name": "hebrew-master",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "@heroicons/react": "^2.2.0",
    "@supabase/auth-helpers-nextjs": "^0.15.0",
    "@supabase/ssr": "^0.8.0",
    "@supabase/supabase-js": "^2.93.2",
    "@tanstack/react-query": "^5.17.0",
    "canvas-confetti": "^1.9.4",
    "framer-motion": "^11.0.0",
    "hebrew-transliteration": "^2.9.1",
    "lucide-react": "^0.562.0",
    "next": "^14.2.0",
    "openai": "^6.17.0",
    "react": "^18.3.0",
    "react-dom": "^18.3.0",
    "react-hot-toast": "^2.6.0",
    "recharts": "^3.7.0"
  },
  "devDependencies": {
    "@types/canvas-confetti": "^1.9.0",
    "@types/node": "^20.11.0",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "autoprefixer": "^10.4.17",
    "eslint": "^8.56.0",
    "eslint-config-next": "^14.2.0",
    "postcss": "^8.4.33",
    "tailwindcss": "^3.4.0",
    "tailwindcss-logical": "^3.0.0",
    "typescript": "^5.3.0"
  }
}
</file>

<file path="app/dashboard/page.tsx">
'use client';

export const dynamic = 'force-dynamic';

import Link from 'next/link';
import { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { createBrowserClient } from '@supabase/ssr';
import { ResponsiveContainer, BarChart, Bar, XAxis, Tooltip, Cell } from 'recharts';
import { useLanguage } from '@/app/context/LanguageContext';

export default function Dashboard() {
  const router = useRouter();
  const { t } = useLanguage();
  const [stats, setStats] = useState({ xp: 0, streak: 0, wordsLearned: 0, dueCards: 0, mastered: 0 });
  const [chartData, setChartData] = useState<any[]>([]);
  const [loading, setLoading] = useState(true);
  const [userName, setUserName] = useState('Student');

  const [supabase] = useState(() => 
    createBrowserClient(
      process.env.NEXT_PUBLIC_SUPABASE_URL!,
      process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
    )
  );

  const loadDashboardData = async () => {
    try {
      setLoading(true);
      
      const { data: { user } } = await supabase.auth.getUser();
      
      if (!user) {
        router.push('/login');
        return;
      }

      setUserName(user.email?.split('@')[0] || t('dashboard.student'));
      const userId = user.id;

      const { data: profileData } = await supabase
        .from('profiles')
        .select('xp')
        .eq('id', userId)
        .single();
      
      const { data: srsData } = await supabase
        .from('srs_cards')
        .select('*')
        .eq('user_id', userId);
      
      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      const activity = (srsData || []).reduce((acc: any, curr: any) => {
        if (!curr.last_review) return acc;
        const dayName = days[new Date(curr.last_review).getDay()];
        acc[dayName] = (acc[dayName] || 0) + (curr.reps || 1);
        return acc;
      }, {});

      setChartData(days.map(day => ({ name: day, xp: activity[day] || 0 })));
      
      setStats({
        xp: profileData?.xp || 0,
        streak: 0,
        wordsLearned: srsData?.length || 0,
        dueCards: (srsData || []).filter(s => new Date(s.due_date) <= new Date()).length,
        mastered: (srsData || []).filter(s => s.stability >= 1).length
      });

    } catch (error) {
      console.error('Dashboard Error:', error);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => { 
    loadDashboardData(); 
  }, []);

  const modules = [
    { title: t('dashboard.modules.alphabet'), emoji: 'ğŸ”¤', href: '/dashboard/alphabet', gradient: 'from-blue-500 to-blue-700', stats: t('dashboard.modules.alphabetStats') },
    { title: t('dashboard.modules.nikud'), emoji: 'Ö¹×', href: '/dashboard/nikud', gradient: 'from-purple-500 to-purple-700', stats: t('dashboard.modules.nikudStats') },
    { title: t('dashboard.modules.vocabulary'), emoji: 'ğŸ“š', href: '/dashboard/vocabulary', gradient: 'from-green-500 to-green-700', stats: `${stats.wordsLearned} ${t('dashboard.modules.items')}` },
    { title: t('dashboard.modules.flashcards'), emoji: 'ğŸ”„', href: '/dashboard/practice', gradient: 'from-orange-500 to-orange-700', stats: stats.dueCards > 0 ? `${stats.dueCards} ${t('dashboard.modules.due')}` : t('dashboard.modules.done') },
    { title: t('dashboard.modules.quiz'), emoji: 'âš¡', href: '/dashboard/quiz', gradient: 'from-amber-500 to-amber-700', stats: t('dashboard.modules.earnXP') }
  ];

  if (loading) return (
    <div className="h-screen flex items-center justify-center bg-slate-50">
      <div className="flex flex-col items-center gap-4">
        <div className="w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"></div>
        <span className="font-bold text-slate-400 tracking-widest uppercase text-xs">{t('dashboard.loading')}</span>
      </div>
    </div>
  );

  return (
    <div className="max-w-7xl mx-auto p-4 md:p-6" dir="ltr">
      <div className="mb-6">
        <h1 className="text-3xl font-black text-slate-900 leading-tight capitalize">{t('dashboard.greeting')}, {userName}! ğŸ‘‹</h1>
        <p className="text-slate-500 text-sm font-medium">{t('dashboard.subtitle')}</p>
      </div>

      <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
        {[
          { label: t('dashboard.stats.totalXP'), val: stats.xp, color: 'text-blue-600', icon: 'â­' },
          { label: t('dashboard.stats.streak'), val: stats.streak, color: 'text-orange-500', icon: 'ğŸ”¥' },
          { label: t('dashboard.stats.words'), val: stats.wordsLearned, color: 'text-emerald-500', icon: 'ğŸ“–' },
          { label: t('dashboard.stats.mastered'), val: stats.mastered, color: 'text-amber-500', icon: 'ğŸ†' }
        ].map(s => (
          <div key={s.label} className="bg-white rounded-3xl p-4 border border-slate-100 shadow-sm flex items-center justify-between hover:shadow-md transition-shadow">
            <div>
              <p className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">{s.label}</p>
              <p className={`text-2xl font-black ${s.color}`}>{s.val}</p>
            </div>
            <div className="text-2xl bg-slate-50 w-12 h-12 flex items-center justify-center rounded-2xl">{s.icon}</div>
          </div>
        ))}
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div className="lg:col-span-2 grid grid-cols-2 gap-4">
          {modules.map((m) => (
            <Link key={m.title} href={m.href} className="group">
              <div className={`bg-gradient-to-br ${m.gradient} rounded-[32px] p-5 text-white h-40 flex flex-col justify-between hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg group-hover:shadow-indigo-200`}>
                <div>
                  <div className="text-3xl mb-2">{m.emoji}</div>
                  <h3 className="text-lg font-bold leading-tight">{m.title}</h3>
                </div>
                <div className="flex justify-between items-center text-[10px] font-bold">
                  <span className="bg-white/20 px-3 py-1 rounded-full backdrop-blur-sm">{m.stats}</span>
                  <span className="bg-white/20 p-1.5 rounded-full group-hover:translate-x-1 transition-transform">â†’</span>
                </div>
              </div>
            </Link>
          ))}
        </div>

        <div className="bg-white rounded-[32px] p-6 border border-slate-100 shadow-sm flex flex-col h-full min-h-[350px]">
          <div className="flex justify-between items-center mb-6">
            <h3 className="text-xs font-black text-slate-900 uppercase tracking-wider">{t('dashboard.weeklyActivity')}</h3>
            <span className="text-[10px] font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-md uppercase">{t('dashboard.srsProgress')}</span>
          </div>
          <div className="flex-1">
            <ResponsiveContainer width="100%" height="100%">
              <BarChart data={chartData}>
                <XAxis 
                  dataKey="name" 
                  axisLine={false} 
                  tickLine={false} 
                  tick={{fill: '#94a3b8', fontSize: 11, fontWeight: 'bold'}} 
                />
                <Tooltip 
                  cursor={{fill: '#f8fafc'}} 
                  contentStyle={{borderRadius: '16px', border: 'none', boxShadow: '0 10px 15px -3px rgb(0 0 0 / 0.1)', fontSize: '12px', fontWeight: 'bold'}} 
                />
                <Bar dataKey="xp" radius={[6, 6, 6, 6]} barSize={18}>
                  {chartData.map((e, i) => (
                    <Cell key={i} fill={e.xp > 0 ? '#6366f1' : '#f1f5f9'} />
                  ))}
                </Bar>
              </BarChart>
            </ResponsiveContainer>
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/dashboard/vocabulary/page.tsx">
'use client';

import { useState, useEffect } from 'react';
import { createBrowserClient } from '@supabase/ssr';
import { motion, AnimatePresence } from 'framer-motion';
import confetti from 'canvas-confetti';
import { transliterate } from 'hebrew-transliteration';
import { useLanguage } from '@/app/context/LanguageContext';

export default function VocabularyPage() {
  const { t } = useLanguage();
  const [words, setWords] = useState<any[]>([]);
  const [newWord, setNewWord] = useState('');
  const [translation, setTranslation] = useState('');
  const [loading, setLoading] = useState(true);

  const supabase = createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  );

  const playWordSound = async (hebrewText: string) => {
    try {
      const response = await fetch('/api/tts', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text: hebrewText }),
      });
      const blob = await response.blob();
      const audio = new Audio(URL.createObjectURL(blob));
      audio.play();
    } catch (error) {
      console.error('Sound error:', error);
    }
  };

  const fetchData = async () => {
    try {
      setLoading(true);
      const { data: { user } } = await supabase.auth.getUser();
      if (!user) return;

      const { data, error } = await supabase
        .from('srs_cards')
        .select('*')
        .eq('user_id', user.id)
        .order('created_at', { ascending: false });

      if (error) throw error;
      setWords(data || []);
    } catch (err) {
      console.error('Error fetching:', err);
    } finally {
      setLoading(false);
    }
  };

  const addWord = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!newWord || !translation) return;

    const { data: { user } } = await supabase.auth.getUser();
    if (!user) return;

    const autoTranslit = transliterate(newWord);

    const { error } = await supabase.from('srs_cards').insert([
      {
        user_id: user.id,
        front: newWord,
        back: translation,
        transliteration: autoTranslit,
        next_review: new Date().toISOString(),
        stability: 0,
        reps: 0
      }
    ]);

    if (error) {
      console.error('Insert Error:', error.message);
      alert(t('vocabulary.addError') + error.message);
    } else {
      setNewWord('');
      setTranslation('');
      fetchData();
      confetti({ particleCount: 100, spread: 70, origin: { y: 0.8 } });
    }
  };

  const deleteWord = async (id: string) => {
    const { error } = await supabase.from('srs_cards').delete().eq('id', id);
    if (!error) fetchData();
  };

  useEffect(() => { fetchData(); }, []);

  if (loading) return <div className="h-screen flex items-center justify-center font-bold text-slate-400">{t('vocabulary.loading')}</div>;

  return (
    <div className="min-h-screen bg-slate-50 p-4 md:p-8" dir="ltr">
      <div className="max-w-6xl mx-auto">
        <h1 className="text-4xl font-black text-slate-900 mb-8 tracking-tighter">{t('vocabulary.title')}</h1>

        <form onSubmit={addWord} className="bg-white p-4 rounded-[32px] shadow-sm border border-slate-100 mb-12 flex flex-col md:flex-row gap-3">
          <input
            type="text"
            placeholder={t('vocabulary.hebrewPlaceholder')}
            className="flex-1 p-4 bg-slate-50 rounded-2xl outline-none font-bold text-slate-900 focus:ring-2 focus:ring-indigo-500 transition-all"
            value={newWord}
            onChange={(e) => setNewWord(e.target.value)}
            dir="rtl"
          />
          <input
            type="text"
            placeholder={t('vocabulary.translationPlaceholder')}
            className="flex-1 p-4 bg-slate-50 rounded-2xl outline-none font-bold text-slate-900 focus:ring-2 focus:ring-indigo-500 transition-all"
            value={translation}
            onChange={(e) => setTranslation(e.target.value)}
          />
          <button className="bg-indigo-600 text-white px-8 py-4 rounded-2xl font-black hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100">
            {t('vocabulary.addWord')}
          </button>
        </form>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <AnimatePresence>
            {words.map((word) => (
              <motion.div
                key={word.id}
                layout
                initial={{ opacity: 0, scale: 0.9 }}
                animate={{ opacity: 1, scale: 1 }}
                exit={{ opacity: 0, scale: 0.9 }}
                className="bg-white rounded-[32px] p-6 shadow-sm border border-slate-100 flex flex-col justify-between h-56 group hover:border-indigo-200 transition-all"
              >
                <div className="flex justify-between items-start">
                  <div className="bg-emerald-100 text-emerald-700 text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest">
                    {t('vocabulary.new')}
                  </div>
                  <button 
                    onClick={() => deleteWord(word.id)}
                    className="text-slate-300 hover:text-red-500 transition-colors font-bold text-sm"
                  >
                    âœ•
                  </button>
                </div>
                
                <div className="text-center flex-1 flex flex-col justify-center">
                  <h2 className="text-4xl font-black text-slate-900 mb-1" dir="rtl">{word.front}</h2>
                  {word.transliteration && (
                    <p className="text-sm text-indigo-600 font-semibold italic mb-2">{word.transliteration}</p>
                  )}
                  <p className="text-slate-500 font-bold">{word.back}</p>
                </div>

                <div className="flex justify-center mt-3">
                  <button
                    onClick={() => playWordSound(word.front)}
                    className="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 px-4 py-2 rounded-full font-bold text-sm transition-all flex items-center gap-2"
                  >
                    <span>ğŸ”Š</span>
                    <span>{t('vocabulary.listen')}</span>
                  </button>
                </div>

                <div className="w-full bg-slate-50 h-1.5 rounded-full overflow-hidden mt-4">
                  <div className="bg-indigo-500 h-full w-2" />
                </div>
              </motion.div>
            ))}
          </AnimatePresence>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/dashboard/layout.tsx">
'use client';

import Link from 'next/link';
import { usePathname, useRouter } from 'next/navigation';
import { Toaster } from 'react-hot-toast';
import { createBrowserClient } from '@supabase/ssr';
import {
  HomeIcon,
  LanguageIcon,
  BookOpenIcon,
  QueueListIcon,
  SparklesIcon,
  AcademicCapIcon,
  Cog6ToothIcon,
  ArrowLeftOnRectangleIcon,
  Bars3Icon,
  XMarkIcon,
  UserCircleIcon
} from '@heroicons/react/24/outline';
import clsx from 'clsx';
import { useState, useEffect } from 'react';
import { useLanguage } from '@/app/context/LanguageContext';
import LanguageSwitcher from '@/components/LanguageSwitcher';

export const dynamic = 'force-dynamic';

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const pathname = usePathname();
  const router = useRouter();
  const { t } = useLanguage();
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const [userEmail, setUserEmail] = useState<string | null>(null);

  const [supabase] = useState(() =>
    createBrowserClient(
      process.env.NEXT_PUBLIC_SUPABASE_URL!,
      process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
    )
  );

  useEffect(() => {
    const getUser = async () => {
      const { data: { user } } = await supabase.auth.getUser();
      if (user) setUserEmail(user.email ?? null);
    };
    getUser();
  }, [supabase]);

  const links = [
    { name: t('nav.dashboard'), href: '/dashboard', icon: HomeIcon },
    { name: t('nav.alphabet'), href: '/dashboard/alphabet', icon: LanguageIcon },
    { name: t('nav.nikud'), href: '/dashboard/nikud', icon: AcademicCapIcon },
    { name: t('nav.vocabulary'), href: '/dashboard/vocabulary', icon: BookOpenIcon },
    { name: t('nav.flashcards'), href: '/dashboard/practice', icon: QueueListIcon },
    { name: t('nav.quiz'), href: '/dashboard/quiz', icon: SparklesIcon, special: true },
  ];

  const handleLogout = async () => {
    await supabase.auth.signOut();
    router.push('/');
    router.refresh();
  };

  return (
    <div className="flex h-screen bg-slate-50" dir="ltr">
      <Toaster position="top-center" />

      {/* Mobile Menu Button */}
      <div className="md:hidden fixed top-4 right-4 z-50">
        <button
          onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
          className="p-2 bg-slate-900 text-white rounded-lg shadow-lg"
        >
          {isMobileMenuOpen ? <XMarkIcon className="w-6 h-6" /> : <Bars3Icon className="w-6 h-6" />}
        </button>
      </div>

      {/* Sidebar */}
      <aside className={clsx(
        "bg-slate-900 text-white flex flex-col shadow-xl transition-all duration-300 z-40",
        {
          "fixed inset-0 w-full": isMobileMenuOpen,
          "hidden md:flex md:w-64 md:static": !isMobileMenuOpen
        }
      )}>
        <div className="p-8">
          <h1 className="text-2xl font-black tracking-tighter bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent">
            HEBREW MASTER
          </h1>
        </div>

        <nav className="flex-1 px-4 space-y-2 overflow-y-auto">
          {links.map((link) => {
            const LinkIcon = link.icon;
            const isActive = pathname === link.href;

            return (
              <Link
                key={link.name}
                href={link.href}
                onClick={() => setIsMobileMenuOpen(false)}
                className={clsx(
                  "flex items-center space-x-3 p-3 rounded-2xl transition-all font-medium",
                  {
                    "bg-indigo-600 text-white shadow-lg shadow-indigo-500/20 font-bold": isActive,
                    "hover:bg-white/10 text-slate-300": !isActive,
                    "bg-indigo-600/10 text-indigo-400 border border-indigo-500/20": link.special && !isActive
                  }
                )}
              >
                <LinkIcon className="w-5 h-5" />
                <span>{link.name}</span>
              </Link>
            );
          })}
        </nav>

        {/* User Panel + Language Switcher */}
        <div className="p-6 border-t border-white/5 space-y-4">
          {userEmail && (
            <div className="flex items-center space-x-3 p-2 bg-white/5 rounded-2xl border border-white/5">
              <UserCircleIcon className="w-10 h-10 text-indigo-400 flex-none" />
              <div className="overflow-hidden">
                <p className="text-[10px] uppercase tracking-widest text-slate-500 font-bold">{t('dashboard.student')}</p>
                <p className="text-sm text-slate-200 truncate font-medium">{userEmail}</p>
              </div>
            </div>
          )}

          {/* Language Switcher */}
          <div className="px-2">
            <LanguageSwitcher />
          </div>

          <div className="space-y-1">
            <Link href="/dashboard/settings" className="flex items-center space-x-3 p-3 rounded-xl text-slate-400 hover:text-white transition-colors">
              <Cog6ToothIcon className="w-5 h-5" />
              <span>{t('nav.settings')}</span>
            </Link>

            <button
              onClick={handleLogout}
              className="w-full flex items-center space-x-3 p-3 rounded-xl text-slate-400 hover:text-red-400 hover:bg-red-400/10 transition-all"
            >
              <ArrowLeftOnRectangleIcon className="w-5 h-5" />
              <span>{t('nav.logout')}</span>
            </button>
          </div>
        </div>
      </aside>

      <main className="flex-1 overflow-y-auto">
        <div className="p-6 pt-20 md:p-12">
          {children}
        </div>
      </main>
    </div>
  );
}
</file>

<file path="app/page.tsx">
'use client';

import React from 'react';
import Link from 'next/link';
import { useLanguage } from '@/app/context/LanguageContext';
import LanguageSwitcher from '@/components/LanguageSwitcher';

export default function Home() {
  const { t } = useLanguage();

  return (
    <main className="min-h-screen bg-gradient-to-b from-blue-50 to-white font-sans">
      {/* Navbar */}
      <nav className="fixed w-full bg-white/80 backdrop-blur-md shadow-sm z-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between h-16 items-center">
            <div className="flex items-center gap-2">
              <span className="text-2xl">ğŸ‡®ğŸ‡±</span>
              <span className="text-xl font-bold text-blue-900">Hebrew Master</span>
            </div>
            <div className="flex items-center gap-4">
              <LanguageSwitcher />
              <Link href="/login" className="text-gray-600 hover:text-blue-600 font-medium transition-colors">
                {t('landing.login')}
              </Link>
              <Link href="/register" className="bg-blue-600 text-white px-5 py-2 rounded-full font-medium hover:bg-blue-700 transition-all shadow-md hover:shadow-lg">
                {t('landing.startFree')}
              </Link>
            </div>
          </div>
        </div>
      </nav>

      {/* Hero Section */}
      <section className="pt-32 pb-20 px-4 text-center">
        <div className="max-w-4xl mx-auto space-y-8">
          <div className="inline-block bg-blue-100 text-blue-700 px-4 py-1.5 rounded-full text-sm font-semibold mb-4">
            ğŸš€ {t('landing.badge')}
          </div>
          <h1 className="text-5xl md:text-7xl font-extrabold text-gray-900 tracking-tight leading-tight">
            {t('landing.heroTitle1')} <br />
            <span className="text-blue-600">{t('landing.heroTitle2')}</span>
          </h1>
          <p className="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
            {t('landing.heroSubtitle')}
          </p>
          
          <div className="flex flex-col sm:flex-row gap-4 justify-center mt-10">
            <Link href="/login" className="bg-blue-600 text-white px-8 py-4 rounded-xl text-lg font-bold hover:bg-blue-700 transition-all shadow-xl hover:shadow-2xl flex items-center justify-center gap-2">
              {t('landing.startNow')}
              <span>â†’</span>
            </Link>
            <button className="bg-white text-gray-700 border border-gray-200 px-8 py-4 rounded-xl text-lg font-semibold hover:bg-gray-50 transition-all">
              {t('landing.howItWorks')}
            </button>
          </div>
        </div>
      </section>

      {/* Features Grid */}
      <section className="py-20 bg-white">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="grid md:grid-cols-3 gap-8 text-center">
            <div className="p-8 rounded-2xl bg-gray-50 hover:bg-blue-50 transition-colors border border-gray-100">
              <div className="text-4xl mb-4">ğŸ¯</div>
              <h3 className="text-xl font-bold text-gray-900 mb-2">{t('landing.feature1Title')}</h3>
              <p className="text-gray-600">{t('landing.feature1Desc')}</p>
            </div>
            <div className="p-8 rounded-2xl bg-gray-50 hover:bg-blue-50 transition-colors border border-gray-100">
              <div className="text-4xl mb-4">ğŸ¤</div>
              <h3 className="text-xl font-bold text-gray-900 mb-2">{t('landing.feature2Title')}</h3>
              <p className="text-gray-600">{t('landing.feature2Desc')}</p>
            </div>
            <div className="p-8 rounded-2xl bg-gray-50 hover:bg-blue-50 transition-colors border border-gray-100">
              <div className="text-4xl mb-4">ğŸ“ˆ</div>
              <h3 className="text-xl font-bold text-gray-900 mb-2">{t('landing.feature3Title')}</h3>
              <p className="text-gray-600">{t('landing.feature3Desc')}</p>
            </div>
          </div>
        </div>
      </section>
    </main>
  );
}
</file>

<file path="middleware.ts">
import { createServerClient } from '@supabase/ssr'
import { NextResponse, type NextRequest } from 'next/server'

export async function middleware(request: NextRequest) {
  let response = NextResponse.next({
    request: { headers: request.headers },
  })

  const supabase = createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        getAll() { return request.cookies.getAll() },
        setAll(cookiesToSet) {
          cookiesToSet.forEach(({ name, value }) => request.cookies.set(name, value))
          response = NextResponse.next({ request })
          cookiesToSet.forEach(({ name, value, options }) => response.cookies.set(name, value, options))
        },
      },
    }
  )

  const { data: { user } } = await supabase.auth.getUser()

  // ×”×’× ×” ×¢×œ × ×ª×™×‘×™ ×”×“×©×‘×•×¨×“ - ×× ××™×Ÿ ××©×ª××©, ×©×œ×— ×œ×œ×•×’×™×Ÿ
  if (request.nextUrl.pathname.startsWith('/dashboard') && !user) {
    return NextResponse.redirect(new URL('/login', request.url))
  }

  // ×× ×”××©×ª××© ××—×•×‘×¨ ×•×× ×¡×” ×œ×”×™×›× ×¡ ×œ×œ×•×’×™×Ÿ, ×©×œ×— ××•×ª×• ×œ×“×©×‘×•×¨×“
  if (user && request.nextUrl.pathname === '/login') {
    return NextResponse.redirect(new URL('/dashboard', request.url))
  }

  return response
}

export const config = {
  /*
   * ×”×××¦'×¨ ×›×¢×ª ××•×’×“×¨ ×¨×§ ×œ× ×ª×™×‘×™× ×¡×¤×¦×™×¤×™×™×.
   * ×–×” ××‘×˜×™×— ×©×“×£ ×”×‘×™×ª (/) ×™×™×©××¨ × ×§×™ ××”×ª×¢×¨×‘×•×ª ×©×œ ×”-Middleware.
   */
  matcher: ['/dashboard/:path*', '/login'],
}
</file>

</files>
